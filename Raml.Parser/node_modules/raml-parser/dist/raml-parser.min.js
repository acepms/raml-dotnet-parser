!function(n){if("object"==typeof exports)module.exports=n();else if("function"==typeof define&&define.amd)define(n);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self);(t.RAML||(t.RAML={})).Parser=n()}}(function(){var n;return function t(n,i,r){function u(f,o){var h,s;if(!i[f]){if(!n[f]){if(h=typeof require=="function"&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);throw new Error("Cannot find module '"+f+"'");}s=i[f]={exports:{}};n[f][0].call(s.exports,function(t){var i=n[f][1][t];return u(i?i:t)},s,s.exports,t,n,i,r)}return i[f].exports}for(var e=typeof require=="function"&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(n,t,i){(function(){var u,t,r,o,f,e,s={}.hasOwnProperty,h=function(n,t){function r(){this.constructor=n}for(var i in t)s.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},c=function(n,t){return function(){return n.apply(t,arguments)}};t=n("./events");u=n("./errors").MarkedYAMLError;r=n("./nodes");o=n("./raml");f=n("./util");this.ComposerError=function(n){function t(){return e=t.__super__.constructor.apply(this,arguments)}return h(t,n),t}(u);this.Composer=function(){function n(){this.composeRamlTree=c(this.composeRamlTree,this);this.anchors={};this.filesToRead=[]}return n.prototype.check_node=function(){return this.check_event(t.StreamStartEvent)&&this.get_event(),!this.check_event(t.StreamEndEvent)},n.prototype.get_node=function(){if(!this.check_event(t.StreamEndEvent))return this.compose_document()},n.prototype.getYamlRoot=function(){var n,r;if(this.get_event(),n=null,this.check_event(t.StreamEndEvent)||(n=this.compose_document()),!this.check_event(t.StreamEndEvent)){r=this.get_event();throw new i.ComposerError("document scan",n.start_mark,"expected a single document in the stream but found another document",r.start_mark);}return this.get_event(),n},n.prototype.composeRamlTree=function(n,t){return(t.validate||t.transform)&&(this.load_schemas(n),this.load_traits(n),this.load_types(n),this.load_security_schemes(n)),t.validate&&this.validate_document(n),t.transform&&(this.apply_types(n),this.apply_traits(n),this.apply_schemas(n),this.apply_protocols(n),this.join_resources(n)),n},n.prototype.compose_document=function(){var n;return this.get_event(),n=this.compose_node(),this.get_event(),this.anchors={},n},n.prototype.getPendingFilesList=function(){return this.filesToRead},n.prototype.compose_node=function(n,r){var u,f,e;if(this.check_event(t.AliasEvent)){if(f=this.get_event(),u=f.anchor,!(u in this.anchors))throw new i.ComposerError(null,null,"found undefined alias "+u,f.start_mark);return this.anchors[u].clone()}if(f=this.peek_event(),u=f.anchor,u!==null&&u in this.anchors)throw new i.ComposerError("found duplicate anchor "+u+"; first occurence",this.anchors[u].start_mark,"second occurrence",f.start_mark);return this.descend_resolver(n,r),this.check_event(t.ScalarEvent)?e=this.compose_scalar_node(u,n,r):this.check_event(t.SequenceStartEvent)?e=this.compose_sequence_node(u):this.check_event(t.MappingStartEvent)&&(e=this.compose_mapping_node(u)),this.ascend_resolver(),e},n.prototype.compose_fixed_scalar_node=function(n,t){var i,u;return i=this.get_event(),u=new r.ScalarNode("tag:yaml.org,2002:str",t,i.start_mark,i.end_mark,i.style),n!==null&&(this.anchors[n]=u),u},n.prototype.compose_scalar_node=function(n,t,u){var f,s,h,e,o;if(f=this.get_event(),o=f.tag,e={},(o===null||o==="!")&&(o=this.resolve(r.ScalarNode,f.value,f.implicit)),f.tag==="!include"){if(f.value.match(/^\s*$/))throw new i.ComposerError("while composing scalar out of !include",null,"file name/URL cannot be null",f.start_mark);s=f.value.split(".").pop();h=s==="yaml"||s==="yml"||s==="raml"?"fragment":"scalar";this.filesToRead.push({targetUri:f.value,type:h,parentNode:t,parentKey:u,event:f,includingContext:this.src,targetFileUri:f.value});e=void 0}else e=new r.ScalarNode(o,f.value,f.start_mark,f.end_mark,f.style);return n&&e&&(this.anchors[n]=e),e},n.prototype.compose_sequence_node=function(n){var o,e,i,u,f,s;for(u=this.get_event(),f=u.tag,(f===null||f==="!")&&(f=this.resolve(r.SequenceNode,null,u.implicit)),i=new r.SequenceNode(f,[],u.start_mark,null,u.flow_style),e=0,n&&(this.anchors[n]=i);!this.check_event(t.SequenceEndEvent);)(s=this.compose_node(i,e))&&(i.value[e]=s),e++;return o=this.get_event(),i.end_mark=o.end_mark,i},n.prototype.compose_mapping_node=function(n){var h,e,c,u,o,s;for(o=this.get_event(),s=o.tag,(s===null||s==="!")&&(s=this.resolve(r.MappingNode,null,o.implicit)),u=new r.MappingNode(s,[],o.start_mark,null,o.flow_style),n!==null&&(this.anchors[n]=u);!this.check_event(t.MappingEndEvent);){if(e=this.compose_node(u),!f.isScalar(e))throw new i.ComposerError("while composing mapping key",null,"only scalar map keys are allowed in RAML",e.start_mark);(c=this.compose_node(u,e))&&u.value.push([e,c])}return h=this.get_event(),u.end_mark=h.end_mark,u},n}()}).call(this)},{"./errors":3,"./events":4,"./nodes":7,"./raml":10,"./util":20}],2:[function(n,t,i){(function(r){(function(){var o,u,e,s,h,l={}.hasOwnProperty,c=function(n,t){function r(){this.constructor=n}for(var i in t)l.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},f=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};o=n("./errors").MarkedYAMLError;u=n("./nodes");e=n("./util");this.ConstructorError=function(n){function t(){return s=t.__super__.constructor.apply(this,arguments)}return c(t,n),t}(o);this.BaseConstructor=function(){function n(){this.constructed_objects={};this.constructing_nodes=[];this.deferred_constructors=[]}return n.prototype.yaml_constructors={},n.prototype.yaml_multi_constructors={},n.add_constructor=function(n,t){return this.prototype.hasOwnProperty("yaml_constructors")||(this.prototype.yaml_constructors=e.extend({},this.prototype.yaml_constructors)),this.prototype.yaml_constructors[n]=t},n.add_multi_constructor=function(n,t){return this.prototype.hasOwnProperty("yaml_multi_constructors")||(this.prototype.yaml_multi_constructors=e.extend({},this.prototype.yaml_multi_constructors)),this.prototype.yaml_multi_constructors[n]=t},n.prototype.construct_document=function(n){var t;for(this.applyAstTransformations(n),t=this.construct_object(n);!e.is_empty(this.deferred_constructors);)this.deferred_constructors.pop()();return this.applyTransformations(t),t},n.prototype.defer=function(n){return this.deferred_constructors.push(n)},n.prototype.construct_object=function(n){var t,o,e,r,s;if(n.unique_id in this.constructed_objects)return this.constructed_objects[n.unique_id];if(s=n.unique_id,f.call(this.constructing_nodes,s)>=0)throw new i.ConstructorError(null,null,"found unconstructable recursive node",n.start_mark);if(this.constructing_nodes.push(n.unique_id),t=null,r=null,n.tag in this.yaml_constructors)t=this.yaml_constructors[n.tag];else{for(e in this.yaml_multi_constructors)if(n.tag.indexOf(e===0)){r=n.tag.slice(e.length);t=this.yaml_multi_constructors[e];break}t==null&&(null in this.yaml_multi_constructors?(r=n.tag,t=this.yaml_multi_constructors[null]):null in this.yaml_constructors?t=this.yaml_constructors[null]:n instanceof u.ScalarNode?t=this.construct_scalar:n instanceof u.SequenceNode?t=this.construct_sequence:n instanceof u.MappingNode&&(t=this.construct_mapping))}return o=t.call(this,r!=null?r:n,n),this.constructed_objects[n.unique_id]=o,this.constructing_nodes.pop(),o},n.prototype.construct_scalar=function(n){if(!(n instanceof u.ScalarNode))throw new i.ConstructorError(null,null,"expected a scalar node but found "+n.id,n.start_mark);return n.value},n.prototype.construct_sequence=function(n){var e,t,o,r,f;if(!(n instanceof u.SequenceNode))throw new i.ConstructorError(null,null,"expected an array node but found "+n.id,n.start_mark);for(r=n.value,f=[],t=0,o=r.length;t<o;t++)e=r[t],f.push(this.construct_object(e));return f},n.prototype.construct_mapping=function(n){var r,a,v,t,f,s,y,e,o,p,w,h,c,l;if(!(n instanceof u.MappingNode))throw new i.ConstructorError(null,null,"expected a map node but found "+n.id,n.start_mark);for(f={},h=n.value,e=0,p=h.length;e<p;e++)if(c=h[e],t=c[0],y=c[1],r=this.construct_object(t),s=this.construct_object(y),typeof r=="object"&&t.tag==="tag:yaml.org,2002:seq")for(l=t.value,o=0,w=l.length;o<w;o++)a=l[o],v=this.construct_object(a),f[v]=s;else if(typeof r=="object")throw new i.ConstructorError("while constructing a map",n.start_mark,"found unhashable key",t.start_mark);else f[r]=s;return f},n.prototype.construct_pairs=function(n){var o,s,r,h,c,t,l,f,e;if(!(n instanceof u.MappingNode))throw new i.ConstructorError(null,null,"expected a map node but found "+n.id,n.start_mark);for(r=[],f=n.value,t=0,l=f.length;t<l;t++)e=f[t],s=e[0],c=e[1],o=this.construct_object(s),h=this.construct_object(c),r.push([o,h]);return r},n}();this.Constructor=function(n){function t(){return h=t.__super__.constructor.apply(this,arguments)}var o,e,s;return c(t,n),o={"true":!0,"false":!1},s=/^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[\x20\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\.([0-9]*))?(?:[\x20\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$/,e={year:1,month:2,day:3,hour:4,minute:5,second:6,fraction:7,tz:8,tz_sign:9,tz_hour:10,tz_minute:11},t.prototype.yaml_constructors={},t.prototype.yaml_multi_constructors={},t.prototype.construct_scalar=function(n){var e,o,i,s,r,f;if(n instanceof u.MappingNode)for(r=n.value,i=0,s=r.length;i<s;i++)if(f=r[i],e=f[0],o=f[1],e.tag==="tag:yaml.org,2002:value")return this.construct_scalar(o);return t.__super__.construct_scalar.call(this,n)},t.prototype.flatten_mapping=function(n){for(var s,o,e,v,t,h,c,y,p,l,a,r=[],f=0;f<n.value.length;)if(l=n.value[f],s=l[0],t=l[1],s.tag==="tag:yaml.org,2002:merge")if(n.value.splice(f,1),t instanceof u.MappingNode)this.flatten_mapping(t),r=r.concat(t.value);else if(t instanceof u.SequenceNode){for(o=[],a=t.value,h=0,y=a.length;h<y;h++){if(e=a[h],!(e instanceof u.MappingNode))throw new i.ConstructorError("while constructing a map",n.start_mark,"expected a map for merging, but found "+e.id,e.start_mark);this.flatten_mapping(e);o.push(e.value)}for(o.reverse(),c=0,p=o.length;c<p;c++)v=o[c],r=r.concat(v)}else throw new i.ConstructorError("while constructing a map",n.start_mark,"expected a map or an array of maps for            merging but found "+t.id,t.start_mark);else s.tag==="tag:yaml.org,2002:value"?(s.tag="tag:yaml.org,2002:str",f++):f++;if(r.length)return n.value=r.concat(n.value)},t.prototype.construct_mapping=function(n){return n instanceof u.MappingNode&&this.flatten_mapping(n),t.__super__.construct_mapping.call(this,n)},t.prototype.construct_yaml_null=function(n){return this.construct_scalar(n),null},t.prototype.construct_yaml_bool=function(n){var t;return t=this.construct_scalar(n),o[t.toLowerCase()]},t.prototype.construct_yaml_int=function(n){var e,o,r,s,i,t,u,h,c;if(t=this.construct_scalar(n),t=t.replace(/_/g,""),i=t[0]==="-"?-1:1,(c=t[0],f.call("+-",c)>=0)&&(t=t.slice(1)),t==="0")return 0;if(t.indexOf("0b")===0)return i*parseInt(t.slice(2),2);if(t.indexOf("0x")===0)return i*parseInt(t.slice(2),16);if(t.indexOf("0o")===0)return i*parseInt(t.slice(2),8);if(t[0]==="0")return i*parseInt(t,8);if(f.call(t,":")>=0){for(r=function(){var n,u,i,r;for(i=t.split(/:/g),r=[],n=0,u=i.length;n<u;n++)s=i[n],r.push(parseInt(s));return r}(),r.reverse(),e=1,t=0,u=0,h=r.length;u<h;u++)o=r[u],t+=o*e,e*=60;return i*t}return i*parseInt(t)},t.prototype.construct_yaml_float=function(n){var e,o,i,s,r,t,u,h,c;if(t=this.construct_scalar(n),t=t.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,(c=t[0],f.call("+-",c)>=0)&&(t=t.slice(1)),t===".inf")return r*Infinity;if(t===".nan")return NaN;if(f.call(t,":")>=0){for(i=function(){var n,u,i,r;for(i=t.split(/:/g),r=[],n=0,u=i.length;n<u;n++)s=i[n],r.push(parseFloat(s));return r}(),i.reverse(),e=1,t=0,u=0,h=i.length;u<h;u++)o=i[u],t+=o*e,e*=60;return r*t}return r*parseFloat(t)},t.prototype.construct_yaml_binary=function(n){var t,u=this.construct_scalar(n);try{return typeof window!="undefined"&&window!==null?atob(u):new r(u,"base64").toString("ascii")}catch(f){t=f;throw new i.ConstructorError(null,null,"failed to decode base64 data: "+t,n.start_mark);}},t.prototype.construct_yaml_timestamp=function(n){var r,i,u,v,f,y,o,h,c,p,w,b,l,k,t,a;k=this.construct_scalar(n);y=n.value.match(s);t={};for(f in e)v=e[f],t[f]=y[v];if(a=parseInt(t.year),c=parseInt(t.month)-1,r=parseInt(t.day),!t.hour)return new Date(Date.UTC(a,c,r));if(u=parseInt(t.hour),h=parseInt(t.minute),p=parseInt(t.second),o=0,t.fraction){for(i=t.fraction.slice(0,6);i.length<6;)i+="0";i=parseInt(i);o=Math.round(i/1e3)}return t.tz_sign&&(l=t.tz_sign==="-"?1:-1,(w=parseInt(t.tz_hour))&&(u+=l*w),(b=parseInt(t.tz_minute))&&(h+=l*b)),new Date(Date.UTC(a,c,r,u,h,p,o))},t.prototype.construct_yaml_pair_list=function(n,t){var r,f=this;if(r=[],!(t instanceof u.SequenceNode))throw new i.ConstructorError("while constructing "+n,t.start_mark,"expected an array but found "+t.id,t.start_mark);return this.defer(function(){var l,a,e,v,y,o,p,s,h,c;for(s=t.value,c=[],o=0,p=s.length;o<p;o++){if(e=s[o],!(e instanceof u.MappingNode))throw new i.ConstructorError("while constructing "+n,t.start_mark,"expected a map of length 1 but found "+e.id,e.start_mark);if(e.value.length!==1)throw new i.ConstructorError("while constructing "+n,t.start_mark,"expected a map of length 1 but found "+e.id,e.start_mark);h=e.value[0];a=h[0];y=h[1];l=f.construct_object(a);v=f.construct_object(y);c.push(r.push([l,v]))}return c}),r},t.prototype.construct_yaml_omap=function(n){return this.construct_yaml_pair_list("an ordered map",n)},t.prototype.construct_yaml_pairs=function(n){return this.construct_yaml_pair_list("pairs",n)},t.prototype.construct_yaml_set=function(n){var t,i=this;return t=[],this.defer(function(){var r,u=[];for(r in i.construct_mapping(n))u.push(t.push(r));return u}),t},t.prototype.construct_yaml_str=function(n){return this.construct_scalar(n)},t.prototype.construct_yaml_seq=function(n){var t,i=this;return t=[],this.defer(function(){var e,r,o,u,f;for(u=i.construct_sequence(n),f=[],r=0,o=u.length;r<o;r++)e=u[r],f.push(t.push(e));return f}),t},t.prototype.construct_yaml_map=function(n){var t,i=this;return t={},this.defer(function(){var r,e,u,f;u=i.construct_mapping(n);f=[];for(r in u)e=u[r],f.push(t[r]=e);return f}),t},t.prototype.construct_yaml_object=function(n,t){var i,r=this;return i=new t,this.defer(function(){var t,e,u,f;u=r.construct_mapping(n,!0);f=[];for(t in u)e=u[t],f.push(i[t]=e);return f}),i},t.prototype.construct_undefined=function(n){throw new i.ConstructorError(null,null,"could not determine a constructor for the tag "+n.tag,n.start_mark);},t}(this.BaseConstructor);this.Constructor.add_constructor("tag:yaml.org,2002:null",this.Constructor.prototype.construct_yaml_null);this.Constructor.add_constructor("tag:yaml.org,2002:bool",this.Constructor.prototype.construct_yaml_bool);this.Constructor.add_constructor("tag:yaml.org,2002:int",this.Constructor.prototype.construct_yaml_int);this.Constructor.add_constructor("tag:yaml.org,2002:float",this.Constructor.prototype.construct_yaml_float);this.Constructor.add_constructor("tag:yaml.org,2002:binary",this.Constructor.prototype.construct_yaml_binary);this.Constructor.add_constructor("tag:yaml.org,2002:timestamp",this.Constructor.prototype.construct_yaml_timestamp);this.Constructor.add_constructor("tag:yaml.org,2002:omap",this.Constructor.prototype.construct_yaml_omap);this.Constructor.add_constructor("tag:yaml.org,2002:pairs",this.Constructor.prototype.construct_yaml_pairs);this.Constructor.add_constructor("tag:yaml.org,2002:set",this.Constructor.prototype.construct_yaml_set);this.Constructor.add_constructor("tag:yaml.org,2002:str",this.Constructor.prototype.construct_yaml_str);this.Constructor.add_constructor("tag:yaml.org,2002:seq",this.Constructor.prototype.construct_yaml_seq);this.Constructor.add_constructor("tag:yaml.org,2002:map",this.Constructor.prototype.construct_yaml_map);this.Constructor.add_constructor(null,this.Constructor.prototype.construct_undefined);t.exports.Constructor=this.Constructor;t.exports.ConstructorError=this.ConstructorError}).call(this)}).call(this,n("buffer").Buffer)},{"./errors":3,"./nodes":7,"./util":20,buffer:31}],3:[function(){(function(){var t,i=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1},r={}.hasOwnProperty,n=function(n,t){function u(){this.constructor=n}for(var i in t)r.call(t,i)&&(n[i]=t[i]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n};this.Mark=function(){function n(n,t,i,r,u){this.name=n;this.line=t;this.column=i;this.buffer=r;this.pointer=u}return n.prototype.get_snippet=function(n,t){var e,u,f,r,o,s,h;if(n==null&&(n=4),t==null&&(t=75),this.buffer==null)return null;for(e="\x00\r\n\u2028\u2029",f="",r=this.pointer;r>0&&(s=this.buffer[r-1],i.call(e,s)<0);)if(r--,this.pointer-r>t/2-1){f=" ... ";r+=5;break}for(o="",u=this.pointer;u<this.buffer.length&&(h=this.buffer[u],i.call(e,h)<0);)if(u++,u-this.pointer>t/2-1){o=" ... ";u-=5;break}return""+new Array(n).join(" ")+f+this.buffer.slice(r,u)+o+"\n"+new Array(n+this.pointer-r+f.length).join(" ")+"^"},n.prototype.toString=function(){var n,t;return n=this.get_snippet(),t='  in "'+this.name+'", line '+(this.line+1)+", column "+(this.column+1),n?t:""+t+":\n"+n},n}();this.YAMLError=function(t){function i(){i.__super__.constructor.call(this)}return n(i,t),i}(Error);this.MarkedYAMLError=function(t){function i(n,t,r,u,f){this.context=n;this.context_mark=t;this.message=r;this.problem_mark=u;this.note=f;i.__super__.constructor.call(this);this.message||(this.message=this.context);this.problem_mark||(this.problem_mark=this.context_mark)}return n(i,t),i.prototype.toString=function(){var n;return n=[],this.context!=null&&n.push(this.context),this.context_mark!=null&&(this.message==null||this.problem_mark==null||this.context_mark.name!==this.problem_mark.name||this.context_mark.line!==this.problem_mark.line||this.context_mark.column!==this.problem_mark.column)&&n.push(this.context_mark.toString()),this.message!=null&&n.push(this.message),this.problem_mark!=null&&n.push(this.problem_mark.toString()),this.note!=null&&n.push(this.note),n.join("\n")},i}(this.YAMLError);this.ValidationError=function(i){function r(){return t=r.__super__.constructor.apply(this,arguments)}return n(r,i),r}(this.MarkedYAMLError)}).call(this)},{}],4:[function(){(function(){var t,i,r,u,f,e,o,s={}.hasOwnProperty,n=function(n,t){function r(){this.constructor=n}for(var i in t)s.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};this.Event=function(){function n(n,t){this.start_mark=n;this.end_mark=t}return n}();this.NodeEvent=function(t){function i(n,t,i){this.anchor=n;this.start_mark=t;this.end_mark=i}return n(i,t),i}(this.Event);this.CollectionStartEvent=function(t){function i(n,t,i,r,u){this.anchor=n;this.tag=t;this.implicit=i;this.start_mark=r;this.end_mark=u}return n(i,t),i}(this.NodeEvent);this.CollectionEndEvent=function(i){function r(){return t=r.__super__.constructor.apply(this,arguments)}return n(r,i),r}(this.Event);this.StreamStartEvent=function(t){function i(n,t,i,r,u){this.start_mark=n;this.end_mark=t;this.explicit=i;this.version=r;this.tags=u}return n(i,t),i}(this.Event);this.StreamEndEvent=function(t){function r(){return i=r.__super__.constructor.apply(this,arguments)}return n(r,t),r}(this.Event);this.DocumentStartEvent=function(t){function i(n,t,i,r,u){this.start_mark=n;this.end_mark=t;this.explicit=i;this.version=r;this.tags=u}return n(i,t),i}(this.Event);this.DocumentEndEvent=function(t){function i(n,t,i){this.start_mark=n;this.end_mark=t;this.explicit=i}return n(i,t),i}(this.Event);this.AliasEvent=function(t){function i(){return r=i.__super__.constructor.apply(this,arguments)}return n(i,t),i}(this.NodeEvent);this.ScalarEvent=function(t){function i(n,t,i,r,u,f,e){this.anchor=n;this.tag=t;this.implicit=i;this.value=r;this.start_mark=u;this.end_mark=f;this.style=e}return n(i,t),i}(this.NodeEvent);this.SequenceStartEvent=function(t){function i(){return u=i.__super__.constructor.apply(this,arguments)}return n(i,t),i}(this.CollectionStartEvent);this.SequenceEndEvent=function(t){function i(){return f=i.__super__.constructor.apply(this,arguments)}return n(i,t),i}(this.CollectionEndEvent);this.MappingStartEvent=function(t){function i(){return e=i.__super__.constructor.apply(this,arguments)}return n(i,t),i}(this.CollectionStartEvent);this.MappingEndEvent=function(t){function i(){return o=i.__super__.constructor.apply(this,arguments)}return n(i,t),i}(this.CollectionEndEvent)}).call(this)},{}],5:[function(n){(function(){var i,t,r,u={}.hasOwnProperty,f=function(n,t){function r(){this.constructor=n}for(var i in t)u.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};i=n("./errors").MarkedYAMLError;t=n("./nodes");this.JoinError=function(n){function t(){return r=t.__super__.constructor.apply(this,arguments)}return f(t,n),t}(i);this.Joiner=function(){function n(){}return n.prototype.join_resources=function(n,i){var r,u,f,e,o=this;return i==null&&(i=0),r=[],(n!=null?n.value:void 0)&&(r=n.value.filter(function(n){var t;if((t=n[0])!=null)return t.value.match(/^\//)})),u=[],r.length>0?((n!=null?n.value:void 0)&&(n.value=n.value.filter(function(n){return!n[0].value.match(/^\//)})),f=new t.ScalarNode("tag:yaml.org,2002:str","resources",r[0][0].start_mark,r[r.length-1][1].end_mark),r.forEach(function(n){var r,f;return r=new t.ScalarNode("tag:yaml.org,2002:str","relativeUri",n[0].start_mark,n[1].end_mark),f=new t.ScalarNode("tag:yaml.org,2002:str",n[0].value,n[0].start_mark,n[1].end_mark),n[1].tag==="tag:yaml.org,2002:null"&&(n[1]=new t.MappingNode("tag:yaml.org,2002:map",[],n[0].start_mark,n[1].end_mark)),n[1].value.push([r,f]),u.push(n[1]),o.join_methods(n[1]),o.join_resources(n[1],++i)}),e=new t.SequenceNode("tag:yaml.org,2002:seq",u,r[0][0].start_mark,r[r.length-1][1].end_mark),n.value.push([f,e])):void 0},n.prototype.join_methods=function(n){var i,r,u,f,e=this;return i=[],n&&n.value&&(i=n.value.filter(function(n){var t;return e.isHttpMethod((t=n[0])!=null?t.value:void 0)})),r=[],i.length>0?(n.value=n.value.filter(function(n){return!e.isHttpMethod(n[0].value)}),u=new t.ScalarNode("tag:yaml.org,2002:str","methods",i[0][0].start_mark,i[i.length-1][1].end_mark),i.forEach(function(n){var i,u;return i=new t.ScalarNode("tag:yaml.org,2002:str","method",n[0].start_mark,n[1].end_mark),u=new t.ScalarNode("tag:yaml.org,2002:str",n[0].value,n[0].start_mark,n[1].end_mark),n[1].tag==="tag:yaml.org,2002:null"&&(n[1]=new t.MappingNode("tag:yaml.org,2002:map",[],n[1].start_mark,n[1].end_mark)),n[1].value.push([i,u]),r.push(n[1])}),f=new t.SequenceNode("tag:yaml.org,2002:seq",r,i[0][0].start_mark,i[i.length-1][1].end_mark),n.value.push([u,f])):void 0},n}()}).call(this)},{"./errors":3,"./nodes":7}],6:[function(n){(function(){var i,r,u,f,e,o,s,h,c,l,a,v,y,t,p;t=n("./util");o=n("./reader");h=n("./scanner");f=n("./parser");i=n("./composer");s=n("./resolver");r=n("./construct");p=n("./validator");u=n("./joiner");a=n("./traits");y=n("./resourceTypes");c=n("./schemas");e=n("./protocols");l=n("./securitySchemes");v=n("./transformations");this.make_loader=function(n,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot){return n==null&&(n=o.Reader),w==null&&(w=h.Scanner),b==null&&(b=f.Parser),k==null&&(k=i.Composer),d==null&&(d=s.Resolver),g==null&&(g=p.Validator),nt==null&&(nt=y.ResourceTypes),tt==null&&(tt=a.Traits),it==null&&(it=c.Schemas),rt==null&&(rt=e.Protocols),ut==null&&(ut=u.Joiner),ft==null&&(ft=l.SecuritySchemes),et==null&&(et=r.Constructor),ot==null&&(ot=v.Transformations),function(){function u(n,t,u,f){var e,s,o;for(this.parent=f!=null?f:null,i[0].call(this,n,t),i[1].call(this,u),i[2].call(this,u),i[3].call(this,u),o=i.slice(4),e=0,s=o.length;e<s;e++)r=o[e],r.call(this)}var r,i;return i=[n,w,k,ot,b,d,g,tt,nt,it,rt,ut,et,ft],t.extend.apply(t,[u.prototype].concat(function(){var n,u,t;for(t=[],n=0,u=i.length;n<u;n++)r=i[n],t.push(r.prototype);return t}())),u}()};this.Loader=this.make_loader()}).call(this)},{"./composer":1,"./construct":2,"./joiner":5,"./parser":8,"./protocols":9,"./reader":11,"./resolver":12,"./resourceTypes":13,"./scanner":14,"./schemas":15,"./securitySchemes":16,"./traits":18,"./transformations":19,"./util":20,"./validator":21}],7:[function(n,t,i){(function(){var r,u,f,e,o,s={}.hasOwnProperty,t=function(n,t){function r(){this.constructor=n}for(var i in t)s.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};r=n("./errors").MarkedYAMLError;u=0;this.ApplicationError=function(n){function i(){return f=i.__super__.constructor.apply(this,arguments)}return t(i,n),i}(r);this.Node=function(){function n(n,t,i,r){this.tag=n;this.value=t;this.start_mark=i;this.end_mark=r;this.unique_id="node_"+u++}return n.prototype.clone=function(){return new this.constructor(this.tag,this.value,this.start_mark,this.end_mark)},n}();this.ScalarNode=function(n){function r(n,t,i,u,f){this.tag=n;this.value=t;this.start_mark=i;this.end_mark=u;this.style=f;r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.id="scalar",r.prototype.clone=function(){return new this.constructor(this.tag,this.value,this.start_mark,this.end_mark,this.style)},r.prototype.cloneRemoveIs=function(){return this.clone()},r.prototype.combine=function(n){if(this.tag==="tag:yaml.org,2002:null"&&n.tag==="tag:yaml.org,2002:map")return this.value=new i.MappingNode("tag:yaml.org,2002:map",[],n.start_mark,n.end_mark),this.value.combine(n);if(!(n instanceof i.ScalarNode))throw new i.ApplicationError("while applying node",null,"different YAML structures",this.start_mark);return this.value=n.value},r.prototype.remove_question_mark_properties=function(){},r}(this.Node);this.CollectionNode=function(n){function i(n,t,r,u,f){this.tag=n;this.value=t;this.start_mark=r;this.end_mark=u;this.flow_style=f;i.__super__.constructor.apply(this,arguments)}return t(i,n),i}(this.Node);this.SequenceNode=function(n){function r(){return e=r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.id="sequence",r.prototype.clone=function(){var r,t,u,n,f,i;for(t=[],i=this.value,n=0,f=i.length;n<f;n++)r=i[n],u=r.clone(),t.push(u);return new this.constructor(this.tag,t,this.start_mark,this.end_mark,this.flow_style)},r.prototype.cloneRemoveIs=function(){return this.clone()},r.prototype.combine=function(n){var f,e,t,o,r,u;if(!(n instanceof i.SequenceNode))throw new i.ApplicationError("while applying node",null,"different YAML structures",this.start_mark);for(r=n.value,u=[],t=0,o=r.length;t<o;t++)f=r[t],e=f.clone(),u.push(this.value.push(e));return u},r.prototype.remove_question_mark_properties=function(){var r,n,u,t,i;for(t=this.value,i=[],n=0,u=t.length;n<u;n++)r=t[n],i.push(r.remove_question_mark_properties());return i},r}(this.CollectionNode);this.MappingNode=function(n){function r(){return o=r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.id="mapping",r.prototype.clone=function(){var u,t,i,f,n,e,r;for(t=[],r=this.value,n=0,e=r.length;n<e;n++)i=r[n],u=i[0].clone(),f=i[1].clone(),t.push([u,f]);return new this.constructor(this.tag,t,this.start_mark,this.end_mark,this.flow_style)},r.prototype.cloneRemoveIs=function(){var t,i,r,f,n,e,u,o;for(i=[],u=this.value,n=0,e=u.length;n<e;n++)r=u[n],t=r[0].cloneRemoveIs(),f=r[1].cloneRemoveIs(),(o=t.value)!=="is"&&i.push([t,f]);return new this.constructor(this.tag,i,this.start_mark,this.end_mark,this.flow_style)},r.prototype.cloneForTrait=function(){var t,i,r,f,n,e,u,o;for(i=[],u=this.value,n=0,e=u.length;n<e;n++)r=u[n],t=r[0].clone(),f=r[1].clone(),(o=t.value)!=="usage"&&o!=="displayName"&&i.push([t,f]);return new this.constructor(this.tag,i,this.start_mark,this.end_mark,this.flow_style)},r.prototype.cloneForResourceType=function(){var i,r,u,e,n,o,f,t;for(r=[],f=this.value,n=0,o=f.length;n<o;n++)u=f[n],i=u[0].cloneRemoveIs(),e=u[1].cloneRemoveIs(),(t=i.value)!=="is"&&t!=="type"&&t!=="usage"&&t!=="displayName"&&r.push([i,e]);return new this.constructor(this.tag,r,this.start_mark,this.end_mark,this.flow_style)},r.prototype.combine=function(n){var r,h,c,t,f,u,e,l,s,o;if(n.tag==="tag:yaml.org,2002:null"&&(n=new i.MappingNode("tag:yaml.org,2002:map",[],n.start_mark,n.end_mark)),!(n instanceof i.MappingNode))throw new i.ApplicationError("while applying node",null,"different YAML structures",this.start_mark);for(s=n.value,o=[],e=0,l=s.length;e<l;e++)u=s[e],r=u[0].value,h=this.value.some(function(n){return n[0].value===r||n[0].value+"?"===r||n[0].value===r+"?"}),h?o.push(function(){var e,s,o,n;for(o=this.value,n=[],e=0,s=o.length;e<s;e++)t=o[e],f=t[0].value,f===r||f+"?"===r||f===r+"?"?(t[1].tag==="tag:yaml.org,2002:null"&&u[1].tag==="tag:yaml.org,2002:map"&&(c=new i.MappingNode("tag:yaml.org,2002:map",[],t[1].start_mark,t[1].end_mark),t[1]=c),t[1].combine(u[1]),t[0].value.slice(-1)==="?"&&u[0].value.slice(-1)==="?"?n.push(void 0):t[0].value.slice(-1)==="?"?n.push(t[0].value=t[0].value.slice(0,-1)):n.push(void 0)):n.push(void 0);return n}.call(this)):o.push(this.value.push([u[0].clone(),u[1].clone()]));return o},r.prototype.remove_question_mark_properties=function(){var r,n,u,t,i;for(this.value=this.value.filter(function(n){return n[0].value.slice(-1)!=="?"}),t=this.value,i=[],n=0,u=t.length;n<u;n++)r=t[n],i.push(r[1].remove_question_mark_properties());return i},r}(this.CollectionNode)}).call(this)},{"./errors":3}],8:[function(n,t,i){(function(){var f,r,t,e,u={}.hasOwnProperty,o=function(n,t){function r(){this.constructor=n}for(var i in t)u.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},s=[].slice;r=n("./events");f=n("./errors").MarkedYAMLError;t=n("./tokens");this.ParserError=function(n){function t(){return e=t.__super__.constructor.apply(this,arguments)}return o(t,n),t}(f);this.Parser=function(){function n(){this.current_event=null;this.yaml_version=null;this.tag_handles={};this.states=[];this.marks=[];this.state="parse_stream_start"}var f;return f={"!":"!","!!":"tag:yaml.org,2002:"},n.prototype.dispose=function(){return this.states=[],this.state=null},n.prototype.check_event=function(){var i,n,t,r;if(n=1<=arguments.length?s.call(arguments,0):[],this.current_event===null&&this.state!=null&&(this.current_event=this[this.state]()),this.current_event!==null){if(n.length===0)return!0;for(t=0,r=n.length;t<r;t++)if(i=n[t],this.current_event instanceof i)return!0}return!1},n.prototype.peek_event=function(){return this.current_event===null&&this.state!=null&&(this.current_event=this[this.state]()),this.current_event},n.prototype.get_event=function(){var n;return this.current_event===null&&this.state!=null&&(this.current_event=this[this.state]()),n=this.current_event,this.current_event=null,n},n.prototype.parse_stream_start=function(){var t,n;return n=this.get_token(),t=new r.StreamStartEvent(n.start_mark,n.end_mark),this.state="parse_implicit_document_start",t},n.prototype.parse_implicit_document_start=function(){var n,i,u,e;return this.check_token(t.DirectiveToken,t.DocumentStartToken,t.StreamEndToken)?this.parse_document_start():(this.tag_handles=f,e=this.peek_token(),u=n=e.start_mark,i=new r.DocumentStartEvent(u,n,!1),this.states.push("parse_document_end"),this.state="parse_block_node",i)},n.prototype.parse_document_start=function(){for(var e,u,o,s,n,h,f;this.check_token(t.DocumentEndToken);)this.get_token();if(this.check_token(t.StreamEndToken)){if(n=this.get_token(),u=new r.StreamEndEvent(n.start_mark,n.end_mark),this.states.length!==0)throw new Error("assertion error, states should be empty");if(this.marks.length!==0)throw new Error("assertion error, marks should be empty");this.state=null}else{if(o=this.peek_token().start_mark,f=this.process_directives(),h=f[0],s=f[1],!this.check_token(t.DocumentStartToken))throw new i.ParserError("expected '<document start>', but found "+this.peek_token().id,this.peek_token().start_mark);n=this.get_token();e=n.end_mark;u=new r.DocumentStartEvent(o,e,!0,h,s);this.states.push("parse_document_end");this.state="parse_document_content"}return u},n.prototype.parse_document_end=function(){var i,f,u,e,n;return n=this.peek_token(),e=i=n.start_mark,u=!1,this.check_token(t.DocumentEndToken)&&(n=this.get_token(),i=n.end_mark,u=!0),f=new r.DocumentEndEvent(e,i,u),this.state="parse_document_start",f},n.prototype.parse_document_content=function(){var n;return this.check_token(t.DirectiveToken,t.DocumentStartToken,t.DocumentEndToken,t.StreamEndToken)?(n=this.process_empty_scalar(this.peek_token().start_mark),this.state=this.states.pop(),n):this.parse_block_node()},n.prototype.process_directives=function(){var n,l,a,e,o,r,v,h,c,s;for(this.yaml_version=null,this.tag_handles={};this.check_token(t.DirectiveToken);)if(r=this.get_token(),r.name==="YAML"){if(this.yaml_version!==null)throw new i.ParserError(null,null,"found duplicate YAML directive",r.start_mark);if(h=r.value,l=h[0],a=h[1],l!==1||a!==2)throw new i.ParserError(null,null,"found incompatible YAML document (version 1.2 is required)",r.start_mark);this.yaml_version=r.value}else if(r.name==="TAG"){if(c=r.value,n=c[0],e=c[1],n in this.tag_handles)throw new i.ParserError(null,null,"duplicate tag handle "+n,r.start_mark);this.tag_handles[n]=e}o=null;s=this.tag_handles;for(n in s)u.call(s,n)&&(e=s[n],o==null&&(o={}),o[n]=e);v=[this.yaml_version,o];for(n in f)u.call(f,n)&&(e=f[n],e in this.tag_handles||(this.tag_handles[n]=e));return v},n.prototype.parse_block_node=function(){return this.parse_node(!0)},n.prototype.parse_flow_node=function(){return this.parse_node()},n.prototype.parse_block_node_or_indentless_sequence=function(){return this.parse_node(!0,!0)},n.prototype.parse_node=function(n,u){var h,o,c,a,l,p,s,y,e,v,f;if(n==null&&(n=!1),u==null&&(u=!1),this.check_token(t.AliasToken))f=this.get_token(),c=new r.AliasEvent(f.value,f.start_mark,f.end_mark),this.state=this.states.pop();else{if(h=null,e=null,s=o=v=null,this.check_token(t.AnchorToken)?(f=this.get_token(),s=f.start_mark,o=f.end_mark,h=f.value,this.check_token(t.TagToken)&&(f=this.get_token(),v=f.start_mark,o=f.end_mark,e=f.value)):this.check_token(t.TagToken)&&(f=this.get_token(),s=v=f.start_mark,o=f.end_mark,e=f.value,this.check_token(t.AnchorToken)&&(f=this.get_token(),o=f.end_mark,h=f.value)),e!==null)if(a=e[0],y=e[1],a!==null){if(!(a in this.tag_handles))throw new i.ParserError("while parsing a node",s,"found undefined tag handle "+a,v);e=this.tag_handles[a]+y}else e=y;if(s===null&&(s=o=this.peek_token().start_mark),c=null,l=e===null||e==="!",u&&this.check_token(t.BlockEntryToken))o=this.peek_token().end_mark,c=new r.SequenceStartEvent(h,e,l,s,o),this.state="parse_indentless_sequence_entry";else if(this.check_token(t.ScalarToken))f=this.get_token(),o=f.end_mark,l=f.plain&&e===null||e==="!"?[!0,!1]:e===null?[!1,!0]:[!1,!1],c=new r.ScalarEvent(h,e,l,f.value,s,o,f.style),this.state=this.states.pop();else if(this.check_token(t.FlowSequenceStartToken))o=this.peek_token().end_mark,c=new r.SequenceStartEvent(h,e,l,s,o,!0),this.state="parse_flow_sequence_first_entry";else if(this.check_token(t.FlowMappingStartToken))o=this.peek_token().end_mark,c=new r.MappingStartEvent(h,e,l,s,o,!0),this.state="parse_flow_mapping_first_key";else if(n&&this.check_token(t.BlockSequenceStartToken))o=this.peek_token().end_mark,c=new r.SequenceStartEvent(h,e,l,s,o,!1),this.state="parse_block_sequence_first_entry";else if(n&&this.check_token(t.BlockMappingStartToken))o=this.peek_token().end_mark,c=new r.MappingStartEvent(h,e,l,s,o,!1),this.state="parse_block_mapping_first_key";else if(h!==null||e!==null)c=new r.ScalarEvent(h,e,[l,!1],"",s,o),this.state=this.states.pop();else{p=n?"block":"flow";f=this.peek_token();throw new i.ParserError("while parsing a "+p+" node",s,"expected the node content, but found "+f.id,f.start_mark);}}return c},n.prototype.parse_block_sequence_first_entry=function(){var n;return n=this.get_token(),this.marks.push(n.start_mark),this.parse_block_sequence_entry()},n.prototype.parse_block_sequence_entry=function(){var u,n;if(this.check_token(t.BlockEntryToken))return n=this.get_token(),this.check_token(t.BlockEntryToken,t.BlockEndToken)?(this.state="parse_block_sequence_entry",this.process_empty_scalar(n.end_mark)):(this.states.push("parse_block_sequence_entry"),this.parse_block_node());if(!this.check_token(t.BlockEndToken)){n=this.peek_token();throw new i.ParserError("while parsing a block collection",this.marks.slice(-1)[0],"expected <block end>, but found "+n.id,n.start_mark);}return n=this.get_token(),u=new r.SequenceEndEvent(n.start_mark,n.end_mark),this.state=this.states.pop(),this.marks.pop(),u},n.prototype.parse_indentless_sequence_entry=function(){var i,n;return this.check_token(t.BlockEntryToken)?(n=this.get_token(),this.check_token(t.BlockEntryToken,t.KeyToken,t.ValueToken,t.BlockEndToken)?(this.state="parse_indentless_sequence_entry",this.process_empty_scalar(n.end_mark)):(this.states.push("parse_indentless_sequence_entry"),this.parse_block_node())):(n=this.peek_token(),i=new r.SequenceEndEvent(n.start_mark,n.start_mark),this.state=this.states.pop(),i)},n.prototype.parse_block_mapping_first_key=function(){var n;return n=this.get_token(),this.marks.push(n.start_mark),this.parse_block_mapping_key()},n.prototype.parse_block_mapping_key=function(){var u,n;if(this.check_token(t.KeyToken))return n=this.get_token(),this.check_token(t.KeyToken,t.ValueToken,t.BlockEndToken)?(this.state="parse_block_mapping_value",this.process_empty_scalar(n.end_mark)):(this.states.push("parse_block_mapping_value"),this.parse_block_node_or_indentless_sequence());if(!this.check_token(t.BlockEndToken)){n=this.peek_token();throw new i.ParserError("while parsing a block mapping",this.marks.slice(-1)[0],"expected <block end>, but found "+n.id,n.start_mark);}return n=this.get_token(),u=new r.MappingEndEvent(n.start_mark,n.end_mark),this.state=this.states.pop(),this.marks.pop(),u},n.prototype.parse_block_mapping_value=function(){var n;return this.check_token(t.ValueToken)?(n=this.get_token(),this.check_token(t.KeyToken,t.ValueToken,t.BlockEndToken)?(this.state="parse_block_mapping_key",this.process_empty_scalar(n.end_mark)):(this.states.push("parse_block_mapping_key"),this.parse_block_node_or_indentless_sequence())):(this.state="parse_block_mapping_key",n=this.peek_token(),this.process_empty_scalar(n.start_mark))},n.prototype.parse_flow_sequence_first_entry=function(){var n;return n=this.get_token(),this.marks.push(n.start_mark),this.parse_flow_sequence_entry(!0)},n.prototype.parse_flow_sequence_entry=function(n){var f,u;if(n==null&&(n=!1),!this.check_token(t.FlowSequenceEndToken)){if(!n)if(this.check_token(t.FlowEntryToken))this.get_token();else{u=this.peek_token();throw new i.ParserError("while parsing a flow sequence",this.marks.slice(-1)[0],"expected ',' or ']', but got "+u.id,u.start_mark);}if(this.check_token(t.KeyToken))return u=this.peek_token(),f=new r.MappingStartEvent(null,null,!0,u.start_mark,u.end_mark,!0),this.state="parse_flow_sequence_entry_mapping_key",f;if(!this.check_token(t.FlowSequenceEndToken))return this.states.push("parse_flow_sequence_entry"),this.parse_flow_node()}return u=this.get_token(),f=new r.SequenceEndEvent(u.start_mark,u.end_mark),this.state=this.states.pop(),this.marks.pop(),f},n.prototype.parse_flow_sequence_entry_mapping_key=function(){var n;return n=this.get_token(),this.check_token(t.ValueToken,t.FlowEntryToken,t.FlowSequenceEndToken)?(this.state="parse_flow_sequence_entry_mapping_value",this.process_empty_scalar(n.end_mark)):(this.states.push("parse_flow_sequence_entry_mapping_value"),this.parse_flow_node())},n.prototype.parse_flow_sequence_entry_mapping_value=function(){var n;return this.check_token(t.ValueToken)?(n=this.get_token(),this.check_token(t.FlowEntryToken,t.FlowSequenceEndToken)?(this.state="parse_flow_sequence_entry_mapping_end",this.process_empty_scalar(n.end_mark)):(this.states.push("parse_flow_sequence_entry_mapping_end"),this.parse_flow_node())):(this.state="parse_flow_sequence_entry_mapping_end",n=this.peek_token(),this.process_empty_scalar(n.start_mark))},n.prototype.parse_flow_sequence_entry_mapping_end=function(){var n;return this.state="parse_flow_sequence_entry",n=this.peek_token(),new r.MappingEndEvent(n.start_mark,n.start_mark)},n.prototype.parse_flow_mapping_first_key=function(){var n;return n=this.get_token(),this.marks.push(n.start_mark),this.parse_flow_mapping_key(!0)},n.prototype.parse_flow_mapping_key=function(n){var f,u;if(n==null&&(n=!1),!this.check_token(t.FlowMappingEndToken)){if(!n)if(this.check_token(t.FlowEntryToken))this.get_token();else{u=this.peek_token();throw new i.ParserError("while parsing a flow mapping",this.marks.slice(-1)[0],"expected ',' or '}', but got "+u.id,u.start_mark);}if(this.check_token(t.KeyToken))return u=this.get_token(),this.check_token(t.ValueToken,t.FlowEntryToken,t.FlowMappingEndToken)?(this.state="parse_flow_mapping_value",this.process_empty_scalar(u.end_mark)):(this.states.push("parse_flow_mapping_value"),this.parse_flow_node());if(!this.check_token(t.FlowMappingEndToken))return this.states.push("parse_flow_mapping_empty_value"),this.parse_flow_node()}return u=this.get_token(),f=new r.MappingEndEvent(u.start_mark,u.end_mark),this.state=this.states.pop(),this.marks.pop(),f},n.prototype.parse_flow_mapping_value=function(){var n;return this.check_token(t.ValueToken)?(n=this.get_token(),this.check_token(t.FlowEntryToken,t.FlowMappingEndToken)?(this.state="parse_flow_mapping_key",this.process_empty_scalar(n.end_mark)):(this.states.push("parse_flow_mapping_key"),this.parse_flow_node())):(this.state="parse_flow_mapping_key",n=this.peek_token(),this.process_empty_scalar(n.start_mark))},n.prototype.parse_flow_mapping_empty_value=function(){return this.state="parse_flow_mapping_key",this.process_empty_scalar(this.peek_token().start_mark)},n.prototype.process_empty_scalar=function(n){return new r.ScalarEvent(null,null,[!0,!1],"",n,n)},n}()}).call(this)},{"./errors":3,"./events":4,"./tokens":17}],9:[function(n){(function(){var u,t,i,r,f=function(n,t){return function(){return n.apply(t,arguments)}};i=n("url");u=n("./errors").MarkedYAMLError;t=n("./nodes");r=n("./util");this.Protocols=function(){function n(){this.apply_protocols=f(this.apply_protocols,this)}return n.prototype.apply_protocols=function(n){var t;if(t=this.apply_protocols_to_root(n))return this.apply_protocols_to_resources(n,t)},n.prototype.apply_protocols_to_root=function(n){var u,f,e,r;return this.has_property(n,"protocols")?this.get_property(n,"protocols"):(u=this.property_value(n,"baseUri"))?(f=i.parse(u),e=(f.protocol||"http:").slice(0,-1).toUpperCase(),r=[new t.ScalarNode("tag:yaml.org,2002:str","protocols",n.start_mark,n.end_mark),new t.SequenceNode("tag:yaml.org,2002:seq",[new t.ScalarNode("tag:yaml.org,2002:str",e,n.start_mark,n.end_mark)],n.start_mark,n.end_mark)],n.value.push(r),r[1]):void 0},n.prototype.apply_protocols_to_resources=function(n,t){var r,i,e,u,f;for(u=this.child_resources(n),f=[],i=0,e=u.length;i<e;i++)r=u[i],this.apply_protocols_to_resources(r,t),f.push(this.apply_protocols_to_methods(r,t));return f},n.prototype.apply_protocols_to_methods=function(n,i){var u,f,s,o,e;for(o=this.child_methods(n[1]),e=[],f=0,s=o.length;f<s;f++)u=o[f],this.has_property(u[1],"protocols")?e.push(void 0):(r.isMapping(u[1])||(u[1]=new t.MappingNode("tag:yaml.org,2002:map",[],u[1].start_mark,u[1].end_mark)),e.push(u[1].value.push([new t.ScalarNode("tag:yaml.org,2002:str","protocols",u[0].start_mark,u[0].end_mark),i.clone()])));return e},n}()}).call(this)},{"./errors":3,"./nodes":7,"./util":20,url:46}],10:[function(n,t,i){(function(){var t,r,u,f={}.hasOwnProperty,e=function(n,t){function r(){this.constructor=n}for(var i in t)f.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};this.errors=n("./errors");this.loader=n("./loader");r=n("./util");this.FileError=function(n){function t(){return u=t.__super__.constructor.apply(this,arguments)}return e(t,n),t}(this.errors.MarkedYAMLError);this.FileReader=function(){function t(t){this.q=n("q");this.url=n("url");t&&(this.readFileAsyncOverride=t)}return t.prototype.readFileAsync=function(n){var t;if(this.readFileAsyncOverride)return this.readFileAsyncOverride(n);if(t=this.url.parse(n),t.protocol!=null){if(t.protocol.match(/^https?/i))return this.fetchFileAsync(n);throw new i.FileError("while reading "+n,null,"unknown protocol "+t.protocol,this.start_mark);}else return typeof window!="undefined"&&window!==null?this.fetchFileAsync(n):this.fetchLocalFileAsync(n)},t.prototype.fetchLocalFileAsync=function(t){var r,u=this;return r=this.q.defer(),n("fs").readFile(t,function(n,f){return n?r.reject(new i.FileError("while reading "+t,null,"cannot read "+t+" ("+n+")",u.start_mark)):r.resolve(f.toString())}),r.promise},t.prototype.fetchFileAsync=function(t){var u,f,r,e=this;u=this.q.defer();r=typeof window!="undefined"&&window!==null?new XMLHttpRequest:new(n("xmlhttprequest").XMLHttpRequest);try{return r.open("GET",t,!1),r.setRequestHeader("Accept","application/raml+yaml, */*"),r.onreadystatechange=function(){if(r.readyState===4)return typeof r.status=="number"&&r.status===200||typeof r.status=="string"&&r.status.match(/^200/i)?u.resolve(r.responseText):u.reject(new i.FileError("while fetching "+t,null,"cannot fetch "+t+" ("+r.statusText+")",e.start_mark))},r.send(null),u.promise}catch(o){f=o;throw new i.FileError("while fetching "+t,null,"cannot fetch "+t+" ("+f+"), check that the server is up and that CORS is enabled",this.start_mark);}},t}();this.RamlParser=function(){function u(i){this.settings=i!=null?i:t;this.q=n("q");this.url=n("url");this.nodes=n("./nodes");this.loadDefaultSettings(i)}return u.prototype.loadDefaultSettings=function(n){var i=this;return Object.keys(t).forEach(function(i){if(!(i in n))return n[i]=t[i]})},u.prototype.loadFile=function(n,t){var r,u=this;t==null&&(t=this.settings);try{return t.reader.readFileAsync(n).then(function(i){return u.load(i,n,t)})}catch(f){return r=f,this.q.fcall(function(){throw new i.FileError("while fetching "+n,null,"cannot fetch "+n+" ("+r+")",null);})}},u.prototype.composeFile=function(n,t,r){var u,f=this;t==null&&(t=this.settings);try{return t.reader.readFileAsync(n).then(function(i){return f.compose(i,n,t,r)})}catch(e){return u=e,this.q.fcall(function(){throw new i.FileError("while fetching "+n,null,"cannot fetch "+n+" ("+u+")",null);})}},u.prototype.compose=function(n,t,i,r){return i==null&&(i=this.settings),r==null&&(r={src:t}),i.compose=!1,this.parseStream(n,t,i,r)},u.prototype.load=function(n,t,i){return i==null&&(i=this.settings),i.compose=!0,this.parseStream(n,t,i,{src:t})},u.prototype.parseStream=function(n,t,r,u){var f,e=this;return r==null&&(r=this.settings),f=new i.loader.Loader(n,t,r,u),this.q.fcall(function(){return f.getYamlRoot()}).then(function(n){var t;return t=f.getPendingFilesList(),e.getPendingFiles(f,n,t)}).then(function(n){return f.composeRamlTree(n,r),r.compose?n!=null?f.construct_document(n):null:n})},u.prototype.getPendingFiles=function(n,t,i){var e,r,f,u,o,s=this;for(f=[],r=void 0,u=0,o=i.length;u<o;u++)e=i[u],f.push(this.getPendingFile(n,e).then(function(n){if(n&&!r)return r=n}));return this.q.all(f).then(function(){return r?r:t})},u.prototype.getPendingFile=function(n,t){var s,r,u,e,o,f=this;if(o=t.parentNode,r=t.event,e=t.parentKey,u=t.targetFileUri,t.includingContext&&(u=this.url.resolve(t.includingContext,t.targetFileUri)),n.parent&&this.isInIncludeTagsStack(u,n))throw new i.FileError("while composing scalar out of !include",null,"detected circular !include of "+r.value,r.start_mark);try{return t.type==="fragment"?this.settings.reader.readFileAsync(u).then(function(t){return f.compose(t,u,{validate:!1,transform:!1,compose:!0},n)}).then(function(n){return f.appendNewNodeToParent(o,e,n)})["catch"](function(n){return f.addContextToError(n,r)}):this.settings.reader.readFileAsync(u).then(function(n){var t;return t=new f.nodes.ScalarNode("tag:yaml.org,2002:str",n,r.start_mark,r.end_mark,r.style),f.appendNewNodeToParent(o,e,t)})["catch"](function(n){return f.addContextToError(n,r)})}catch(h){return s=h,this.addContextToError(s,r)}},u.prototype.addContextToError=function(n,t){if(n.constructor.name==="FileError"){n.problem_mark||(n.problem_mark=t.start_mark);throw n;}else throw new i.FileError("while reading file",null,"error: "+n,t.start_mark);},u.prototype.isInIncludeTagsStack=function(n,t){while(t=t.parent)if(t.src===n)return!0;return!1},u.prototype.appendNewNodeToParent=function(n,t,i){return n?(r.isSequence(n)?n.value[t]=i:n.value.push([t,i]),null):i},u}();t={validate:!0,transform:!0,compose:!0,reader:new i.FileReader(null)};this.loadFile=function(n,r){var u;return r==null&&(r=t),u=new i.RamlParser(r),u.loadFile(n,r)};this.composeFile=function(n,r,u){var f;return r==null&&(r=t),u==null&&(u=n),f=new i.RamlParser(r),f.composeFile(n,r,u)};this.compose=function(n,r,u,f){var e;return u==null&&(u=t),f==null&&(f=r),e=new i.RamlParser(u),e.compose(n,r,u,f)};this.load=function(n,r,u){var f;return u==null&&(u=t),f=new i.RamlParser(u),f.load(n,r,u,null)}}).call(this)},{"./errors":3,"./loader":6,"./nodes":7,"./util":20,fs:22,q:51,url:46,xmlhttprequest:53}],11:[function(n,t,i){(function(){var r,u,t,f,e={}.hasOwnProperty,o=function(n,t){function r(){this.constructor=n}for(var i in t)e.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},s=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};t=n("./errors");r=t.Mark;u=t.MarkedYAMLError;this.ReaderError=function(n){function t(){return f=t.__super__.constructor.apply(this,arguments)}return o(t,n),t}(u);this.Reader=function(){function n(n,t){this.string=n;this.src=t;this.line=0;this.column=0;this.index=0;this.string+="\x00"}var t;return t=/[^\x09\x0A\x0D\x20-\x7E\x85\xA0-\uD7FF\uE000-\uFFFD]/,n.prototype.peek=function(n){return n==null&&(n=0),this.string[this.index+n]},n.prototype.prefix=function(n){return n==null&&(n=1),this.string.slice(this.index,this.index+n)},n.prototype.forward=function(n){var t,i;for(n==null&&(n=1),i=[];n;)t=this.string[this.index],this.index++,s.call("\n₂\u2029",t)>=0||t==="\r"&&this.string[this.index]!=="\n"?(this.line++,this.column=0):(this.check_printable(t),this.column++),i.push(n--);return i},n.prototype.create_mark=function(n,t){return n==null&&(n=this.line),t==null&&(t=this.column),new r(this.src,n,t,this.string,this.index)},n.prototype.get_mark=function(){return this.create_mark()},n.prototype.check_printable=function(n){if(t.exec(n))throw new i.ReaderError("while reading file",null,"non printable characters are not allowed column: "+this.get_mark().column,this.get_mark());},n}()}).call(this)},{"./errors":3}],12:[function(n){(function(){var r,t,i,u,f,s={}.hasOwnProperty,e=function(n,t){function r(){this.constructor=n}for(var i in t)s.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},o=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};t=n("./nodes");i=n("./util");r=n("./errors").YAMLError;this.ResolverError=function(n){function t(){return u=t.__super__.constructor.apply(this,arguments)}return e(t,n),t}(r);this.BaseResolver=function(){function n(){this.resolver_exact_paths=[];this.resolver_prefix_paths=[]}var r,u,f;return u="tag:yaml.org,2002:str",f="tag:yaml.org,2002:seq",r="tag:yaml.org,2002:map",n.prototype.yaml_implicit_resolvers={},n.prototype.yaml_path_resolvers={},n.add_implicit_resolver=function(n,t,r){var u,e,f,s,o;for(r==null&&(r=[null]),this.prototype.hasOwnProperty("yaml_implicit_resolvers")||(this.prototype.yaml_implicit_resolvers=i.extend({},this.prototype.yaml_implicit_resolvers)),o=[],f=0,s=r.length;f<s;f++)u=r[f],o.push(((e=this.prototype.yaml_implicit_resolvers)[u]!=null?(e=this.prototype.yaml_implicit_resolvers)[u]:e[u]=[]).push([n,t]));return o},n.prototype.descend_resolver=function(n,t){var h,f,r,u,e,o,s,y,p,c,l,a,v;if(!i.is_empty(this.yaml_path_resolvers)){if(f={},e=[],n)for(h=this.resolver_prefix_paths.length,c=this.resolver_prefix_paths.slice(-1)[0],o=0,y=c.length;o<y;o++)l=c[o],u=l[0],r=l[1],this.check_resolver_prefix(h,u,r,n,t)&&(u.length>h?e.push([u,r]):f[r]=this.yaml_path_resolvers[u][r]);else for(a=this.yaml_path_resolvers,s=0,p=a.length;s<p;s++)v=a[s],u=v[0],r=v[1],u?e.push([u,r]):f[r]=this.yaml_path_resolvers[u][r];return this.resolver_exact_paths.push(f),this.resolver_prefix_paths.push(e)}},n.prototype.ascend_resolver=function(){if(!i.is_empty(this.yaml_path_resolvers))return this.resolver_exact_paths.pop(),this.resolver_prefix_paths.pop()},n.prototype.check_resolver_prefix=function(n,i,r,u,f){var e,o,s;if(s=i[n-1],o=s[0],e=s[1],typeof o=="string"){if(u.tag!==o)return}else if(o!==null&&!(u instanceof o))return;if((e!==!0||f===null)&&(e!==!1&&e!==null||f!==null)){if(typeof e=="string"){if(!(f instanceof t.ScalarNode)&&e===f.value)return}else if(typeof e=="number"&&e!==f)return;return!0}},n.prototype.resolve=function(n,i,e){var l,s,v,y,h,p,c,w,b,k,d,a;if(n===t.ScalarNode&&e[0]){for(h=i===""?(b=this.yaml_implicit_resolvers[""])!=null?b:[]:(k=this.yaml_implicit_resolvers[i[0]])!=null?k:[],h=h.concat((d=this.yaml_implicit_resolvers[null])!=null?d:[]),c=0,w=h.length;c<w;c++)if(a=h[c],p=a[0],y=a[1],i.match(y))return p;e=e[1]}l=!0;for(v in this.yaml_path_resolvers)({})[v]==null&&(l=!1);if(!l){if(s=this.resolver_exact_paths.slice(-1)[0],o.call(s,n)>=0)return s[n];if(o.call(s,null)>=0)return s[null]}return n===t.ScalarNode?u:n===t.SequenceNode?f:n===t.MappingNode?r:void 0},n}();this.Resolver=function(n){function t(){return f=t.__super__.constructor.apply(this,arguments)}return e(t,n),t}(this.BaseResolver);this.Resolver.add_implicit_resolver("tag:yaml.org,2002:bool",/^(?:true|True|TRUE|false|False|FALSE)$/,"tTfF");this.Resolver.add_implicit_resolver("tag:yaml.org,2002:float",/^(?:[-+]?(?:[0-9][0-9_]*)\.[0-9_]*(?:[eE][-+][0-9]+)?|\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*|[-+]?\.(?:inf|Inf|INF)|\.(?:nan|NaN|NAN))$/,"-+0123456789.");this.Resolver.add_implicit_resolver("tag:yaml.org,2002:int",/^(?:[-+]?0b[01_]+|[-+]?0[0-7_]+|[-+]?(?:0|[1-9][0-9_]*)|[-+]?0x[0-9a-fA-F_]+|[-+]?0o[0-7_]+|[-+]?[1-9][0-9_]*(?::[0-5]?[0-9])+)$/,"-+0123456789");this.Resolver.add_implicit_resolver("tag:yaml.org,2002:merge",/^(?:<<)$/,"<");this.Resolver.add_implicit_resolver("tag:yaml.org,2002:null",/^(?:~|null|Null|NULL|)$/,["~","n","N",""]);this.Resolver.add_implicit_resolver("tag:yaml.org,2002:timestamp",/^(?:[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]|[0-9][0-9][0-9][0-9]-[0-9][0-9]?-[0-9][0-9]?(?:[Tt]|[\x20\t]+)[0-9][0-9]?:[0-9][0-9]:[0-9][0-9](?:\.[0-9]*)?(?:[\x20\t]*(?:Z|[-+][0-9][0-9]?(?::[0-9][0-9])?))?)$/,"0123456789");this.Resolver.add_implicit_resolver("tag:yaml.org,2002:value",/^(?:=)$/,"=");this.Resolver.add_implicit_resolver("tag:yaml.org,2002:yaml",/^(?:!|&|\*)$/,"!&*")}).call(this)},{"./errors":3,"./nodes":7,"./util":20}],13:[function(n,t,i){(function(){var u,e,r,f,o={}.hasOwnProperty,s=function(n,t){function r(){this.constructor=n}for(var i in t)o.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},t=function(n,t){return function(){return n.apply(t,arguments)}};u=n("./errors").MarkedYAMLError;e=n("./nodes");r=n("./util");this.ResourceTypeError=function(n){function t(){return f=t.__super__.constructor.apply(this,arguments)}return s(t,n),t}(u);this.ResourceTypes=function(){function n(){this.apply_parameters_to_type=t(this.apply_parameters_to_type,this);this.apply_type=t(this.apply_type,this);this.apply_types=t(this.apply_types,this);this.get_type=t(this.get_type,this);this.has_types=t(this.has_types,this);this.load_types=t(this.load_types,this);this.declaredTypes={}}return n.prototype.load_types=function(n){var t,i=this;return this.load_default_media_type(n),this.has_property(n,"resourceTypes")&&(t=this.property_value(n,"resourceTypes"),t&&typeof t=="object")?t.forEach(function(n){if(n&&typeof n=="object"&&typeof n.value=="object")return n.value.forEach(function(n){return i.declaredTypes[n[0].value]=n})}):void 0},n.prototype.has_types=function(n){return Object.keys(this.declaredTypes).length===0&&this.has_property(n,"resourceTypes")&&this.load_types(n),Object.keys(this.declaredTypes).length>0},n.prototype.get_type=function(n){return this.declaredTypes[n]},n.prototype.apply_types=function(n,t){var u,i=this;if(t==null&&(t=""),r.isMapping(n))return this.has_types(n)?(u=this.child_resources(n),u.forEach(function(n){var r;return i.apply_default_media_type_to_resource(n[1]),i.has_property(n[1],"type")&&(r=i.get_property(n[1],"type"),i.apply_type(t+n[0].value,n,r)),i.apply_types(n[1],t+n[0].value)})):(u=this.child_resources(n),u.forEach(function(n){return i.apply_default_media_type_to_resource(n[1])}))},n.prototype.apply_type=function(n,t,i){var r;return r=this.resolve_inheritance_chain(n,i),r.combine(t[1]),t[1]=r,t[1].remove_question_mark_properties()},n.prototype.resolve_inheritance_chain=function(n,t){var s,r,u,l,f,a,h,e,v,c,y,o;for(u=this.key_or_value(t),r=this.apply_parameters_to_type(n,u,t),o=[u],f={},f[u]=r,this.apply_default_media_type_to_resource(r),this.apply_traits_to_resource(n,r,!1);this.has_property(r,"type");){if(t=this.get_property(r,"type"),e=this.key_or_value(t),e in f){v=o.concat(e).join(" -> ");l=this.get_type(u)[0];throw new i.ResourceTypeError("while applying resourceTypes",null,'circular reference of "'+e+'" has been detected: '+v,l.start_mark);}h=this.apply_parameters_to_type(n,e,t);this.apply_default_media_type_to_resource(h);this.apply_traits_to_resource(n,h,!1);u=e;r=h;f[u]=r;o.push(u)}for(y=o.pop(),s=f[y].cloneForResourceType(),c=s;a=o.pop();)s=f[a].cloneForResourceType(),c.combine(s);return c},n.prototype.apply_parameters_to_type=function(n,t,r){var f,u;if(!(t!=null?t.trim():void 0))throw new i.ResourceTypeError("while applying resource type",null,"resource type name must be provided",r.start_mark);if(!(u=this.get_type(t)))throw new i.ResourceTypeError("while applying resource type",null,"there is no resource type named "+t,r.start_mark);return u=u[1].clone(),f=this._get_parameters_from_type_key(n,r),this.apply_parameters(u,f,r),u},n.prototype._get_parameters_from_type_key=function(n,t){var u,e,o,s,f,c,h;if(s={},o={resourcePath:n.replace(/\/\/*/g,"/"),resourcePathName:this.extractResourcePathName(n)},r.isMapping(t)&&(e=this.value_or_undefined(t),r.isMapping(e[0][1])))for(h=e[0][1].value,f=0,c=h.length;f<c;f++){if(u=h[f],u[0].value in o)throw new i.ResourceTypeError("while applying parameters",null,"invalid parameter name: "+u[0].value+" is reserved",u[0].start_mark);s[u[0].value]=u[1].value}return r.extend(s,o)},n}()}).call(this)},{"./errors":3,"./nodes":7,"./util":20}],14:[function(n,t,i){(function(){var f,e,r,o,s,u={}.hasOwnProperty,h=function(n,t){function r(){this.constructor=n}for(var i in t)u.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},c=[].slice,t=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};f=n("./errors").MarkedYAMLError;r=n("./tokens");o=n("./util");this.ScannerError=function(n){function t(){return s=t.__super__.constructor.apply(this,arguments)}return h(t,n),t}(f);e=function(){function n(n,t,i,r,u,f){this.token_number=n;this.required=t;this.index=i;this.line=r;this.column=u;this.mark=f}return n}();this.Scanner=function(){function n(n){this.settings=n;this.done=!1;this.ramlHeaderFound=!this.settings.validate;this.flow_level=0;this.tokens=[];this.fetch_stream_start();this.tokens_taken=0;this.indent=-1;this.indents=[];this.allow_simple_key=!0;this.possible_simple_keys={}}var f,h,s,l,a,v,y;return f="\r\n\u2028\u2029",s="\t ",h="0123456789",a={"0":"\x00",a:"\x07",b:"\b",t:"\t","\t":"\t",n:"\n",v:"\x0b",f:"\f",r:"\r",e:"\x1b"," ":" ",'"':'"',"\\":"\\",N:"",_:" ",L:"\u2028",P:"\u2029"},l={x:2,u:4,U:8},v="#%RAML 0.8",y=/^#%RAML .+$/,n.prototype.check_token=function(){for(var i,t,r,n=1<=arguments.length?c.call(arguments,0):[];this.need_more_tokens();)this.fetch_more_tokens();if(this.tokens.length!==0){if(n.length===0)return!0;for(t=0,r=n.length;t<r;t++)if(i=n[t],this.tokens[0]instanceof i)return!0}return!1},n.prototype.peek_token=function(){while(this.need_more_tokens())this.fetch_more_tokens();if(this.tokens.length!==0)return this.tokens[0]},n.prototype.get_token=function(){while(this.need_more_tokens())this.fetch_more_tokens();if(this.tokens.length!==0)return this.tokens_taken++,this.tokens.shift()},n.prototype.need_more_tokens=function(){return this.done?!1:this.tokens.length===0?!0:(this.stale_possible_simple_keys(),this.next_possible_simple_key()===this.tokens_taken)?!0:!1},n.prototype.fetch_more_tokens=function(){var n;if(this.scan_to_next_token(),this.stale_possible_simple_keys(),this.unwind_indent(this.column),n=this.peek(),n==="\x00")return this.fetch_stream_end();if(n==="%"&&this.check_directive())return this.fetch_directive();if(n==="-"&&this.check_document_start())return this.fetch_document_start();if(n==="."&&this.check_document_end())return this.fetch_document_end();if(n==="[")return this.fetch_flow_sequence_start();if(n==="{")return this.fetch_flow_mapping_start();if(n==="]")return this.fetch_flow_sequence_end();if(n==="}")return this.fetch_flow_mapping_end();if(n===",")return this.fetch_flow_entry();if(n==="-"&&this.check_block_entry())return this.fetch_block_entry();if(n==="?"&&this.check_key())return this.fetch_key();if(n===":"&&this.check_value())return this.fetch_value();if(n==="*")return this.fetch_alias();if(n==="&")return this.fetch_anchor();if(n==="!")return this.fetch_tag();if(n==="|"&&this.flow_level===0)return this.fetch_literal();if(n===">"&&this.flow_level===0)return this.fetch_folded();if(n==="'")return this.fetch_single();if(n==='"')return this.fetch_double();if(this.check_plain())return this.fetch_plain();throw new i.ScannerError("while scanning for the next token",null,"found character "+n+" that cannot start any token",this.get_mark());},n.prototype.next_possible_simple_key=function(){var i,r,n,t;n=null;t=this.possible_simple_keys;for(r in t)u.call(t,r)&&(i=t[r],(n===null||i.token_number<n)&&(n=i.token_number));return n},n.prototype.stale_possible_simple_keys=function(){var n,t,r,f;r=this.possible_simple_keys;f=[];for(t in r)if(u.call(r,t)&&(n=r[t],n.line!==this.line||!(this.index-n.index<=1024)))if(n.required)throw new i.ScannerError("while scanning a simple key",n.mark,"could not find expected ':'",this.get_mark());else f.push(delete this.possible_simple_keys[t]);return f},n.prototype.save_possible_simple_key=function(){var n,t;if(n=this.flow_level===0&&this.indent===this.column,n&&!this.allow_simple_key)throw new Error("logic failure");if(this.allow_simple_key)return this.remove_possible_simple_key(),t=this.tokens_taken+this.tokens.length,this.possible_simple_keys[this.flow_level]=new e(t,n,this.index,this.line,this.column,this.get_mark())},n.prototype.remove_possible_simple_key=function(){var n;if(n=this.possible_simple_keys[this.flow_level])if(n.required)throw new i.ScannerError("while scanning a simple key",n.mark,"could not find expected ':'",this.get_mark());else return delete this.possible_simple_keys[this.flow_level]},n.prototype.unwind_indent=function(n){var t,i;if(this.flow_level===0){for(i=[];this.indent>n;)t=this.get_mark(),this.indent=this.indents.pop(),i.push(this.tokens.push(new r.BlockEndToken(t,t)));return i}},n.prototype.add_indent=function(n){return(n>this.indent)?(this.indents.push(this.indent),this.indent=n,!0):!1},n.prototype.fetch_stream_start=function(){var n;return n=this.get_mark(),this.tokens.push(new r.StreamStartToken(n,n,this.encoding))},n.prototype.fetch_stream_end=function(){var n;return this.unwind_indent(-1),this.remove_possible_simple_key(),this.allow_possible_simple_key=!1,this.possible_simple_keys={},n=this.get_mark(),this.tokens.push(new r.StreamEndToken(n,n)),this.done=!0},n.prototype.fetch_directive=function(){return this.unwind_indent(-1),this.remove_possible_simple_key(),this.allow_simple_key=!1,this.tokens.push(this.scan_directive())},n.prototype.fetch_document_start=function(){return this.fetch_document_indicator(r.DocumentStartToken)},n.prototype.fetch_document_end=function(){return this.fetch_document_indicator(r.DocumentEndToken)},n.prototype.fetch_document_indicator=function(n){var t;return this.unwind_indent(-1),this.remove_possible_simple_key(),this.allow_simple_key=!1,t=this.get_mark(),this.forward(3),this.tokens.push(new n(t,this.get_mark()))},n.prototype.fetch_flow_sequence_start=function(){return this.fetch_flow_collection_start(r.FlowSequenceStartToken)},n.prototype.fetch_flow_mapping_start=function(){return this.fetch_flow_collection_start(r.FlowMappingStartToken)},n.prototype.fetch_flow_collection_start=function(n){var t;return this.save_possible_simple_key(),this.flow_level++,this.allow_simple_key=!0,t=this.get_mark(),this.forward(),this.tokens.push(new n(t,this.get_mark()))},n.prototype.fetch_flow_sequence_end=function(){return this.fetch_flow_collection_end(r.FlowSequenceEndToken)},n.prototype.fetch_flow_mapping_end=function(){return this.fetch_flow_collection_end(r.FlowMappingEndToken)},n.prototype.fetch_flow_collection_end=function(n){var t;return this.remove_possible_simple_key(),this.flow_level--,this.allow_simple_key=!1,t=this.get_mark(),this.forward(),this.tokens.push(new n(t,this.get_mark()))},n.prototype.fetch_flow_entry=function(){var n;return this.allow_simple_key=!0,this.remove_possible_simple_key(),n=this.get_mark(),this.forward(),this.tokens.push(new r.FlowEntryToken(n,this.get_mark()))},n.prototype.fetch_block_entry=function(){var n,t;if(this.flow_level===0){if(!this.allow_simple_key)throw new i.ScannerError(null,null,"sequence entries are not allowed here",this.get_mark());this.add_indent(this.column)&&(n=this.get_mark(),this.tokens.push(new r.BlockSequenceStartToken(n,n)))}return this.allow_simple_key=!0,this.remove_possible_simple_key(),t=this.get_mark(),this.forward(),this.tokens.push(new r.BlockEntryToken(t,this.get_mark()))},n.prototype.fetch_key=function(){var n,t;if(this.flow_level===0){if(!this.allow_simple_key)throw new i.ScannerError(null,null,"mapping keys are not allowed here",this.get_mark());this.add_indent(this.column)&&(n=this.get_mark(),this.tokens.push(new r.BlockMappingStartToken(n,n)))}return this.allow_simple_key=!this.flow_level,this.remove_possible_simple_key(),t=this.get_mark(),this.forward(),this.tokens.push(new r.KeyToken(t,this.get_mark()))},n.prototype.fetch_value=function(){var n,t,u;if(n=this.possible_simple_keys[this.flow_level])delete this.possible_simple_keys[this.flow_level],this.tokens.splice(n.token_number-this.tokens_taken,0,new r.KeyToken(n.mark,n.mark)),this.flow_level===0&&this.add_indent(n.column)&&this.tokens.splice(n.token_number-this.tokens_taken,0,new r.BlockMappingStartToken(n.mark,n.mark)),this.allow_simple_key=!1;else{if(this.flow_level===0){if(!this.allow_simple_key)throw new i.ScannerError(null,null,"mapping values are not allowed here",this.get_mark());this.add_indent(this.column)&&(t=this.get_mark(),this.tokens.push(new r.BlockMappingStartToken(t,t)))}this.allow_simple_key=!this.flow_level;this.remove_possible_simple_key()}return u=this.get_mark(),this.forward(),this.tokens.push(new r.ValueToken(u,this.get_mark()))},n.prototype.fetch_alias=function(){return this.save_possible_simple_key(),this.allow_simple_key=!1,this.tokens.push(this.scan_anchor(r.AliasToken))},n.prototype.fetch_anchor=function(){return this.save_possible_simple_key(),this.allow_simple_key=!1,this.tokens.push(this.scan_anchor(r.AnchorToken))},n.prototype.fetch_tag=function(){return this.save_possible_simple_key(),this.allow_simple_key=!1,this.tokens.push(this.scan_tag())},n.prototype.fetch_literal=function(){return this.fetch_block_scalar("|")},n.prototype.fetch_folded=function(){return this.fetch_block_scalar(">")},n.prototype.fetch_block_scalar=function(n){return this.allow_simple_key=!0,this.remove_possible_simple_key(),this.tokens.push(this.scan_block_scalar(n))},n.prototype.fetch_single=function(){return this.fetch_flow_scalar("'")},n.prototype.fetch_double=function(){return this.fetch_flow_scalar('"')},n.prototype.fetch_flow_scalar=function(n){return this.save_possible_simple_key(),this.allow_simple_key=!1,this.tokens.push(this.scan_flow_scalar(n))},n.prototype.fetch_plain=function(){return this.save_possible_simple_key(),this.allow_simple_key=!1,this.tokens.push(this.scan_plain())},n.prototype.check_directive=function(){return this.column===0?!0:!1},n.prototype.check_document_start=function(){var n;return this.column===0&&this.prefix(3)==="---"&&(n=this.peek(3),t.call(f+s+"\x00",n)>=0)?!0:!1},n.prototype.check_document_end=function(){var n;return this.column===0&&this.prefix(3)==="..."&&(n=this.peek(3),t.call(f+s+"\x00",n)>=0)?!0:!1},n.prototype.check_block_entry=function(){var n;return n=this.peek(1),t.call(f+s+"\x00",n)>=0},n.prototype.check_key=function(){var n;return this.flow_level!==0?!0:(n=this.peek(1),t.call(f+s+"\x00",n)>=0)},n.prototype.check_value=function(){var n;return this.flow_level!==0?!0:(n=this.peek(1),t.call(f+s+"\x00",n)>=0)},n.prototype.check_plain=function(){var n,i;return n=this.peek(),t.call(f+s+"\x00-?:,[]{}#&*!|>'\"%@`",n)<0||(i=this.peek(1),t.call(f+s+"\x00",i)<0)&&(n==="-"||this.flow_level===0&&t.call("?:",n)>=0)},n.prototype.scan_to_next_token=function(){var r,e,u,o,n;for(this.index===0&&this.peek()==="﻿"&&this.forward(),e=!1,n=[];!e;){while(this.peek()===" ")this.forward();if(r="",this.peek()==="#")while(o=this.peek(),t.call(f+"\x00",o)<0)this.ramlHeaderFound||(r+=this.peek()),this.forward();if(!this.ramlHeaderFound)if(u=r.trim(),u&&y.test(u))if(u===v)this.ramlHeaderFound=!0;else throw new i.ScannerError("version validation",null,"Unsupported RAML version: '"+r+"'",this.create_mark(0,0));else throw new i.ScannerError("version validation",null,"The first line must be: '"+v+"'",this.create_mark(0,0));this.scan_line_break()?this.flow_level===0?n.push(this.allow_simple_key=!0):n.push(void 0):n.push(e=!0)}return n},n.prototype.scan_directive=function(){var i,u,n,e,o;if(n=this.get_mark(),this.forward(),u=this.scan_directive_name(n),e=null,u==="YAML")e=this.scan_yaml_directive_value(n),i=this.get_mark();else if(u==="TAG")e=this.scan_tag_directive_value(n),i=this.get_mark();else for(i=this.get_mark();o=this.peek(),t.call(f+"\x00",o)<0;)this.forward();return this.scan_directive_ignored_line(n),new r.DirectiveToken(u,e,n,i)},n.prototype.scan_directive_name=function(n){for(var e,u=0,r=this.peek(u);"0"<=r&&r<="9"||"A"<=r&&r<="Z"||"a"<=r&&r<="z"||t.call("-_",r)>=0;)u++,r=this.peek(u);if(u===0)throw new i.ScannerError("while scanning a directive",n,"expected alphanumeric or numeric character but found "+r,this.get_mark());if(e=this.prefix(u),this.forward(u),r=this.peek(),t.call(f+"\x00 ",r)<0)throw new i.ScannerError("while scanning a directive",n,"expected alphanumeric or numeric character but found "+r,this.get_mark());return e},n.prototype.scan_yaml_directive_value=function(n){for(var r,u,e;this.peek()===" ";)this.forward();if(r=this.scan_yaml_directive_number(n),this.peek()!==".")throw new i.ScannerError("while scanning a directive",n,"expected a digit or '.' but found "+this.peek(),this.get_mark());if(this.forward(),u=this.scan_yaml_directive_number(n),e=this.peek(),t.call(f+"\x00 ",e)<0)throw new i.ScannerError("while scanning a directive",n,"expected a digit or ' ' but found "+this.peek(),this.get_mark());return[r,u]},n.prototype.scan_yaml_directive_number=function(n){var r,t,u,f;if(r=this.peek(),!("0"<=r&&r<="9"))throw new i.ScannerError("while scanning a directive",n,"expected a digit but found "+r,this.get_mark());for(t=0;"0"<=(f=this.peek(t))&&f<="9";)t++;return u=parseInt(this.prefix(t)),this.forward(t),u},n.prototype.scan_tag_directive_value=function(n){for(var t,i;this.peek()===" ";)this.forward();for(t=this.scan_tag_directive_handle(n);this.peek()===" ";)this.forward();return i=this.scan_tag_directive_prefix(n),[t,i]},n.prototype.scan_tag_directive_handle=function(n){var t,r;if(r=this.scan_tag_handle("directive",n),t=this.peek(),t!==" ")throw new i.ScannerError("while scanning a directive",n,"expected ' ' but found "+t,this.get_mark());return r},n.prototype.scan_tag_directive_prefix=function(n){var r,u;if(u=this.scan_tag_uri("directive",n),r=this.peek(),t.call(f+"\x00 ",r)<0)throw new i.ScannerError("while scanning a directive",n,"expected ' ' but found "+r,this.get_mark());return u},n.prototype.scan_directive_ignored_line=function(n){for(var r,u;this.peek()===" ";)this.forward();if(this.peek()==="#")while(u=this.peek(),t.call(f+"\x00",u)<0)this.forward();if(r=this.peek(),t.call(f+"\x00",r)<0)throw new i.ScannerError("while scanning a directive",n,"expected a comment or a line break but found "+r,this.get_mark());return this.scan_line_break()},n.prototype.scan_anchor=function(n){var r,h,u,o,e,c;for(e=this.get_mark(),h=this.peek(),o=h==="*"?"alias":"anchor",this.forward(),u=0,r=this.peek(u);"0"<=r&&r<="9"||"A"<=r&&r<="Z"||"a"<=r&&r<="z"||t.call("-_",r)>=0;)u++,r=this.peek(u);if(u===0)throw new i.ScannerError("while scanning an "+o,e,"expected alphabetic or numeric character but found '"+r+"'",this.get_mark());if(c=this.prefix(u),this.forward(u),r=this.peek(),t.call(f+s+"\x00?:,]}%@`",r)<0)throw new i.ScannerError("while scanning an "+o,e,"expected alphabetic or numeric character but found '"+r+"'",this.get_mark());return new n(c,e,this.get_mark())},n.prototype.scan_tag=function(){var n,e,h,u,o,c;if(u=this.get_mark(),n=this.peek(1),n==="<"){if(e=null,this.forward(2),o=this.scan_tag_uri("tag",u),this.peek()!==">")throw new i.ScannerError("while parsing a tag",u,"expected '>' but found "+this.peek(),this.get_mark());this.forward()}else if(t.call(f+s+"\x00",n)>=0)e=null,o="!",this.forward();else{for(h=1,c=!1;t.call(f+"\x00 ",n)<0;){if(n==="!"){c=!0;break}h++;n=this.peek(h)}c?e=this.scan_tag_handle("tag",u):(e="!",this.forward());o=this.scan_tag_uri("tag",u)}if(n=this.peek(),t.call(f+"\x00 ",n)<0)throw new i.ScannerError("while scanning a tag",u,"expected ' ' but found "+n,this.get_mark());return new r.TagToken([e,o],u,this.get_mark())},n.prototype.scan_block_scalar=function(n){var u,y,i,l,d,p,e,g,s,h,nt,c,a,w,v,b,tt,it,k,rt;for(d=n===">",i=[],a=this.get_mark(),this.forward(),w=this.scan_block_scalar_indicators(a),y=w[0],p=w[1],this.scan_block_scalar_ignored_line(a),c=this.indent+1,c<1&&(c=1),p==null?(v=this.scan_block_scalar_indentation(),u=v[0],nt=v[1],l=v[2],e=Math.max(c,nt)):(e=c+p-1,b=this.scan_block_scalar_breaks(e),u=b[0],l=b[1]),h="";this.column===e&&this.peek()!=="\x00";){for(i=i.concat(u),g=(tt=this.peek(),t.call(" \t",tt)<0),s=0;it=this.peek(s),t.call(f+"\x00",it)<0;)s++;if(i.push(this.prefix(s)),this.forward(s),h=this.scan_line_break(),k=this.scan_block_scalar_breaks(e),u=k[0],l=k[1],this.column===e&&this.peek()!=="\x00")d&&h==="\n"&&g&&(rt=this.peek(),t.call(" \t",rt)<0)?o.is_empty(u)&&i.push(" "):i.push(h);else break}return y!==!1&&i.push(h),y===!0&&(i=i.concat(u)),new r.ScalarToken(i.join(""),!1,a,l,n)},n.prototype.scan_block_scalar_indicators=function(n){var r,e,u;if(e=null,u=null,r=this.peek(),t.call("+-",r)>=0){if(e=r==="+",this.forward(),r=this.peek(),t.call(h,r)>=0){if(u=parseInt(r),u===0)throw new i.ScannerError("while scanning a block scalar",n,"expected indentation indicator in the range 1-9 but found 0",this.get_mark());this.forward()}}else if(t.call(h,r)>=0){if(u=parseInt(r),u===0)throw new i.ScannerError("while scanning a block scalar",n,"expected indentation indicator in the range 1-9 but found 0",this.get_mark());this.forward();r=this.peek();t.call("+-",r)>=0&&(e=r==="+",this.forward())}if(r=this.peek(),t.call(f+"\x00 ",r)<0)throw new i.ScannerError("while scanning a block scalar",n,"expected chomping or indentation indicators, but found "+r,this.get_mark());return[e,u]},n.prototype.scan_block_scalar_ignored_line=function(n){for(var r,u;this.peek()===" ";)this.forward();if(this.peek()==="#")while(u=this.peek(),t.call(f+"\x00",u)<0)this.forward();if(r=this.peek(),t.call(f+"\x00",r)<0)throw new i.ScannerError("while scanning a block scalar",n,"expected a comment or a line break but found "+r,this.get_mark());return this.scan_line_break()},n.prototype.scan_block_scalar_indentation=function(){var i,r,n,u;for(i=[],n=0,r=this.get_mark();u=this.peek(),t.call(f+" ",u)>=0;)this.peek()!==" "?(i.push(this.scan_line_break()),r=this.get_mark()):(this.forward(),this.column>n&&(n=this.column));return[i,n,r]},n.prototype.scan_block_scalar_breaks=function(n){for(var u,i=[],r=this.get_mark();this.column<n&&this.peek()===" ";)this.forward();while(u=this.peek(),t.call(f,u)>=0)for(i.push(this.scan_line_break()),r=this.get_mark();this.column<n&&this.peek()===" ";)this.forward();return[i,r]},n.prototype.scan_flow_scalar=function(n){var t,u,f,i;for(u=n==='"',t=[],i=this.get_mark(),f=this.peek(),this.forward(),t=t.concat(this.scan_flow_scalar_non_spaces(u,i));this.peek()!==f;)t=t.concat(this.scan_flow_scalar_spaces(u,i)),t=t.concat(this.scan_flow_scalar_non_spaces(u,i));return this.forward(),new r.ScalarToken(t.join(""),!1,i,this.get_mark(),n)},n.prototype.scan_flow_scalar_non_spaces=function(n,r){for(var e,y,v,u,c,p,w,o=[];;){for(u=0;p=this.peek(u),t.call(f+s+"'\"\\\x00",p)<0;)u++;if(u!==0&&(o.push(this.prefix(u)),this.forward(u)),e=this.peek(),n||e!=="'"||this.peek(1)!=="'")if(n&&e==="'"||!n&&t.call('"\\',e)>=0)o.push(e),this.forward();else if(n&&e==="\\")if(this.forward(),e=this.peek(),e in a)o.push(a[e]),this.forward();else if(e in l){for(u=l[e],this.forward(),v=c=0;0<=u?c<u:c>u;v=0<=u?++c:--c)if(w=this.peek(v),t.call(h+"ABCDEFabcdef",w)<0)throw new i.ScannerError("while scanning a double-quoted scalar",r,"expected escape sequence of "+u+" hexadecimal numbers, but found "+this.peek(v),this.get_mark());y=parseInt(this.prefix(u),16);o.push(String.fromCharCode(y));this.forward(u)}else if(t.call(f,e)>=0)this.scan_line_break(),o=o.concat(this.scan_flow_scalar_breaks(n,r));else throw new i.ScannerError("while scanning a double-quoted scalar",r,"found unknown escape character "+e,this.get_mark());else return o;else o.push("'"),this.forward(2)}},n.prototype.scan_flow_scalar_spaces=function(n,r){for(var o,h,c,l,a,u=[],e=0;a=this.peek(e),t.call(s,a)>=0;)e++;if(l=this.prefix(e),this.forward(e),h=this.peek(),h==="\x00")throw new i.ScannerError("while scanning a quoted scalar",r,"found unexpected end of stream",this.get_mark());return t.call(f,h)>=0?(c=this.scan_line_break(),o=this.scan_flow_scalar_breaks(n,r),c!=="\n"?u.push(c):o||u.push(" "),u=u.concat(o)):u.push(l),u},n.prototype.scan_flow_scalar_breaks=function(n,r){for(var e,o,h,c,u=[];;){if(e=this.prefix(3),e==="---"||e==="..."&&(o=this.peek(3),t.call(f+s+"\x00",o)>=0))throw new i.ScannerError("while scanning a quoted scalar",r,"found unexpected document separator",this.get_mark());while(h=this.peek(),t.call(s,h)>=0)this.forward();if(c=this.peek(),t.call(f,c)>=0)u.push(this.scan_line_break());else return u}},n.prototype.scan_plain=function(){var u,e,c,l,n,o,h,a,v;for(e=[],h=c=this.get_mark(),l=this.indent+1,o=[];;){if(n=0,this.peek()==="#")break;for(;;){if(u=this.peek(n),t.call(f+s+"\x00",u)>=0||this.flow_level===0&&u===":"&&(a=this.peek(n+1),t.call(f+s+"\x00",a)>=0)||this.flow_level!==0&&t.call(",:?[]{}",u)>=0)break;n++}if(this.flow_level!==0&&u===":"&&(v=this.peek(n+1),t.call(f+s+"\x00,[]{}",v)<0)){this.forward(n);throw new i.ScannerError("while scanning a plain scalar",h,"found unexpected ':'",this.get_mark(),"Please check http://pyyaml.org/wiki/YAMLColonInFlowContext");}if(n===0)break;if(this.allow_simple_key=!1,e=e.concat(o),e.push(this.prefix(n)),this.forward(n),c=this.get_mark(),o=this.scan_plain_spaces(l,h),o==null||o.length===0||this.peek()==="#"||this.flow_level===0&&this.column<l)break}return new r.ScalarToken(e.join(""),!0,h,c)},n.prototype.scan_plain_spaces=function(){for(var u,h,e,i,o,c,l,n=[],r=0;c=this.peek(r),t.call(" ",c)>=0;)r++;if(o=this.prefix(r),this.forward(r),h=this.peek(),t.call(f,h)>=0){if(e=this.scan_line_break(),this.allow_simple_key=!0,i=this.prefix(3),i==="---"||i==="..."&&this.peek(t.call(f+s+"\x00",3)>=0))return;for(u=[];l=this.peek(),t.call(f+" ",l)>=0;)if(this.peek()===" ")this.forward();else if(u.push(this.scan_line_break()),i=this.prefix(3),i==="---"||i==="..."&&this.peek(t.call(f+s+"\x00",3)>=0))return;e!=="\n"?n.push(e):u.length===0&&n.push(" ");n=n.concat(u)}else o&&n.push(o);return n},n.prototype.scan_tag_handle=function(n,r){var u,f,e;if(u=this.peek(),u!=="!")throw new i.ScannerError("while scanning a "+n,r,"expected '!' but found "+u,this.get_mark());if(f=1,u=this.peek(f),u!==" "){while("0"<=u&&u<="9"||"A"<=u&&u<="Z"||"a"<=u&&u<="z"||t.call("-_",u)>=0)f++,u=this.peek(f);if(u!=="!"){this.forward(f);throw new i.ScannerError("while scanning a "+n,r,"expected '!' but found "+u,this.get_mark());}f++}return e=this.prefix(f),this.forward(f),e},n.prototype.scan_tag_uri=function(n,r){var u,e,f;for(e=[],f=0,u=this.peek(f);"0"<=u&&u<="9"||"A"<=u&&u<="Z"||"a"<=u&&u<="z"||t.call("-;/?:@&=+$,_.!~*'()[]%",u)>=0;)u==="%"?(e.push(this.prefix(f)),this.forward(f),f=0,e.push(this.scan_uri_escapes(n,r))):f++,u=this.peek(f);if(f!==0&&(e.push(this.prefix(f)),this.forward(f),f=0),e.length===0)throw new i.ScannerError("while parsing a "+n,r,"expected URI but found "+u,this.get_mark());return e.join("")},n.prototype.scan_uri_escapes=function(n,t){for(var u,f,r=[],e=this.get_mark();this.peek()==="%";){for(this.forward(),u=f=0;f<=2;u=++f)throw new i.ScannerError("while scanning a "+n,t,"expected URI escape sequence of 2 hexadecimal numbers but found          "+this.peek(u),this.get_mark());r.push(String.fromCharCode(parseInt(this.prefix(2),16)));this.forward(2)}return r.join("")},n.prototype.scan_line_break=function(){var n;return(n=this.peek(),t.call("\r\n",n)>=0)?(this.prefix(2)==="\r\n"?this.forward(2):this.forward(),"\n"):t.call("\u2028\u2029",n)>=0?(this.forward(),n):""},n}()}).call(this)},{"./errors":3,"./tokens":17,"./util":20}],15:[function(n){(function(){var i,u,r,f={}.hasOwnProperty,e=function(n,t){function r(){this.constructor=n}for(var i in t)f.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},t=function(n,t){return function(){return n.apply(t,arguments)}};i=n("./errors").MarkedYAMLError;u=n("./nodes");this.SchemaError=function(n){function t(){return r=t.__super__.constructor.apply(this,arguments)}return e(t,n),t}(i);this.Schemas=function(){function n(){this.get_schemas_used=t(this.get_schemas_used,this);this.apply_schemas=t(this.apply_schemas,this);this.get_all_schemas=t(this.get_all_schemas,this);this.has_schemas=t(this.has_schemas,this);this.load_schemas=t(this.load_schemas,this);this.declaredSchemas={}}return n.prototype.load_schemas=function(n){var t,i=this;if(this.has_property(n,"schemas")&&(t=this.property_value(n,"schemas"),t&&typeof t=="object"))return t.forEach(function(n){if(n&&typeof n=="object"&&typeof n.value=="object")return n.value.forEach(function(n){return i.declaredSchemas[n[0].value]=n})})},n.prototype.has_schemas=function(n){return this.declaredSchemas.length===0&&this.has_property(n,"schemas")&&this.load_schemas(n),Object.keys(this.declaredSchemas).length>0},n.prototype.get_all_schemas=function(){return this.declaredSchemas},n.prototype.apply_schemas=function(n){var t,i,r=this;return t=this.child_resources(n),i=this.get_schemas_used(t),i.forEach(function(n){if(n[1].value in r.declaredSchemas)return n[1].value=r.declaredSchemas[n[1].value][1].value})},n.prototype.get_schemas_used=function(n){var t,i=this;return t=[],n.forEach(function(n){var r;return r=i.get_properties(n[1],"schema"),t=t.concat(r)}),t},n}()}).call(this)},{"./errors":3,"./nodes":7}],16:[function(n){(function(){var i,u,r,f={}.hasOwnProperty,e=function(n,t){function r(){this.constructor=n}for(var i in t)f.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},t=function(n,t){return function(){return n.apply(t,arguments)}};i=n("./errors").MarkedYAMLError;u=n("./nodes");this.SecuritySchemeError=function(n){function t(){return r=t.__super__.constructor.apply(this,arguments)}return e(t,n),t}(i);this.SecuritySchemes=function(){function n(){this.get_security_scheme=t(this.get_security_scheme,this);this.get_all_schemes=t(this.get_all_schemes,this);this.load_security_schemes=t(this.load_security_schemes,this);this.declaredSchemes={}}return n.prototype.load_security_schemes=function(n){var t,i=this;if(this.has_property(n,"securitySchemes")&&(t=this.property_value(n,"securitySchemes"),t&&typeof t=="object"))return t.forEach(function(n){if(n.tag==="tag:yaml.org,2002:map")return n.value.forEach(function(n){return i.declaredSchemes[n[0].value]=n[1].value})})},n.prototype.get_all_schemes=function(){return this.declaredSchemes},n.prototype.get_security_scheme=function(n){return this.declaredSchemes[n]},n}()}).call(this)},{"./errors":3,"./nodes":7}],17:[function(){(function(){var t,i,r,u,f,e,o,s,h,c,l,a,v,y,p={}.hasOwnProperty,n=function(n,t){function r(){this.constructor=n}for(var i in t)p.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};this.Token=function(){function n(n,t){this.start_mark=n;this.end_mark=t}return n}();this.DirectiveToken=function(t){function i(n,t,i,r){this.name=n;this.value=t;this.start_mark=i;this.end_mark=r}return n(i,t),i.prototype.id="<directive>",i}(this.Token);this.DocumentStartToken=function(i){function r(){return t=r.__super__.constructor.apply(this,arguments)}return n(r,i),r.prototype.id="<document start>",r}(this.Token);this.DocumentEndToken=function(t){function r(){return i=r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.id="<document end>",r}(this.Token);this.StreamStartToken=function(t){function i(n,t,i){this.start_mark=n;this.end_mark=t;this.encoding=i}return n(i,t),i.prototype.id="<stream start>",i}(this.Token);this.StreamEndToken=function(t){function i(){return o=i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.id="<stream end>",i}(this.Token);this.BlockSequenceStartToken=function(t){function i(){return s=i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.id="<block sequence start>",i}(this.Token);this.BlockMappingStartToken=function(t){function i(){return h=i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.id="<block mapping end>",i}(this.Token);this.BlockEndToken=function(t){function i(){return c=i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.id="<block end>",i}(this.Token);this.FlowSequenceStartToken=function(t){function i(){return l=i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.id="[",i}(this.Token);this.FlowMappingStartToken=function(t){function i(){return a=i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.id="{",i}(this.Token);this.FlowSequenceEndToken=function(t){function i(){return v=i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.id="]",i}(this.Token);this.FlowMappingEndToken=function(t){function i(){return y=i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.id="}",i}(this.Token);this.KeyToken=function(t){function i(){return r=i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.id="?",i}(this.Token);this.ValueToken=function(t){function i(){return u=i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.id=":",i}(this.Token);this.BlockEntryToken=function(t){function i(){return f=i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.id="-",i}(this.Token);this.FlowEntryToken=function(t){function i(){return e=i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.id=",",i}(this.Token);this.AliasToken=function(t){function i(n,t,i){this.value=n;this.start_mark=t;this.end_mark=i}return n(i,t),i.prototype.id="<alias>",i}(this.Token);this.AnchorToken=function(t){function i(n,t,i){this.value=n;this.start_mark=t;this.end_mark=i}return n(i,t),i.prototype.id="<anchor>",i}(this.Token);this.TagToken=function(t){function i(n,t,i){this.value=n;this.start_mark=t;this.end_mark=i}return n(i,t),i.prototype.id="<tag>",i}(this.Token);this.ScalarToken=function(t){function i(n,t,i,r,u){this.value=n;this.plain=t;this.start_mark=i;this.end_mark=r;this.style=u}return n(i,t),i.prototype.id="<scalar>",i}(this.Token)}).call(this)},{}],18:[function(n,t,i){(function(){var r,u,s,t,f,e,h={}.hasOwnProperty,o=function(n,t){function r(){this.constructor=n}for(var i in t)h.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};r=n("./errors").MarkedYAMLError;s=n("./nodes");u=n("inflection");t=n("./util");this.TraitError=function(n){function t(){return f=t.__super__.constructor.apply(this,arguments)}return o(t,n),t}(r);this.ParameterError=function(n){function t(){return e=t.__super__.constructor.apply(this,arguments)}return o(t,n),t}(r);this.Traits=function(){function n(){this.declaredTraits={}}return n.prototype.load_traits=function(n){var t,i=this;if(this.has_property(n,"traits")&&(t=this.property_value(n,"traits"),t&&typeof t=="object"))return t.forEach(function(n){if(n&&typeof n=="object"&&typeof n.value=="object")return n.value.forEach(function(n){return i.declaredTraits[n[0].value]=n})})},n.prototype.has_traits=function(n){return this.declaredTraits.length===0&&this.has_property(n,"traits")&&this.load_traits(n),Object.keys(this.declaredTraits).length>0},n.prototype.get_trait=function(n){return n in this.declaredTraits?this.declaredTraits[n][1]:null},n.prototype.apply_traits=function(n,i,r){var u,f=this;if(i==null&&(i=""),r==null&&(r=!0),t.isMapping(n))return this.has_traits(n)?(u=this.child_resources(n),u.forEach(function(n){return f.apply_traits_to_resource(i+n[0].value,n[1],r)})):void 0},n.prototype.apply_traits_to_resource=function(n,i,r){var e,u,f=this;if(t.isMapping(i))return e=this.child_methods(i),this.has_property(i,"is")&&(u=this.property_value(i,"is"),u.forEach(function(t){return e.forEach(function(i){return f.apply_trait(n,i,t)})})),e.forEach(function(t){if(f.has_property(t[1],"is"))return u=f.property_value(t[1],"is"),u.forEach(function(i){return f.apply_trait(n,t,i)})}),r&&i.remove_question_mark_properties(),this.apply_traits(i,n,r)},n.prototype.apply_trait=function(n,t,r){var e,u,o,f;if(f=this.key_or_value(r),!(f!=null?f.trim():void 0))throw new i.TraitError("while applying trait",null,"trait name must be provided",r.start_mark);if(!(o=this.get_trait(f)))throw new i.TraitError("while applying trait",null,"there is no trait named "+f,r.start_mark);return e=this.get_parameters_from_is_key(n,t[0].value,r),u=o.cloneForTrait(),this.apply_parameters(u,e,r),this.apply_default_media_type_to_method(u),u.combine(t[1]),t[1]=u},n.prototype.apply_parameters=function(n,t,r){var u,e,f;this._apply_parameters(n,t,r,e={resourcePath:!0,resourcePathName:!0,methodName:!0});f=[];for(u in t)if(e[u])f.push(void 0);else throw new i.ParameterError("while applying parameters",null,"unused parameter: "+u,r.start_mark);return f},n.prototype._apply_parameters=function(n,r,f,e){var s,o=this;if(n){if(t.isString(n)){(s=n.value.match(/<<\s*([^\|\s>]+)\s*(\|.*)?\s*>>/g))&&s.forEach(function(t){var h,o,s,l,c;if(o=t!=null?(l=t.trim())!=null?l.replace(/[<>]+/g,"").trim():void 0:void 0,c=o.split(/\s*\|\s*/),o=c[0],h=c[1],!(o in r))throw new i.ParameterError("while applying parameters",null,"value was not provided for parameter: "+o,f.start_mark);if(s=r[o],e[o]=!0,h)if(h.match(/!\s*singularize/))s=u.singularize(s);else if(h.match(/!\s*pluralize/))s=u.pluralize(s);else throw new i.ParameterError("while validating parameter",null,"unknown function applied to parameter",n.start_mark);return n.value=n.value.replace(t,s)});return}if(t.isSequence(n)){n.value.forEach(function(n){return o._apply_parameters(n,r,f,e)});return}t.isMapping(n)&&n.value.forEach(function(n){return o._apply_parameters(n[0],r,f,e),o._apply_parameters(n[1],r,f,e)})}},n.prototype.get_parameters_from_is_key=function(n,r,u){var f,o,s,h,e,l,c;if(h={},s={methodName:r,resourcePath:n.replace(/\/\/*/g,"/"),resourcePathName:this.extractResourcePathName(n)},t.isMapping(u)&&(o=this.value_or_undefined(u),t.isMapping(o[0][1])))for(c=o[0][1].value,e=0,l=c.length;e<l;e++){if(f=c[e],f[0].value in s)throw new i.TraitError("while applying parameters",null,"invalid parameter name: "+f[0].value+" is reserved",f[0].start_mark);h[f[0].value]=f[1].value}return t.extend(h,s)},n.prototype.extractResourcePathName=function(n){for(var t,i=n.split(/\//);t=i.pop();)if(!(typeof t!="undefined"&&t!==null?t.match(/[{}]/):void 0))return t;return""},n}()}).call(this)},{"./errors":3,"./nodes":7,"./util":20,inflection:49}],19:[function(n){(function(){var r,u,t,i=function(n,t){return function(){return n.apply(t,arguments)}};u=n("uritemplate");r=n("./nodes");t=n("./util");this.Transformations=function(){function n(n){this.settings=n;this.isContentTypeString=i(this.isContentTypeString,this);this.add_key_value_to_node=i(this.add_key_value_to_node,this);this.apply_default_media_type_to_resource=i(this.apply_default_media_type_to_resource,this);this.get_media_type=i(this.get_media_type,this);this.load_default_media_type=i(this.load_default_media_type,this);this.applyAstTransformations=i(this.applyAstTransformations,this);this.applyTransformations=i(this.applyTransformations,this);this.declaredSchemas={}}return n.prototype.applyTransformations=function(n){var t;if(this.settings.transform)return this.applyTransformationsToRoot(n),t=n.resources,this.applyTransformationsToResources(n,t)},n.prototype.applyAstTransformations=function(n){if(this.settings.transform)return this.transform_document(n)},n.prototype.load_default_media_type=function(n){if(t.isMapping(n||(n!=null?n.value:void 0)))return this.mediaType=this.property_value(n,"mediaType")},n.prototype.get_media_type=function(){return this.mediaType},n.prototype.applyTransformationsToRoot=function(n){var t,i;if(n.baseUri)return i=u.parse(n.baseUri),t=i.expressions.filter(function(n){return"templateText"in n}).map(function(n){return n.templateText}),t.length&&(n.baseUriParameters||(n.baseUriParameters={})),t.forEach(function(t){if(!(t in n.baseUriParameters)&&(n.baseUriParameters[t]={type:"string",required:!0,displayName:t},t==="version"))return n.baseUriParameters[t]["enum"]=[n.version]})},n.prototype.applyTransformationsToResources=function(n,t){var f,c,l,e,r,i,y,o,s,h,p,w,b,k,a,v;if(t!=null?t.length:void 0){for(v=[],o=0,p=t.length;o<p;o++){if(i=t[o],c=i.securedBy?i.securedBy:n!=null?n.securedBy:void 0,(k=i.methods)!=null?k.length:void 0)for(a=i.methods,s=0,w=a.length;s<w;s++)l=a[s],"securedBy"in l||c&&(l.securedBy=c);for(r=i.relativeUri.split("/");!r[0]&&r.length;)r.shift();for(i.relativeUriPathSegments=r,y=u.parse(i.relativeUri),f=y.expressions.filter(function(n){return"templateText"in n}).map(function(n){return n.templateText}),f.length&&(i.uriParameters||(i.uriParameters={})),h=0,b=f.length;h<b;h++)e=f[h],e in i.uriParameters||(i.uriParameters[e]={type:"string",required:!0,displayName:e});v.push(this.applyTransformationsToResources(n,i.resources))}return v}},n.prototype.apply_default_media_type_to_resource=function(n){var o,s,i,r,h,c,u,f,e;if(this.mediaType&&t.isMapping(n)){for(u=this.child_resources(n),i=0,h=u.length;i<h;i++)o=u[i],this.apply_default_media_type_to_resource(o[1]);for(f=this.child_methods(n),e=[],r=0,c=f.length;r<c;r++)s=f[r],e.push(this.apply_default_media_type_to_method(s[1]));return e}},n.prototype.apply_default_media_type_to_method=function(n){var i,r=this;if(this.mediaType)return t.isMapping(n)?(this.has_property(n,"body")&&this.apply_default_media_type_to_body(this.get_property(n,"body")),this.has_property(n,"responses")?(i=this.get_property(n,"responses"),!(i&&i.value))?void 0:i.value.forEach(function(n){if(r.has_property(n[1],"body"))return r.apply_default_media_type_to_body(r.get_property(n[1],"body"))}):void 0):void 0},n.prototype.apply_default_media_type_to_body=function(n){var u,i,f,e,o,s;if(t.isMapping(n))return(n!=null?(e=n.value)!=null?(o=e[0])!=null?(s=o[0])!=null?s.value:void 0:void 0:void 0:void 0)&&(u=n.value[0][0].value,!u.match(/\//))?(i=new r.MappingNode("tag:yaml.org,2002:map",[],n.start_mark,n.end_mark),f=new r.ScalarNode("tag:yaml.org,2002:str",this.mediaType,n.start_mark,n.end_mark),i.value.push([f,n.clone()]),n.value=i.value):void 0},n.prototype.noop=function(){},n.prototype.transform_types=function(n){var t,i=this;return t=n.value,t.forEach(function(n){return n.value.forEach(function(n){return i.transform_resource(n,!0)})})},n.prototype.transform_traits=function(n){var t,i=this;return t=n.value,t.forEach(function(n){return n.value.forEach(function(n){return i.transform_method(n[1],!0)})})},n.prototype.transform_named_params=function(n,i,u){var f=this;if(u==null&&(u=!0),!t.isNull(n[1]))return n[1].value.forEach(function(n){return t.isNull(n[1])&&(n[1]=new r.MappingNode("tag:yaml.org,2002:map",[],n[1].start_mark,n[1].end_mark)),f.transform_common_parameter_properties(n[0].value,n[1],i,u)})},n.prototype.transform_common_parameter_properties=function(n,i,r,u){var f=this;return t.isSequence(i)?i.value.forEach(function(t){return f.transform_named_parameter(n,t,r,u)}):this.transform_named_parameter(n,i,r,u)},n.prototype.transform_named_parameter=function(n,t,i,r){var f,e,o,u=this;return f=!1,e=!1,o=!1,t.value.forEach(function(n){var t;if(!i||!u.isParameterKey(n)){t=u.canonicalizePropertyName(n[0].value,i);switch(t){case"pattern":return u.noop();case"default":return u.noop();case"enum":return u.noop();case"description":return u.noop();case"example":return u.noop();case"minLength":return u.noop();case"maxLength":return u.noop();case"minimum":return u.noop();case"maximum":return u.noop();case"repeat":return u.noop();case"displayName":return f=!0;case"type":return o=!0;case"required":return e=!0;default:return u.noop()}}}),f||this.add_key_value_to_node(t,"displayName","tag:yaml.org,2002:str",this.canonicalizePropertyName(n,i)),e||r&&this.add_key_value_to_node(t,"required","tag:yaml.org,2002:bool","true"),o?void 0:this.add_key_value_to_node(t,"type","tag:yaml.org,2002:str","string")},n.prototype.add_key_value_to_node=function(n,t,i,u){var f,e;return f=new r.ScalarNode("tag:yaml.org,2002:str",t,n.start_mark,n.end_mark),e=new r.ScalarNode(i,u,n.start_mark,n.end_mark),n.value.push([f,e])},n.prototype.transform_document=function(n){var t=this;if(n!=null?n.value:void 0)return n.value.forEach(function(n){var i;switch(n[0].value){case"title":return t.noop();case"securitySchemes":return t.noop();case"schemas":return t.noop();case"version":return t.noop();case"documentation":return t.noop();case"mediaType":return t.noop();case"securedBy":return t.noop();case"baseUri":return t.noop();case"traits":return t.transform_traits(n[1]);case"baseUriParameters":return t.transform_named_params(n,!1);case"resourceTypes":return t.transform_types(n[1]);case"resources":return(i=n[1])!=null?i.value.forEach(function(n){return t.transform_resource(n)}):void 0;default:return t.noop()}})},n.prototype.transform_resource=function(n,t){var i=this;return t==null&&(t=!1),n.value?n.value.forEach(function(n){var r,u,f,e;if(u=i.transform_common_properties(n,t),!u){if(i.isHttpMethod(n[0].value,t))return i.transform_method(n[1],t);r=i.canonicalizePropertyName(n[0].value,t);switch(r){case"type":return i.noop();case"usage":return i.noop();case"securedBy":return i.noop();case"uriParameters":return i.transform_named_params(n,t);case"baseUriParameters":return i.transform_named_params(n,t);case"resources":return(f=n[1])!=null?f.value.forEach(function(n){return i.transform_resource(n)}):void 0;case"methods":return(e=n[1])!=null?e.value.forEach(function(n){return i.transform_method(n,t)}):void 0;default:return i.noop()}}}):void 0},n.prototype.transform_method=function(n,i){var r=this;if(!t.isNull(n))return n.value.forEach(function(n){var t;if(!r.transform_common_properties(n,i)){t=r.canonicalizePropertyName(n[0].value,i);switch(t){case"securedBy":return r.noop();case"usage":return r.noop();case"headers":return r.transform_named_params(n,i,!1);case"queryParameters":return r.transform_named_params(n,i,!1);case"baseUriParameters":return r.transform_named_params(n,i);case"body":return r.transform_body(n,i);case"responses":return r.transform_responses(n,i);default:return r.noop()}}})},n.prototype.transform_responses=function(n,i){var r=this;if(!t.isNull(n[1]))return n[1].value.forEach(function(n){return r.transform_response(n,i)})},n.prototype.transform_response=function(n,i){var r=this;if(t.isMapping(n[1]))return n[1].value.forEach(function(n){var t=r.canonicalizePropertyName(n[0].value,i);switch(t){case"description":return r.noop();case"body":return r.transform_body(n,i);case"headers":return r.transform_named_params(n,i,!1);default:return r.noop()}})},n.prototype.isContentTypeString=function(n){if(n!=null)return n.match(/^[^\/]+\/[^\/]+$/)},n.prototype.transform_body=function(n,i){var u,r=this;if(!t.isNull(n[1]))return(u=n[1].value)!=null?u.forEach(function(n){var t;if(r.isParameterKey(n))return r.noop();if(r.isContentTypeString(n[0].value))return r.transform_body(n,i);t=r.canonicalizePropertyName(n[0].value,i);switch(t){case"example":return r.noop();case"schema":return r.noop();case"formParameters":return r.transform_named_params(n,i,!1);default:return r.noop()}}):void 0},n.prototype.transform_common_properties=function(n,t){var i;if(this.isParameterKey(n))return!0;i=this.canonicalizePropertyName(n[0].value,t);switch(i){case"displayName":return!0;case"description":return!0;case"is":return!0;default:this.noop()}return!1},n}()}).call(this)},{"./nodes":7,"./util":20,uritemplate:52}],20:[function(){(function(){var n=[].slice,t={}.hasOwnProperty;this.extend=function(){var i,r,u,f,e,t,o;for(i=arguments[0],f=2<=arguments.length?n.call(arguments,1):[],t=0,o=f.length;t<o;t++){u=f[t];for(r in u)e=u[r],i[r]=e}return i};this.is_empty=function(n){var i;if(Array.isArray(n)||typeof n=="string")return n.length===0;for(i in n)if(t.call(n,i))return!1;return!0};this.isNoop=function(n){return n};this.isMapping=function(n){return(n!=null?n.tag:void 0)==="tag:yaml.org,2002:map"};this.isNull=function(n){return(n!=null?n.tag:void 0)==="tag:yaml.org,2002:null"};this.isSequence=function(n){return(n!=null?n.tag:void 0)==="tag:yaml.org,2002:seq"};this.isString=function(n){return(n!=null?n.tag:void 0)==="tag:yaml.org,2002:str"};this.isInteger=function(n){return(n!=null?n.tag:void 0)==="tag:yaml.org,2002:int"};this.isNullableMapping=function(n){return this.isMapping(n)||this.isNull(n)};this.isNullableString=function(n){return this.isString(n)||this.isNull(n)};this.isNullableSequence=function(n){return this.isSequence(n)||this.isNull(n)};this.isNumber=function(n){return(n!=null?n.tag:void 0)==="tag:yaml.org,2002:int"||(n!=null?n.tag:void 0)==="tag:yaml.org,2002:float"};this.isScalar=function(n){return(n!=null?n.tag:void 0)==="tag:yaml.org,2002:null"||(n!=null?n.tag:void 0)==="tag:yaml.org,2002:bool"||(n!=null?n.tag:void 0)==="tag:yaml.org,2002:int"||(n!=null?n.tag:void 0)==="tag:yaml.org,2002:float"||(n!=null?n.tag:void 0)==="tag:yaml.org,2002:binary"||(n!=null?n.tag:void 0)==="tag:yaml.org,2002:timestamp"||(n!=null?n.tag:void 0)==="tag:yaml.org,2002:str"};this.isCollection=function(n){return(n!=null?n.tag:void 0)==="tag:yaml.org,2002:omap"||(n!=null?n.tag:void 0)==="tag:yaml.org,2002:pairs"||(n!=null?n.tag:void 0)==="tag:yaml.org,2002:set"||(n!=null?n.tag:void 0)==="tag:yaml.org,2002:seq"||(n!=null?n.tag:void 0)==="tag:yaml.org,2002:map"}}).call(this)},{}],21:[function(n,t,i){(function(){var o,s,f,u,e,h,t,c,v={}.hasOwnProperty,l=function(n,t){function r(){this.constructor=n}for(var i in t)v.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},a=function(n,t){return function(){return n.apply(t,arguments)}},r=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};h=n("url");e=n("uritemplate");o=n("./errors").MarkedYAMLError;f=n("./nodes");u=n("./traits");t=n("./util");s=n("json-lint");this.ValidationError=function(n){function t(){return c=t.__super__.constructor.apply(this,arguments)}return l(t,n),t}(o);this.ValidationErrors=function(n){function t(n){this.validation_errors=n}return l(t,n),t.prototype.get_validation_errors=function(){return this.validation_errors},t}(o);this.Validator=function(){function n(){this.get_properties=a(this.get_properties,this);this.get_list_values=a(this.get_list_values,this);this.validations=[this.validate_root,this.validate_root_properties,this.validate_base_uri_parameters,this.valid_absolute_uris]}return n.prototype.validate_document=function(n){var r,t,u,i;for(i=this.validations,t=0,u=i.length;t<u;t++)r=i[t],r.call(this,n);return!0},n.prototype.validate_security_schemes=function(n){var r,u,f,s,e,o;if(!t.isSequence(n))throw new i.ValidationError("while validating securitySchemes",null,"invalid security schemes property, it must be an array",n.start_mark);for(e=n.value,o=[],f=0,s=e.length;f<s;f++){if(u=e[f],!t.isMapping(u))throw new i.ValidationError("while validating securitySchemes",null,"invalid security scheme property, it must be a map",u.start_mark);o.push(function(){var n,o,f,e;for(f=u.value,e=[],n=0,o=f.length;n<o;n++){if(r=f[n],!t.isMapping(r[1]))throw new i.ValidationError("while validating securitySchemes",null,"invalid security scheme property, it must be a map",r[0].start_mark);e.push(this.validate_security_scheme(r[1]))}return e}.call(this))}return o},n.prototype.trackRepeatedProperties=function(n,t,r,u,f){if(u==null&&(u="RAML"),f==null&&(f="a property with the same name already exists"),t in n)throw new i.ValidationError("while validating "+u,null,""+f+": '"+t+"'",r.start_mark);return n[t]=r},n.prototype.validate_security_scheme=function(n){var r,s,u,f,e,h,o;for(f=null,u=null,s={},o=n.value,e=0,h=o.length;e<h;e++){r=o[e];this.trackRepeatedProperties(s,r[0].value,r[0],"while validating security scheme","property already used in security scheme");switch(r[0].value){case"description":if(!t.isScalar(r[1]))throw new i.ValidationError("while validating security scheme",null,"schemes description must be a string",r[1].start_mark);break;case"type":if(f=r[1].value,!(t.isString(r[1])&&f.match(/^(OAuth 1.0|OAuth 2.0|Basic Authentication|Digest Authentication|x-.+)$/)))throw new i.ValidationError("while validating security scheme",null,'schemes type must be any of: "OAuth 1.0", "OAuth 2.0", "Basic Authentication", "Digest Authentication", "x-{.+}"',r[1].start_mark);break;case"describedBy":this.validate_method(r,!0,"security scheme");break;case"settings":if(u=r,!t.isNullableMapping(r[1]))throw new i.ValidationError("while validating security scheme",null,"schemes settings must be a map",r[1].start_mark);break;default:throw new i.ValidationError("while validating security scheme",null,"property: '"+r[0].value+"' is invalid in a security scheme",r[0].start_mark);}}if(f){if(f==="OAuth 2.0"){if(!u)throw new i.ValidationError("while validating security scheme",null,"for OAuth 2.0 settings must be a map",n.start_mark);return this.validate_oauth2_settings(u)}if(f==="OAuth 1.0"){if(!u)throw new i.ValidationError("while validating security scheme",null,"for OAuth 1.0 settings must be a map",n.start_mark);return this.validate_oauth1_settings(u)}}else throw new i.ValidationError("while validating security scheme",null,'schemes type must be any of: "OAuth 1.0", "OAuth 2.0", "Basic Authentication", "Digest Authentication", "x-{.+}"',n.start_mark);},n.prototype.validate_oauth2_settings=function(n){var r,e,o,u,f,l,a,s,h,c;for(o={},s=n[1].value,u=0,l=s.length;u<l;u++){r=s[u];this.trackRepeatedProperties(o,r[0].value,r[0],"while validating security scheme","setting with the same name already exists");switch(r[0].value){case"authorizationUri":if(!t.isString(r[1]))throw new i.ValidationError("while validating security scheme",null,"authorizationUri must be a URL",r[0].start_mark);break;case"accessTokenUri":if(!t.isString(r[1]))throw new i.ValidationError("while validating security scheme",null,"accessTokenUri must be a URL",r[0].start_mark);}}for(h=["accessTokenUri","authorizationUri"],c=[],f=0,a=h.length;f<a;f++)if(e=h[f],e in o)c.push(void 0);else throw new i.ValidationError("while validating security scheme",null,"OAuth 2.0 settings must have "+e+" property",n[0].start_mark);return c},n.prototype.validate_oauth1_settings=function(n){var r,e,o,u,f,l,a,s,h,c;for(o={},s=n[1].value,u=0,l=s.length;u<l;u++){r=s[u];this.trackRepeatedProperties(o,r[0].value,r[0],"while validating security scheme","setting with the same name already exists");switch(r[0].value){case"requestTokenUri":if(!t.isString(r[1]))throw new i.ValidationError("while validating security scheme",null,"requestTokenUri must be a URL",r[0].start_mark);break;case"authorizationUri":if(!t.isString(r[1]))throw new i.ValidationError("while validating security scheme",null,"authorizationUri must be a URL",r[0].start_mark);break;case"tokenCredentialsUri":if(!t.isString(r[1]))throw new i.ValidationError("while validating security scheme",null,"tokenCredentialsUri must be a URL",r[0].start_mark);}}for(h=["requestTokenUri","authorizationUri","tokenCredentialsUri"],c=[],f=0,a=h.length;f<a;f++)if(e=h[f],e in o)c.push(void 0);else throw new i.ValidationError("while validating security scheme",null,"OAuth 1.0 settings must have "+e+" property",n[0].start_mark);return c},n.prototype.validate_root_schemas=function(n){var r,u,f,e;if(!t.isSequence(n))throw new i.ValidationError("while validating schemas",null,"schemas property must be an array",n.start_mark);u=this.get_all_schemas();e=[];for(f in u){if(r=u[f],!(r[1].tag&&t.isString(r[1])))throw new i.ValidationError("while validating schemas",null,"schema "+f+" must be a string",r[0].start_mark);e.push(this.validateSchema(r[1]))}return e},n.prototype.validate_root=function(n){if(!(n||t.isNull(n)))throw new i.ValidationError("while validating root",null,"empty document",n!=null?n.start_mark:void 0);if(!t.isMapping(n))throw new i.ValidationError("while validating root",null,"document must be a map",n.start_mark);},n.prototype.validate_base_uri_parameters=function(){if(this.baseUriParameters){if(!this.baseUri)throw new i.ValidationError("while validating uri parameters",null,"uri parameters defined when there is no baseUri",this.baseUriParameters.start_mark);if(!t.isNullableMapping(this.baseUriParameters))throw new i.ValidationError("while validating uri parameters",null,"base uri parameters must be a map",this.baseUriParameters.start_mark);return this.validate_uri_parameters(this.baseUri,this.baseUriParameters,!1,!1,["version"])}},n.prototype.validate_uri_parameters=function(n,u,f,o,s){var a,p,c,w,h,b,l,k,d,v,y;s==null&&(s=[]);try{w=e.parse(n)}catch(g){a=g;throw new i.ValidationError("while validating uri parameters",null,a!=null?(d=a.options)!=null?d.message:void 0:void 0,u.start_mark);}if(p=w.expressions.filter(function(n){return"templateText"in n}).map(function(n){return n.templateText}),b={},typeof u.value=="object"){for(v=u.value,y=[],l=0,k=v.length;l<k;l++){if(h=v[l],c=this.canonicalizePropertyName(h[0].value,f),this.trackRepeatedProperties(b,c,u,"while validating URI parameters","URI parameter with the same name already exists"),r.call(s,c)>=0)throw new i.ValidationError("while validating baseUri",null,h[0].value+" parameter not allowed here",h[0].start_mark);if(!(t.isNullableMapping(h[1],f)||t.isNullableSequence(h[1],f)))throw new i.ValidationError("while validating baseUri",null,"URI parameter must be a map",h[0].start_mark);if(t.isNull(h[1])||this.valid_common_parameter_properties(h[1],f),o||this.isParameterKey(h)||r.call(p,c)>=0)y.push(void 0);else throw new i.ValidationError("while validating baseUri",null,h[0].value+" uri parameter unused",h[0].start_mark);}return y}},n.prototype.validate_types=function(n){var r,u,e,f,s,o;if(e=n.value,!t.isSequence(n))throw new i.ValidationError("while validating resource types",null,"invalid resourceTypes definition, it must be an array",n.start_mark);for(o=[],f=0,s=e.length;f<s;f++){if(u=e[f],!t.isMapping(u))throw new i.ValidationError("while validating resource types",null,"invalid resourceType definition, it must be a map",u.start_mark);o.push(function(){var n,o,f,e;for(f=u.value,e=[],n=0,o=f.length;n<o;n++){if(r=f[n],this.isParameterKey(r))throw new i.ValidationError("while validating resource types",null,"parameter key cannot be used as a resource type name",r[0].start_mark);if(!t.isMapping(r[1]))throw new i.ValidationError("while validating resource types",null,"invalid resourceType definition, it must be a map",r[1].start_mark);e.push(this.validate_resource(r,!0,"resource type"))}return e}.call(this))}return o},n.prototype.validate_traits=function(n){var r,e,f,s,o;if(u=n.value,!Array.isArray(u))throw new i.ValidationError("while validating traits",null,"invalid traits definition, it must be an array",n.start_mark);for(o=[],f=0,s=u.length;f<s;f++){if(e=u[f],!Array.isArray(e.value))throw new i.ValidationError("while validating traits",null,"invalid traits definition, it must be an array",n.start_mark);o.push(function(){var n,o,u,f;for(u=e.value,f=[],n=0,o=u.length;n<o;n++){if(r=u[n],this.isParameterKey(r))throw new i.ValidationError("while validating traits",null,"parameter key cannot be used as a trait name",r[0].start_mark);if(!t.isMapping(r[1]))throw new i.ValidationError("while validating traits",null,"invalid trait definition, it must be a map",r[1].start_mark);f.push(this.valid_traits_properties(r))}return f}.call(this))}return o},n.prototype.valid_traits_properties=function(n){var r;if(n[1].value&&t.isMapping(n[1])){if(r=n[1].value.filter(function(n){return n[0].value==="is"||n[0].value==="type"}),r.length>0)throw new i.ValidationError("while validating trait properties",null,"property: '"+r[0][0].value+"' is invalid in a trait",r[0][0].start_mark);return this.validate_method(n,!0,"trait")}},n.prototype.canonicalizePropertyName=function(n,t){return t&&n.slice(-1)==="?"?n.slice(0,-1):n},n.prototype.valid_common_parameter_properties=function(n,r){var o,u,s,f,e;if(n.value){if(t.isSequence(n)){if(n.value.length===0)throw new i.ValidationError("while validating parameter properties",null,"named parameter needs at least one type",n.start_mark);if(!(n.value.length>1))throw new i.ValidationError("while validating parameter properties",null,"single type for variably typed parameter",n.start_mark);for(f=n.value,e=[],u=0,s=f.length;u<s;u++)o=f[u],e.push(this.validate_named_parameter(o,r));return e}return this.validate_named_parameter(n,r)}},n.prototype.validate_named_parameter=function(n,u){var y,g,f,nt,s,h,c,e,o,p,tt,l,a,v,it,rt,ut,w,b,k,d;for(s={},h="string",w=n.value,l=0,it=w.length;l<it;l++)if(f=w[l],c=f[0].value,e=f[1].value,this.trackRepeatedProperties(s,this.canonicalizePropertyName(f[0].value,!0),f[0],"while validating parameter properties","parameter property already used"),y=["true","false"],!u||!this.isParameterKey(f)&&!this.isParameterValue(f)){g=this.canonicalizePropertyName(c,u);p=!0;switch(c){case"displayName":if(!t.isScalar(f[1]))throw new i.ValidationError("while validating parameter properties",null,"the value of displayName must be a scalar",f[1].start_mark);break;case"pattern":if(!t.isScalar(f[1]))throw new i.ValidationError("while validating parameter properties",null,"the value of pattern must be a scalar",f[1].start_mark);break;case"default":if(!t.isScalar(f[1]))throw new i.ValidationError("while validating parameter properties",null,"the value of default must be a scalar",f[1].start_mark);break;case"description":if(!t.isScalar(f[1]))throw new i.ValidationError("while validating parameter properties",null,"the value of description must be a scalar",f[1].start_mark);break;case"example":if(!t.isScalar(f[1]))throw new i.ValidationError("while validating parameter properties",null,"the value of example must be a scalar",f[1].start_mark);break;case"minLength":if(isNaN(e))throw new i.ValidationError("while validating parameter properties",null,"the value of minLength must be a number",f[1].start_mark);break;case"maxLength":if(isNaN(e))throw new i.ValidationError("while validating parameter properties",null,"the value of maxLength must be a number",f[1].start_mark);break;case"minimum":if(isNaN(e))throw new i.ValidationError("while validating parameter properties",null,"the value of minimum must be a number",f[1].start_mark);break;case"maximum":if(isNaN(e))throw new i.ValidationError("while validating parameter properties",null,"the value of maximum must be a number",f[1].start_mark);break;case"type":if(h=e,tt=["string","number","integer","date","boolean","file"],r.call(tt,e)<0)throw new i.ValidationError("while validating parameter properties",null,"type can be either of: string, number, integer, file, date or boolean ",f[1].start_mark);break;case"required":if(r.call(y,e)<0)throw new i.ValidationError("while validating parameter properties",null,"required can be any either true or false",f[1].start_mark);break;case"repeat":if(r.call(y,e)<0)throw new i.ValidationError("while validating parameter properties",null,"repeat can be any either true or false",f[1].start_mark);break;default:p=!1}switch(g){case"enum":if(!t.isNullableSequence(f[1]))throw new i.ValidationError("while validating parameter properties",null,"the value of enum must be an array",f[1].start_mark);if(!f[1].value.length)throw new i.ValidationError("while validating parameter properties",null,"enum is empty",f[1].start_mark);if(nt=this.get_list_values(f[1].value),this.hasDuplicates(nt))throw new i.ValidationError("while validating parameter properties",null,"enum contains duplicated values",f[1].start_mark);break;default:if(!p)throw new i.ValidationError("while validating parameter properties",null,"unknown property "+c,f[0].start_mark);}}if(h!=="string")for(b=["enum","pattern","minLength","maxLength"],a=0,rt=b.length;a<rt;a++)if(o=b[a],o in s)throw new i.ValidationError("while validating parameter properties",null,"property "+o+" can only be used if type is 'string'",s[o].start_mark);if(!(h==="number"||h==="integer")){for(k=["minimum","maximum"],d=[],v=0,ut=k.length;v<ut;v++)if(o=k[v],o in s)throw new i.ValidationError("while validating parameter properties",null,"property "+o+" can only be used if type is 'number' or 'integer'",s[o].start_mark);else d.push(void 0);return d}},n.prototype.get_list_values=function(n){var t=this;return n.map(function(n){return n.value})},n.prototype.validate_root_properties=function(n){var e,r,u,f,s,o;if(e=!1,u={},n!=null?n.value:void 0)for(o=n.value,f=0,s=o.length;f<s;f++){r=o[f];r[0].value.match(/^\//)?this.trackRepeatedProperties(u,this.canonicalizePropertyName(r[0].value,!0),r[0],"while validating root properties","resource already declared"):this.trackRepeatedProperties(u,r[0].value,r[0],"while validating root properties","root property already used");switch(r[0].value){case"title":if(!t.isScalar(r[1]))throw new i.ValidationError("while validating root properties",null,"title must be a string",r[0].start_mark);break;case"baseUri":if(!t.isScalar(r[1]))throw new i.ValidationError("while validating root properties",null,"baseUri must be a string",r[0].start_mark);this.baseUri=r[1].value;e=this.validate_base_uri(r[1]);break;case"securitySchemes":this.validate_security_schemes(r[1]);break;case"schemas":this.validate_root_schemas(r[1]);break;case"version":if(!t.isScalar(r[1]))throw new i.ValidationError("while validating root properties",null,"version must be a string",r[0].start_mark);t.isNull(r[1])||(r[1].tag="tag:yaml.org,2002:str");break;case"traits":this.validate_traits(r[1]);break;case"documentation":if(!t.isSequence(r[1]))throw new i.ValidationError("while validating root properties",null,"documentation must be an array",r[0].start_mark);this.validate_documentation(r[1]);break;case"mediaType":if(!t.isString(r[1]))throw new i.ValidationError("while validating root properties",null,"mediaType must be a scalar",r[0].start_mark);break;case"baseUriParameters":this.baseUriParameters=r[1];t.isNoop(r[1]);break;case"resourceTypes":this.validate_types(r[1]);break;case"securedBy":this.validate_secured_by(r);break;case"protocols":this.validate_protocols_property(r);break;default:if(r[0].value.match(/^\//))this.validate_resource(r);else throw new i.ValidationError("while validating root properties",null,"unknown property "+r[0].value,r[0].start_mark);}}if(!("title"in u))throw new i.ValidationError("while validating root properties",null,"missing title",n.start_mark);if(e&&!("version"in u))throw new i.ValidationError("while validating version",null,"missing version",n.start_mark);},n.prototype.validate_documentation=function(n){var f,t,e,r,u;if(!n.value.length)throw new i.ValidationError("while validating documentation section",null,"there must be at least one document in the documentation section",n.start_mark);for(r=n.value,u=[],t=0,e=r.length;t<e;t++)f=r[t],u.push(this.validate_doc_section(f));return u},n.prototype.validate_doc_section=function(n){var u,r,f,o,e;if(!t.isMapping(n))throw new i.ValidationError("while validating documentation section",null,"each documentation section must be a map",n.start_mark);for(u={},e=n.value,f=0,o=e.length;f<o;f++){r=e[f];this.trackRepeatedProperties(u,r[0].value,r[0],"while validating documentation section","property already used");switch(r[0].value){case"title":if(!(t.isScalar(r[1])&&!t.isNull(r[1])))throw new i.ValidationError("while validating documentation section",null,"title must be a string",r[0].start_mark);break;case"content":if(!(t.isScalar(r[1])&&!t.isNull(r[1])))throw new i.ValidationError("while validating documentation section",null,"content must be a string",r[0].start_mark);break;default:throw new i.ValidationError("while validating root properties",null,"unknown property "+r[0].value,r[0].start_mark);}}if(!("content"in u))throw new i.ValidationError("while validating documentation section",null,"a documentation entry must have content property",n.start_mark);if(!("title"in u))throw new i.ValidationError("while validating documentation section",null,"a documentation entry must have title property",n.start_mark);},n.prototype.child_resources=function(n){return n&&t.isMapping(n)?n.value.filter(function(n){return n[0].value.match(/^\//)}):[]},n.prototype.validate_resource=function(n,r,u){var y,c,l,f,s,b,a,h,p,w,v,o;if(r==null&&(r=!1),u==null&&(u="resource"),!(n[1]&&t.isNullableMapping(n[1])))throw new i.ValidationError("while validating resources",null,"resource is not a map",n[1].start_mark);if(n[0].value)try{b=e.parse(n[0].value)}catch(k){c=k;throw new i.ValidationError("while validating resource",null,"Resource name is invalid: "+(c!=null?(w=c.options)!=null?w.message:void 0:void 0),n[0].start_mark);}if(!t.isNull(n[1])&&n[1].value){for(s={},v=n[1].value,o=[],h=0,p=v.length;h<p;h++)if(f=v[h],f[0].value.match(/^\//)?this.trackRepeatedProperties(s,this.canonicalizePropertyName(f[0].value,!0),f[0],"while validating resource","resource already declared"):this.isHttpMethod(f[0].value,r)?this.trackRepeatedProperties(s,this.canonicalizePropertyName(f[0].value,!0),f[0],"while validating resource","method already declared"):this.trackRepeatedProperties(s,this.canonicalizePropertyName(f[0].value,!0),f[0],"while validating resource","property already used"),this.validate_common_properties(f,r))o.push(void 0);else if(f[0].value.match(/^\//)){if(r)throw new i.ValidationError("while validating trait properties",null,"resource type cannot define child resources",f[0].start_mark);o.push(this.validate_resource(f,r))}else if(this.isHttpMethod(f[0].value,r))o.push(this.validate_method(f,r,"method"));else{l=f[0].value;y=this.canonicalizePropertyName(l,r);a=!0;switch(y){case"uriParameters":if(!t.isNullableMapping(f[1]))throw new i.ValidationError("while validating uri parameters",null,"uri parameters must be a map",f[0].start_mark);this.validate_uri_parameters(n[0].value,f[1],r,r);break;case"baseUriParameters":if(!this.baseUri)throw new i.ValidationError("while validating uri parameters",null,"base uri parameters defined when there is no baseUri",f[0].start_mark);if(!t.isNullableMapping(f[1]))throw new i.ValidationError("while validating uri parameters",null,"base uri parameters must be a map",f[0].start_mark);this.validate_uri_parameters(this.baseUri,f[1],r);break;default:a=!1}switch(l){case"type":o.push(this.validate_type_property(f,r));break;case"usage":if(r)o.push(void 0);else throw new i.ValidationError("while validating resources",null,"property: '"+f[0].value+"' is invalid in a resource",f[0].start_mark);break;case"securedBy":o.push(this.validate_secured_by(f));break;default:if(a)o.push(void 0);else throw new i.ValidationError("while validating resources",null,"property: '"+f[0].value+("' is invalid in a "+u),f[0].start_mark);}}return o}},n.prototype.validate_secured_by=function(n){var r,s,e,u,h,o,f;if(!t.isSequence(n[1]))throw new i.ValidationError("while validating securityScheme",null,"property 'securedBy' must be an array",n[0].start_mark);if(s=this.get_list_values(n[1].value),this.hasDuplicates(s))throw new i.ValidationError("while validating securityScheme consumption",null,"securitySchemes can only be referenced once in a securedBy property",n[0].start_mark);for(o=n[1].value,f=[],u=0,h=o.length;u<h;u++){if(r=o[u],t.isSequence(r))throw new i.ValidationError("while validating securityScheme consumption",null,"securityScheme reference cannot be an array",r.start_mark);if(t.isNull(r))f.push(void 0);else if(e=this.key_or_value(r),this.get_security_scheme(e))f.push(void 0);else throw new i.ValidationError("while validating securityScheme consumption",null,"there is no securityScheme named "+e,r.start_mark);}return f},n.prototype.validate_protocols_property=function(n){var r,u,o,f,s,e;if(!t.isSequence(n[1]))throw new i.ValidationError("while validating protocols",null,"property must be an array",n[0].start_mark);for(f=n[1].value,e=[],u=0,o=f.length;u<o;u++){if(r=f[u],!t.isString(r))throw new i.ValidationError("while validating protocols",null,"value must be a string",r.start_mark);if((s=r.value)!=="HTTP"&&s!=="HTTPS")throw new i.ValidationError("while validating protocols",null,"only HTTP and HTTPS values are allowed",r.start_mark);else e.push(void 0)}return e},n.prototype.validate_type_property=function(n){var u,r,f,s,e,o;if(!(t.isMapping(n[1])||t.isString(n[1])))throw new i.ValidationError("while validating resource types",null,"property 'type' must be a string or a map",n[0].start_mark);if(t.isMapping(n[1])&&n[1].value.length>1)throw new i.ValidationError("while validating resource types",null,"a resource or resourceType can inherit from a single resourceType",n[0].start_mark);if(r=this.key_or_value(n[1]),!(r!=null?r.trim():void 0))throw new i.ValidationError("while validating resource type consumption",null,"resource type name must be provided",n[1].start_mark);if(!(this.isParameterKeyValue(r)||this.get_type(r)))throw new i.ValidationError("while validating resource type consumption",null,"there is no resource type named "+r,n[1].start_mark);if(t.isMapping(n[1])){for(e=n[1].value,o=[],f=0,s=e.length;f<s;f++)if(u=e[f],t.isNull(u[1])||t.isMapping(u[1]))o.push(void 0);else throw new i.ValidationError("while validating resource consumption",null,"resource type parameters must be in a map",u[1].start_mark);return o}},n.prototype.validate_method=function(n,r,u){var l,s,a,f,h,o,v,c,e;if(u==null&&(u="method"),!t.isNull(n[1])){if(!t.isMapping(n[1]))throw new i.ValidationError("while validating methods",null,"method must be a map",n[0].start_mark);for(a={},c=n[1].value,e=[],o=0,v=c.length;o<v;o++)if(f=c[o],this.trackRepeatedProperties(a,this.canonicalizePropertyName(f[0].value,!0),f[0],"while validating method","property already used"),!this.validate_common_properties(f,r,u)){s=f[0].value;l=this.canonicalizePropertyName(s,r);h=!0;switch(l){case"headers":this.validate_headers(f,r);break;case"queryParameters":this.validate_query_params(f,r);break;case"body":this.validate_body(f,r,null,!1);break;case"responses":this.validate_responses(f,r);break;case"baseUriParameters":if(!this.baseUri)throw new i.ValidationError("while validating uri parameters",null,"base uri parameters defined when there is no baseUri",f[0].start_mark);if(!t.isNullableMapping(f[1]))throw new i.ValidationError("while validating uri parameters",null,"base uri parameters must be a map",f[0].start_mark);this.validate_uri_parameters(this.baseUri,f[1],r);break;case"protocols":this.validate_protocols_property(f);break;default:h=!1}switch(s){case"securedBy":e.push(this.validate_secured_by(f));break;case"usage":if(r&&u==="trait")e.push(void 0);else throw new i.ValidationError("while validating resources",null,"property: 'usage' is invalid in a "+u,f[0].start_mark);break;default:if(h)e.push(void 0);else throw new i.ValidationError("while validating resources",null,"property: '"+f[0].value+"' is invalid in a "+u,f[0].start_mark);}}return e}},n.prototype.validate_responses=function(n,r){var u,s,f,h,e,o;if(!t.isNull(n[1])){if(!t.isMapping(n[1]))throw new i.ValidationError("while validating responses",null,"property: 'responses' must be a map",n[0].start_mark);for(s={},e=n[1].value,o=[],f=0,h=e.length;f<h;f++){if(u=e[f],!t.isNullableMapping(u[1]))throw new i.ValidationError("while validating responses",null,"each response must be a map",u[1].start_mark);this.trackRepeatedProperties(s,this.canonicalizePropertyName(u[0].value,!0),u[0],"while validating responses","response code already used");o.push(this.validate_response(u,r))}return o}},n.prototype.validate_query_params=function(n,r){var u,s,f,h,e,o;if(!t.isNull(n[1])){if(!t.isMapping(n[1]))throw new i.ValidationError("while validating query parameters",null,"property: 'queryParameters' must be a map",n[0].start_mark);for(s={},e=n[1].value,o=[],f=0,h=e.length;f<h;f++){if(u=e[f],!(t.isNullableMapping(u[1])||t.isNullableSequence(u[1])))throw new i.ValidationError("while validating query parameters",null,"each query parameter must be a map",u[1].start_mark);this.trackRepeatedProperties(s,this.canonicalizePropertyName(u[0].value,!0),u[0],"while validating query parameter","parameter name already used");o.push(this.valid_common_parameter_properties(u[1],r))}return o}},n.prototype.validate_form_params=function(n,r){var s,u,f,h,e,o;if(!t.isNull(n[1])){if(!t.isMapping(n[1]))throw new i.ValidationError("while validating query parameters",null,"property: 'formParameters' must be a map",n[0].start_mark);for(s={},e=n[1].value,o=[],f=0,h=e.length;f<h;f++){if(u=e[f],!(t.isNullableMapping(u[1])||t.isNullableSequence(u[1])))throw new i.ValidationError("while validating query parameters",null,"each form parameter must be a map",u[1].start_mark);this.trackRepeatedProperties(s,this.canonicalizePropertyName(u[0].value,!0),u[0],"while validating form parameter","parameter name already used");o.push(this.valid_common_parameter_properties(u[1],r))}return o}},n.prototype.validate_headers=function(n,r){var s,u,f,h,e,o;if(!t.isNull(n[1])){if(!t.isMapping(n[1]))throw new i.ValidationError("while validating headers",null,"property: 'headers' must be a map",n[0].start_mark);for(s={},e=n[1].value,o=[],f=0,h=e.length;f<h;f++){if(u=e[f],!(t.isNullableMapping(u[1])||t.isNullableSequence(u[1])))throw new i.ValidationError("while validating query parameters",null,"each header must be a map",u[1].start_mark);this.trackRepeatedProperties(s,this.canonicalizePropertyName(u[0].value,!0),u[0],"while validating headers","header name already used");o.push(this.valid_common_parameter_properties(u[1],r))}return o}},n.prototype.validate_response=function(n,r){var h,u,e,v,c,o,s,y,p,l,a,f;if(t.isSequence(n[0])){if(!n[0].value.length)throw new i.ValidationError("while validating responses",null,"there must be at least one response code",n[0].start_mark);for(l=n[0].value,o=0,y=l.length;o<y;o++)if(e=l[o],!(this.isParameterKey(e)||t.isInteger(e)||!isNaN(this.canonicalizePropertyName(e,r))))throw new i.ValidationError("while validating responses",null,"each response key must be an integer",e.start_mark);}else if(!(this.isParameterKey(n)||t.isInteger(n[0])||!isNaN(this.canonicalizePropertyName(n[0].value,r))))throw new i.ValidationError("while validating responses",null,"each response key must be an integer",n[0].start_mark);if(!t.isNullableMapping(n[1]))throw new i.ValidationError("while validating responses",null,"each response property must be a map",n[0].start_mark);if(t.isMapping(n[1])){for(v={},a=n[1].value,f=[],s=0,p=a.length;s<p;s++)if(u=a[s],h=this.canonicalizePropertyName(u[0].value,r),this.trackRepeatedProperties(v,h,u[0],"while validating responses","property already used"),c=!0,this.isParameterKey(u))f.push(void 0);else{switch(u[0].value){case"description":if(!t.isScalar(u[1]))throw new i.ValidationError("while validating responses",null,"property description must be a string",n[0].start_mark);break;default:c=!1}switch(h){case"body":f.push(this.validate_body(u,r,null,!0));break;case"headers":if(!t.isNullableMapping(u[1]))throw new i.ValidationError("while validating resources",null,"property 'headers' must be a map",u[0].start_mark);f.push(this.validate_headers(u));break;default:if(c)f.push(void 0);else throw new i.ValidationError("while validating response",null,"property: '"+u[0].value+"' is invalid in a response",u[0].start_mark);}}return f}},n.prototype.isHttpMethod=function(n,t){var i;return(t==null&&(t=!1),n)?(n=this.canonicalizePropertyName(n,t),(i=n.toLowerCase())==="options"||i==="get"||i==="head"||i==="post"||i==="put"||i==="delete"||i==="trace"||i==="connect"||i==="patch"):!1},n.prototype.isParameterValue=function(n){return this.isParameterKey(n,!1)},n.prototype.isParameterKey=function(n,r){var u;if(r==null&&(r=!0),u=r?0:1,!(r||t.isScalar(n[1])))return!1;if(this.isParameterKeyValue(n[u].value))return!0;if(n[u].value.match(/<<\s*([^\|\s>]+)\s*\|.*\s*>>/g))throw new i.ValidationError("while validating parameter",null,"unknown function applied to property name",n[0].start_mark);return!1},n.prototype.isParameterKeyValue=function(n){return n.match(/<<\s*([^\|\s>]+)\s*>>/g)||n.match(/<<\s*([^\|\s>]+)\s*(\|\s*\!\s*(singularize|pluralize))?\s*>>/g)?!0:!1},n.prototype.validate_body=function(n,u,f,e){var s,o,p,h,l,a,v,c,w,y;if(f==null&&(f=null),!t.isNull(n[1])){if(!t.isMapping(n[1]))throw new i.ValidationError("while validating body",null,"property: body specification must be a map",n[0].start_mark);for(h=["implicit","forcedImplicit"],s={},y=n[1].value,c=0,w=y.length;c<w;c++)if(o=y[c],this.trackRepeatedProperties(s,this.canonicalizePropertyName(o[0].value,!0),o[0],"while validating body","property already used"),this.isParameterKey(o)){if(!u)throw new i.ValidationError("while validating body",null,"property '"+o[0].value+"' is invalid in a resource",o[0].start_mark);}else if(o[0].value.match(/^[^\/]+\/[^\/]+$/)){if(f&&f!=="explicit")throw new i.ValidationError("while validating body",null,"not compatible with implicit default Media Type",o[0].start_mark);f="explicit";this.validate_body(o,u,"forcedImplicit",e)}else{l=o[0].value;p=this.canonicalizePropertyName(l,u);v=!0;switch(p){case"formParameters":if(f&&r.call(h,f)<0)throw new i.ValidationError("while validating body",null,"not compatible with explicit Media Type",o[0].start_mark);f==null&&(f="implicit");this.validate_form_params(o,u);break;default:v=!1}switch(l){case"example":if(f&&r.call(h,f)<0)throw new i.ValidationError("while validating body",null,"not compatible with explicit Media Type",o[0].start_mark);if(f==null&&(f="implicit"),!t.isScalar(o[1]))throw new i.ValidationError("while validating body",null,"example must be a string",o[0].start_mark);break;case"schema":if(f&&r.call(h,f)<0)throw new i.ValidationError("while validating body",null,"not compatible with explicit Media Type",o[0].start_mark);if(f==null&&(f="implicit"),!t.isScalar(o[1]))throw new i.ValidationError("while validating body",null,"schema must be a string",o[0].start_mark);this.validateSchema(o[1]);break;default:if(!v)throw new i.ValidationError("while validating body",null,"property: '"+o[0].value+"' is invalid in a body",o[0].start_mark);}}if("formParameters"in s){if(a=s.formParameters.start_mark,e)throw new i.ValidationError("while validating body",null,"formParameters cannot be used to describe response bodies",a);if("schema"in s||"example"in s)throw new i.ValidationError("while validating body",null,"formParameters cannot be used together with the example or schema properties",a);}if(f==="implicit"&&!this.get_media_type())throw new i.ValidationError("while validating body",null,"body tries to use default Media Type, but mediaType is null",n[0].start_mark);}},n.prototype.validateSchema=function(n){var u,t,r;if(this.isXmlSchema(n.value))return void 0;if(this.isJsonSchema(n.value)){if(t=s(n.value),t.error){r=this.create_mark(n.start_mark.line+t.line,0);n.end_mark.line===r.line&&n.end_mark.column===0&&r.line--;throw new i.ValidationError("while validating body",null,"schema is not valid JSON error: '"+t.error+"'",r);}try{return JSON.parse(n.value)}catch(f){u=f;throw new i.ValidationError("while validating body",null,"schema is not valid JSON error: '"+u+"'",n.start_mark);}}},n.prototype.isJsonSchema=function(n){if(n!=null)return n.match(/^\s*\{/)},n.prototype.isXmlSchema=function(n){if(n!=null)return n.match(/^\s*(<\?xml[^>]+>)?[\s\n]*<xs:schema/)},n.prototype.validate_common_properties=function(n,r,u){var o,f,s,e;if(this.isParameterKey(n)){if(!r)throw new i.ValidationError("while validating resources",null,"property '"+n[0].value+"' is invalid in a resource",n[0].start_mark);return!0}switch(n[0].value){case"displayName":if(u==="method")return!1;if(!t.isScalar(n[1]))throw new i.ValidationError("while validating resources",null,"property 'displayName' must be a string",n[0].start_mark);return!0;case"description":if(!t.isScalar(n[1]))throw new i.ValidationError("while validating resources",null,"property 'description' must be a string",n[0].start_mark);return!0;case"is":if(!t.isSequence(n[1]))throw new i.ValidationError("while validating resources",null,"property 'is' must be an array",n[0].start_mark);for(e=n[1].value,f=0,s=e.length;f<s;f++)o=e[f],this.validate_trait_use(o);return!0}return!1},n.prototype.validate_trait_use=function(n){var e,r,u,f,h,o,s;if(!(t.isScalar(n)||t.isMapping(n)))throw new i.ValidationError("while validating trait consumption",null,"trait must be a string or a map",n.start_mark);if(r=this.key_or_value(n),!(r!=null?r.trim():void 0))throw new i.ValidationError("while validating trait consumption",null,"trait name must be provided",n.start_mark);if(!(this.isParameterKeyValue(r)||this.get_trait(r)))throw new i.ValidationError("while validating trait consumption",null,"there is no trait named "+r,n.start_mark);if(!t.isScalar(n)){if(u=n.value[0][1],!(t.isNull(u)||t.isMapping(u)))throw new i.ValidationError("while validating trait consumption",null,"trait must be a map",u.start_mark);if(!t.isNull(u)){for(o=u.value,s=[],f=0,h=o.length;f<h;f++)if(e=o[f],t.isScalar(e[1]))s.push(void 0);else throw new i.ValidationError("while validating trait consumption",null,"parameter value must be a scalar",e[1].start_mark);return s}}},n.prototype.child_methods=function(n){var i=this;return(n&&t.isMapping(n))?n.value.filter(function(n){return i.isHttpMethod(n[0].value)}):[]},n.prototype.has_property=function(n,i){return n&&t.isMapping(n)?n.value.some(function(n){return n[0].value&&typeof n[0].value!="object"&&n[0].value===i}):!1},n.prototype.property_value=function(n,t){var i;return i=n.value.filter(function(n){return typeof n[0].value!="object"&&n[0].value===t}),i.length?i[0][1].value:void 0},n.prototype.get_property=function(n,i){var r,u=this;return n&&t.isMapping(n)&&(r=n.value.filter(function(n){return t.isString(n[0])&&n[0].value===i}),r.length>0&&r[0].length>0)?r[0][1]:[]},n.prototype.get_properties=function(n,i){var r,u,f,o,e;if(u=[],n&&t.isMapping(n))for(e=n.value,f=0,o=e.length;f<o;f++)r=e[f],t.isString(r[0])&&r[0].value===i?u.push(r):u=u.concat(this.get_properties(r[1],i));return u},n.prototype.valid_absolute_uris=function(n){var t,r;if(r=this.get_absolute_uris(n),t=this.hasDuplicatesUris(r))throw new i.ValidationError("while validating trait consumption",null,"two resources share same URI "+t.uri,t.mark);},n.prototype.get_absolute_uris=function(n,r){var u,o,f,s,e,h;if(f=[],!t.isNullableMapping(n))throw new i.ValidationError("while validating resources",null,"resource is not a map",n.start_mark);for(o=this.child_resources(n),e=0,h=o.length;e<h;e++)u=o[e],s=r!=null?r+u[0].value:u[0].value,f.push({uri:s,mark:u[0].start_mark}),f=f.concat(this.get_absolute_uris(u[1],s));return f},n.prototype.key_or_value=function(n){var t,i,r,u;return n instanceof f.ScalarNode?n.value:n instanceof f.MappingNode&&(t=n!=null?(i=n.value)!=null?(r=i[0])!=null?(u=r[0])!=null?u.value:void 0:void 0:void 0:void 0,t)?t:null},n.prototype.value_or_undefined=function(n){if(n instanceof f.MappingNode)return n.value},n.prototype.validate_base_uri=function(n){var t,u,o,f,s,c,l;if(t=(c=n.value)!=null?c.trim():void 0,!t)throw new i.ValidationError("while validating baseUri",null,"baseUri must have a value",n.start_mark);if(f=(h.parse(t).protocol||"http:").slice(0,-1).toUpperCase(),f!=="HTTP"&&f!=="HTTPS")throw new i.ValidationError("while validating baseUri",null,"baseUri protocol must be either HTTP or HTTPS",n.start_mark);try{s=e.parse(t)}catch(a){u=a;throw new i.ValidationError("while validating baseUri",null,u!=null?(l=u.options)!=null?l.message:void 0:void 0,n.start_mark);}return o=s.expressions.filter(function(n){return"templateText"in n}).map(function(n){return n.templateText}),r.call(o,"version")>=0?!0:void 0},n.prototype.get_validation_errors=function(){return this.validation_errors},n.prototype.is_valid=function(){return this.validation_errors.length===0},n.prototype.hasDuplicatesUris=function(n){var t,r,i,u;for(r={},i=0,u=n.length;i<u;i++){if(t=n[i],t.uri in r)return t;r[t.uri]=t}return!1},n.prototype.hasDuplicates=function(n){var i,r,t,u;for(r={},t=0,u=n.length;t<u;t++){if(i=n[t],i in r)return!0;r[i]=!0}return!1},n}()}).call(this)},{"./errors":3,"./nodes":7,"./traits":18,"./util":20,"json-lint":50,uritemplate:52,url:46}],22:[function(){},{}],23:[function(n,t){function i(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}function r(n){return typeof n=="function"}function e(n){return typeof n=="number"}function u(n){return typeof n=="object"&&n!==null}function f(n){return n===void 0}t.exports=i;i.EventEmitter=i;i.prototype._events=undefined;i.prototype._maxListeners=undefined;i.defaultMaxListeners=10;i.prototype.setMaxListeners=function(n){if(!e(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this};i.prototype.emit=function(n){var s,i,e,o,t,h;if(this._events||(this._events={}),n==="error"&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if(s=arguments[1],s instanceof Error)throw s;else throw TypeError('Uncaught, unspecified "error" event.');return!1}if(i=this._events[n],f(i))return!1;if(r(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,o=new Array(e-1),t=1;t<e;t++)o[t-1]=arguments[t];i.apply(this,o)}else if(u(i)){for(e=arguments.length,o=new Array(e-1),t=1;t<e;t++)o[t-1]=arguments[t];for(h=i.slice(),e=h.length,t=0;t<e;t++)h[t].apply(this,o)}return!0};i.prototype.addListener=function(n,t){var e;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",n,r(t.listener)?t.listener:t),this._events[n]?u(this._events[n])?this._events[n].push(t):this._events[n]=[this._events[n],t]:this._events[n]=t,u(this._events[n])&&!this._events[n].warned&&(e=f(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[n].length>e&&(this._events[n].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[n].length),console.trace())),this};i.prototype.on=i.prototype.addListener;i.prototype.once=function(n,t){function i(){this.removeListener(n,i);u||(u=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var u=!1;i.listener=t;this.on(n,i);return this};i.prototype.removeListener=function(n,t){var i,e,o,f;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[n])return this;if(i=this._events[n],o=i.length,e=-1,i===t||r(i.listener)&&i.listener===t)delete this._events[n],this._events.removeListener&&this.emit("removeListener",n,t);else if(u(i)){for(f=o;f-->0;)if(i[f]===t||i[f].listener&&i[f].listener===t){e=f;break}if(e<0)return this;i.length===1?(i.length=0,delete this._events[n]):i.splice(e,1);this._events.removeListener&&this.emit("removeListener",n,t)}return this};i.prototype.removeAllListeners=function(n){var i,t;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[n]&&delete this._events[n],this;if(arguments.length===0){for(i in this._events)i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events={},this}if(t=this._events[n],r(t))this.removeListener(n,t);else while(t.length)this.removeListener(n,t[t.length-1]);return delete this._events[n],this};i.prototype.listeners=function(n){return this._events&&this._events[n]?r(this._events[n])?[this._events[n]]:this._events[n].slice():[]};i.listenerCount=function(n,t){return n._events&&n._events[t]?r(n._events[t])?1:n._events[t].length:0}},{}],24:[function(n,t){var i=t.exports,e=n("events").EventEmitter,u=n("./lib/request"),f=n("url"),r;i.request=function(n,t){typeof n=="string"&&(n=f.parse(n));n||(n={});n.host||n.port||(n.port=parseInt(window.location.port,10));!n.host&&n.hostname&&(n.host=n.hostname);n.scheme||(n.scheme=window.location.protocol.split(":")[0]);n.host||(n.host=window.location.hostname||window.location.host);/:/.test(n.host)&&(n.port||(n.port=n.host.split(":")[1]),n.host=n.host.split(":")[0]);n.port||(n.port=n.scheme=="https"?443:80);var i=new u(new r,n);if(t)i.on("response",t);return i};i.get=function(n,t){n.method="GET";var r=i.request(n,t);return r.end(),r};i.Agent=function(){};i.Agent.defaultMaxSockets=4;r=function(){var t,n,i;if(typeof window=="undefined")throw new Error("no window object present");else{if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],n=0;n<t.length;n++)try{return i=new window.ActiveXObject(t[n]),function(){if(i){var r=i;return i=null,r}return new window.ActiveXObject(t[n])}}catch(r){}throw new Error("ajax not supported in this browser");}else throw new Error("ajax not supported in this browser");}}()},{"./lib/request":25,events:23,url:46}],25:[function(n,t){var u=n("stream"),f=n("./response"),e=n("Base64"),o=n("inherits"),i=t.exports=function(n,t){var i=this,a,c,u,o,l,h;i.writable=!0;i.xhr=n;i.body=[];i.uri=(t.scheme||"http")+"://"+t.host+(t.port?":"+t.port:"")+(t.path||"/");try{n.withCredentials=!0}catch(v){}if(n.open(t.method||"GET",i.uri,!0),t.headers)for(a=s(t.headers),c=0;c<a.length;c++)if(u=a[c],i.isSafeRequestHeader(u))if(o=t.headers[u],r(o))for(l=0;l<o.length;l++)n.setRequestHeader(u,o[l]);else n.setRequestHeader(u,o);t.auth&&this.setHeader("Authorization","Basic "+e.btoa(t.auth));h=new f;h.on("close",function(){i.emit("close")});h.on("ready",function(){i.emit("response",h)});n.onreadystatechange=function(){h.handle(n)}};o(i,u);i.prototype.setHeader=function(n,t){if(r(t))for(var i=0;i<t.length;i++)this.xhr.setRequestHeader(n,t[i]);else this.xhr.setRequestHeader(n,t)};i.prototype.write=function(n){this.body.push(n)};i.prototype.destroy=function(){this.xhr.abort();this.emit("close")};i.prototype.end=function(n){var f,o,e,u,i,t;if(n!==undefined&&this.body.push(n),this.body.length===0)this.xhr.send("");else if(typeof this.body[0]=="string")this.xhr.send(this.body.join(""));else if(r(this.body[0])){for(i=[],t=0;t<this.body.length;t++)i.push.apply(i,this.body[t]);this.xhr.send(i)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(f=0,t=0;t<this.body.length;t++)f+=this.body[t].length;for(i=new this.body[0].constructor(f),o=0,t=0;t<this.body.length;t++)for(e=this.body[t],u=0;u<e.length;u++)i[o++]=e[u];this.xhr.send(i)}else{for(i="",t=0;t<this.body.length;t++)i+=this.body[t].toString();this.xhr.send(i)}};i.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];i.prototype.isSafeRequestHeader=function(n){return n?h(i.unsafeHeaders,n.toLowerCase())===-1:!1};var s=Object.keys||function(n){var t=[];for(var i in n)t.push(i);return t},r=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},h=function(n,t){if(n.indexOf)return n.indexOf(t);for(var i=0;i<n.length;i++)if(n[i]===t)return i;return-1}},{"./response":26,Base64:27,inherits:29,stream:39}],26:[function(n,t){function u(n){for(var r,u,i,e,s=n.getAllResponseHeaders().split(/\r?\n/),t={},o=0;o<s.length;o++)(r=s[o],r!=="")&&(u=r.match(/^([^:]+):\s*(.*)/),u?(i=u[1].toLowerCase(),e=u[2],t[i]!==undefined?f(t[i])?t[i].push(e):t[i]=[t[i],e]:t[i]=e):t[r]=!0);return t}var e=n("stream"),o=n("util"),r=t.exports=function(){this.offset=0;this.readable=!0},i,f;o.inherits(r,e);i={streaming:!0,status2:!0};r.prototype.getResponse=function(n){var t=String(n.responseType).toLowerCase();return t==="blob"?n.responseBlob||n.response:t==="arraybuffer"?n.response:n.responseText};r.prototype.getHeader=function(n){return this.headers[n.toLowerCase()]};r.prototype.handle=function(n){if(n.readyState===2&&i.status2){try{this.statusCode=n.status;this.headers=u(n)}catch(t){i.status2=!1}i.status2&&this.emit("ready")}else if(i.streaming&&n.readyState===3){try{this.statusCode||(this.statusCode=n.status,this.headers=u(n),this.emit("ready"))}catch(t){}try{this._emitData(n)}catch(t){i.streaming=!1}}else n.readyState===4&&(this.statusCode||(this.statusCode=n.status,this.emit("ready")),this._emitData(n),n.error?this.emit("error",this.getResponse(n)):this.emit("end"),this.emit("close"))};r.prototype._emitData=function(n){var t=this.getResponse(n);if(t.toString().match(/ArrayBuffer/)){this.emit("data",new Uint8Array(t,this.offset));this.offset=t.byteLength;return}t.length>this.offset&&(this.emit("data",t.slice(this.offset)),this.offset=t.length)};f=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"}},{stream:39,util:48}],27:[function(n,t,i){(function(){function t(n){this.message=n}var n=typeof i!="undefined"?i:this,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error;t.prototype.name="InvalidCharacterError";n.btoa||(n.btoa=function(n){for(var u,f,i=0,e=r,o="";n.charAt(i|0)||(e="=",i%1);o+=e.charAt(63&u>>8-i%1*8)){if(f=n.charCodeAt(i+=3/4),f>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u=u<<8|f}return o});n.atob||(n.atob=function(n){if(n=n.replace(/=+$/,""),n.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var u=0,f,i,o=0,e="";i=n.charAt(o++);~i&&(f=u%4?f*64+i:i,u++%4)?e+=String.fromCharCode(255&f>>(-2*u&6)):0)i=r.indexOf(i);return e})})()},{}],28:[function(n,t){var i=n("http"),u=t.exports;for(var r in i)i.hasOwnProperty(r)&&(u[r]=i[r]);u.request=function(n,t){return n||(n={}),n.scheme="https",i.request.call(this,n,t)}},{http:24}],29:[function(n,t){t.exports=typeof Object.create=="function"?function(n,t){n.super_=t;n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:function(n,t){n.super_=t;var i=function(){};i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n}},{}],30:[function(n,t){var i=t.exports={};i.nextTick=function(){var t=typeof window!="undefined"&&window.setImmediate,i=typeof window!="undefined"&&window.postMessage&&window.addEventListener,n;return t?function(n){return window.setImmediate(n)}:i?(n=[],window.addEventListener("message",function(t){var i=t.source,r;(i===window||i===null)&&t.data==="process-tick"&&(t.stopPropagation(),n.length>0&&(r=n.shift(),r()))},!0),function(t){n.push(t);window.postMessage("process-tick","*")}):function(n){setTimeout(n,0)}}();i.title="browser";i.browser=!0;i.env={};i.argv=[];i.binding=function(){throw new Error("process.binding is not supported");};i.cwd=function(){return"/"};i.chdir=function(){throw new Error("process.chdir is not supported");}},{}],31:[function(n,t,i){function u(n,t,i){var e,o,f,r;if(!(this instanceof u))return new u(n,t,i);if(e=typeof n,t==="base64"&&e==="string")for(n=ni(n);n.length%4!=0;)n=n+"=";if(e==="number")o=et(n);else if(e==="string")o=u.byteLength(n,t);else if(e==="object")o=et(n.length);else throw new Error("First argument needs to be a number, array or string.");if(u._useTypedArrays?f=ut(new Uint8Array(o)):(f=this,f.length=o,f._isBuffer=!0),u._useTypedArrays&&typeof Uint8Array=="function"&&n instanceof Uint8Array)f._set(n);else if(ti(n))for(r=0;r<o;r++)f[r]=u.isBuffer(n)?n.readUInt8(r):n[r];else if(e==="string")f.write(n,0,t);else if(e==="number"&&!u._useTypedArrays&&!i)for(r=0;r<o;r++)f[r]=0;return f}function vt(n,t,i,f){var o,s,e,h;for(i=Number(i)||0,o=n.length-i,f?(f=Number(f),f>o&&(f=o)):f=o,s=t.length,r(s%2==0,"Invalid hex string"),f>s/2&&(f=s/2),e=0;e<f;e++)h=parseInt(t.substr(e*2,2),16),r(!isNaN(h),"Invalid hex string"),n[i+e]=h;return u._charsWritten=e*2,e}function yt(n,t,i,r){return u._charsWritten=a(ht(t),n,i,r)}function p(n,t,i,r){return u._charsWritten=a(ii(t),n,i,r)}function pt(n,t,i,r){return p(n,t,i,r)}function wt(n,t,i,r){return u._charsWritten=a(ct(t),n,i,r)}function bt(n,t,i){return t===0&&i===n.length?h.fromByteArray(n):h.fromByteArray(n.slice(t,i))}function kt(n,t,i){var f="",u="",r;for(i=Math.min(n.length,i),r=t;r<i;r++)n[r]<=127?(f+=lt(u)+String.fromCharCode(n[r]),u=""):u+="%"+n[r].toString(16);return f+lt(u)}function w(n,t,i){var u="",r;for(i=Math.min(n.length,i),r=t;r<i;r++)u+=String.fromCharCode(n[r]);return u}function dt(n,t,i){return w(n,t,i)}function gt(n,t,i){var f=n.length,u,r;for((!t||t<0)&&(t=0),(!i||i<0||i>f)&&(i=f),u="",r=t;r<i;r++)u+=st(n[r]);return u}function c(n,t,i,u){var e,f;if(u||(r(typeof i=="boolean","missing or invalid endian"),r(t!==undefined&&t!==null,"missing offset"),r(t+1<n.length,"Trying to read beyond buffer length")),e=n.length,!(t>=e))return i?(f=n[t],t+1<e&&(f|=n[t+1]<<8)):(f=n[t]<<8,t+1<e&&(f|=n[t+1])),f}function l(n,t,i,u){var e,f;if(u||(r(typeof i=="boolean","missing or invalid endian"),r(t!==undefined&&t!==null,"missing offset"),r(t+3<n.length,"Trying to read beyond buffer length")),e=n.length,!(t>=e))return i?(t+2<e&&(f=n[t+2]<<16),t+1<e&&(f|=n[t+1]<<8),f|=n[t],t+3<e&&(f=f+(n[t+3]<<24>>>0))):(t+1<e&&(f=n[t+1]<<16),t+2<e&&(f|=n[t+2]<<8),t+3<e&&(f|=n[t+3]),f=f+(n[t]<<24>>>0)),f}function b(n,t,i,u){var e,f,o;if(u||(r(typeof i=="boolean","missing or invalid endian"),r(t!==undefined&&t!==null,"missing offset"),r(t+1<n.length,"Trying to read beyond buffer length")),e=n.length,!(t>=e))return f=c(n,t,i,!0),o=f&32768,o?(65536-f)*-1:f}function k(n,t,i,u){var e,f,o;if(u||(r(typeof i=="boolean","missing or invalid endian"),r(t!==undefined&&t!==null,"missing offset"),r(t+3<n.length,"Trying to read beyond buffer length")),e=n.length,!(t>=e))return f=l(n,t,i,!0),o=f&2147483648,o?(4294967296-f)*-1:f}function d(n,t,i,u){return u||(r(typeof i=="boolean","missing or invalid endian"),r(t+3<n.length,"Trying to read beyond buffer length")),e.read(n,t,i,23,4)}function g(n,t,i,u){return u||(r(typeof i=="boolean","missing or invalid endian"),r(t+7<n.length,"Trying to read beyond buffer length")),e.read(n,t,i,52,8)}function o(n,t,i,u,f){var o,e,s;if(f||(r(t!==undefined&&t!==null,"missing value"),r(typeof u=="boolean","missing or invalid endian"),r(i!==undefined&&i!==null,"missing offset"),r(i+1<n.length,"trying to write beyond buffer length"),v(t,65535)),o=n.length,!(i>=o))for(e=0,s=Math.min(o-i,2);e<s;e++)n[i+e]=(t&255<<8*(u?e:1-e))>>>(u?e:1-e)*8}function s(n,t,i,u,f){var o,e,s;if(f||(r(t!==undefined&&t!==null,"missing value"),r(typeof u=="boolean","missing or invalid endian"),r(i!==undefined&&i!==null,"missing offset"),r(i+3<n.length,"trying to write beyond buffer length"),v(t,4294967295)),o=n.length,!(i>=o))for(e=0,s=Math.min(o-i,4);e<s;e++)n[i+e]=t>>>(u?e:3-e)*8&255}function nt(n,t,i,u,f){f||(r(t!==undefined&&t!==null,"missing value"),r(typeof u=="boolean","missing or invalid endian"),r(i!==undefined&&i!==null,"missing offset"),r(i+1<n.length,"Trying to write beyond buffer length"),y(t,32767,-32768));var e=n.length;i>=e||(t>=0?o(n,t,i,u,f):o(n,65535+t+1,i,u,f))}function tt(n,t,i,u,f){f||(r(t!==undefined&&t!==null,"missing value"),r(typeof u=="boolean","missing or invalid endian"),r(i!==undefined&&i!==null,"missing offset"),r(i+3<n.length,"Trying to write beyond buffer length"),y(t,2147483647,-2147483648));var e=n.length;i>=e||(t>=0?s(n,t,i,u,f):s(n,4294967295+t+1,i,u,f))}function it(n,t,i,u,f){f||(r(t!==undefined&&t!==null,"missing value"),r(typeof u=="boolean","missing or invalid endian"),r(i!==undefined&&i!==null,"missing offset"),r(i+3<n.length,"Trying to write beyond buffer length"),at(t,34028234663852886e22,-34028234663852886e22));var o=n.length;i>=o||e.write(n,t,i,u,23,4)}function rt(n,t,i,u,f){f||(r(t!==undefined&&t!==null,"missing value"),r(typeof u=="boolean","missing or invalid endian"),r(i!==undefined&&i!==null,"missing offset"),r(i+7<n.length,"Trying to write beyond buffer length"),at(t,17976931348623157e292,-17976931348623157e292));var o=n.length;i>=o||e.write(n,t,i,u,52,8)}function ni(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function ut(n){return n._isBuffer=!0,n._get=n.get,n._set=n.set,n.get=f.get,n.set=f.set,n.write=f.write,n.toString=f.toString,n.toLocaleString=f.toString,n.toJSON=f.toJSON,n.copy=f.copy,n.slice=f.slice,n.readUInt8=f.readUInt8,n.readUInt16LE=f.readUInt16LE,n.readUInt16BE=f.readUInt16BE,n.readUInt32LE=f.readUInt32LE,n.readUInt32BE=f.readUInt32BE,n.readInt8=f.readInt8,n.readInt16LE=f.readInt16LE,n.readInt16BE=f.readInt16BE,n.readInt32LE=f.readInt32LE,n.readInt32BE=f.readInt32BE,n.readFloatLE=f.readFloatLE,n.readFloatBE=f.readFloatBE,n.readDoubleLE=f.readDoubleLE,n.readDoubleBE=f.readDoubleBE,n.writeUInt8=f.writeUInt8,n.writeUInt16LE=f.writeUInt16LE,n.writeUInt16BE=f.writeUInt16BE,n.writeUInt32LE=f.writeUInt32LE,n.writeUInt32BE=f.writeUInt32BE,n.writeInt8=f.writeInt8,n.writeInt16LE=f.writeInt16LE,n.writeInt16BE=f.writeInt16BE,n.writeInt32LE=f.writeInt32LE,n.writeInt32BE=f.writeInt32BE,n.writeFloatLE=f.writeFloatLE,n.writeFloatBE=f.writeFloatBE,n.writeDoubleLE=f.writeDoubleLE,n.writeDoubleBE=f.writeDoubleBE,n.fill=f.fill,n.inspect=f.inspect,n.toArrayBuffer=f.toArrayBuffer,n}function ft(n,t,i){return typeof n!="number"?i:(n=~~n,n>=t)?t:n>=0?n:(n+=t,n>=0)?n:0}function et(n){return n=~~Math.ceil(+n),n<0?0:n}function ot(n){return(Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"})(n)}function ti(n){return ot(n)||u.isBuffer(n)||n&&typeof n=="object"&&typeof n.length=="number"}function st(n){return n<16?"0"+n.toString(16):n.toString(16)}function ht(n){for(var i,e,f,r,u=[],t=0;t<n.length;t++)if(i=n.charCodeAt(t),i<=127)u.push(n.charCodeAt(t));else for(e=t,i>=55296&&i<=57343&&t++,f=encodeURIComponent(n.slice(e,t+1)).substr(1).split("%"),r=0;r<f.length;r++)u.push(parseInt(f[r],16));return u}function ii(n){for(var i=[],t=0;t<n.length;t++)i.push(n.charCodeAt(t)&255);return i}function ct(n){return h.toByteArray(n)}function a(n,t,i,r){for(var u=0;u<r;u++){if(u+i>=t.length||u>=n.length)break;t[u+i]=n[u]}return u}function lt(n){try{return decodeURIComponent(n)}catch(t){return String.fromCharCode(65533)}}function v(n,t){r(typeof n=="number","cannot write a non-number as a number");r(n>=0,"specified a negative value for writing an unsigned value");r(n<=t,"value is larger than maximum value for type");r(Math.floor(n)===n,"value has a fractional component")}function y(n,t,i){r(typeof n=="number","cannot write a non-number as a number");r(n<=t,"value larger than maximum allowed value");r(n>=i,"value smaller than minimum allowed value");r(Math.floor(n)===n,"value has a fractional component")}function at(n,t,i){r(typeof n=="number","cannot write a non-number as a number");r(n<=t,"value larger than maximum allowed value");r(n>=i,"value smaller than minimum allowed value")}function r(n,t){if(!n)throw new Error(t||"Failed assertion");}var h=n("base64-js"),e=n("ieee754"),f;i.Buffer=u;i.SlowBuffer=u;i.INSPECT_MAX_BYTES=50;u.poolSize=8192;u._useTypedArrays=function(){if(typeof Uint8Array=="undefined"||typeof ArrayBuffer=="undefined")return!1;try{var n=new Uint8Array(0);return n.foo=function(){return 42},42===n.foo()&&typeof n.subarray=="function"}catch(t){return!1}}();u.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};u.isBuffer=function(n){return!!(n!==null&&n!==undefined&&n._isBuffer)};u.byteLength=function(n,t){var i;n=n+"";switch(t||"utf8"){case"hex":i=n.length/2;break;case"utf8":case"utf-8":i=ht(n).length;break;case"ascii":case"binary":case"raw":i=n.length;break;case"base64":i=ct(n).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=n.length*2;break;default:throw new Error("Unknown encoding");}return i};u.concat=function(n,t){var i,f,e,o;if(r(ot(n),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),n.length===0)return new u(0);if(n.length===1)return n[0];if(typeof t!="number")for(t=0,i=0;i<n.length;i++)t+=n[i].length;for(f=new u(t),e=0,i=0;i<n.length;i++)o=n[i],o.copy(f,e),e+=o.length;return f};u.prototype.write=function(n,t,i,r){var f,u;isFinite(t)?isFinite(i)||(r=i,i=undefined):(f=r,r=t,t=i,i=f);t=Number(t)||0;u=this.length-t;i?(i=Number(i),i>u&&(i=u)):i=u;r=String(r||"utf8").toLowerCase();switch(r){case"hex":return vt(this,n,t,i);case"utf8":case"utf-8":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yt(this,n,t,i);case"ascii":return p(this,n,t,i);case"binary":return pt(this,n,t,i);case"base64":return wt(this,n,t,i);default:throw new Error("Unknown encoding");}};u.prototype.toString=function(n,t,i){var r=this;if(n=String(n||"utf8").toLowerCase(),t=Number(t)||0,i=i!==undefined?Number(i):i=r.length,i===t)return"";switch(n){case"hex":return gt(r,t,i);case"utf8":case"utf-8":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kt(r,t,i);case"ascii":return w(r,t,i);case"binary":return dt(r,t,i);case"base64":return bt(r,t,i);default:throw new Error("Unknown encoding");}};u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};u.prototype.copy=function(n,t,i,u){var e=this,f;if((i||(i=0),u||u===0||(u=this.length),t||(t=0),u!==i)&&n.length!==0&&e.length!==0)for(r(u>=i,"sourceEnd < sourceStart"),r(t>=0&&t<n.length,"targetStart out of bounds"),r(i>=0&&i<e.length,"sourceStart out of bounds"),r(u>=0&&u<=e.length,"sourceEnd out of bounds"),u>this.length&&(u=this.length),n.length-t<u-i&&(u=n.length-t+i),f=0;f<u-i;f++)n[f+t]=this[f+i]};u.prototype.slice=function(n,t){var r=this.length,f,e,i;if(n=ft(n,r,0),t=ft(t,r,r),u._useTypedArrays)return ut(this.subarray(n,t));for(f=t-n,e=new u(f,undefined,!0),i=0;i<f;i++)e[i]=this[i+n];return e};u.prototype.get=function(n){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(n)};u.prototype.set=function(n,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(n,t)};u.prototype.readUInt8=function(n,t){if(t||(r(n!==undefined&&n!==null,"missing offset"),r(n<this.length,"Trying to read beyond buffer length")),!(n>=this.length))return this[n]};u.prototype.readUInt16LE=function(n,t){return c(this,n,!0,t)};u.prototype.readUInt16BE=function(n,t){return c(this,n,!1,t)};u.prototype.readUInt32LE=function(n,t){return l(this,n,!0,t)};u.prototype.readUInt32BE=function(n,t){return l(this,n,!1,t)};u.prototype.readInt8=function(n,t){if(t||(r(n!==undefined&&n!==null,"missing offset"),r(n<this.length,"Trying to read beyond buffer length")),!(n>=this.length)){var i=this[n]&128;return i?(256-this[n])*-1:this[n]}};u.prototype.readInt16LE=function(n,t){return b(this,n,!0,t)};u.prototype.readInt16BE=function(n,t){return b(this,n,!1,t)};u.prototype.readInt32LE=function(n,t){return k(this,n,!0,t)};u.prototype.readInt32BE=function(n,t){return k(this,n,!1,t)};u.prototype.readFloatLE=function(n,t){return d(this,n,!0,t)};u.prototype.readFloatBE=function(n,t){return d(this,n,!1,t)};u.prototype.readDoubleLE=function(n,t){return g(this,n,!0,t)};u.prototype.readDoubleBE=function(n,t){return g(this,n,!1,t)};u.prototype.writeUInt8=function(n,t,i){(i||(r(n!==undefined&&n!==null,"missing value"),r(t!==undefined&&t!==null,"missing offset"),r(t<this.length,"trying to write beyond buffer length"),v(n,255)),t>=this.length)||(this[t]=n)};u.prototype.writeUInt16LE=function(n,t,i){o(this,n,t,!0,i)};u.prototype.writeUInt16BE=function(n,t,i){o(this,n,t,!1,i)};u.prototype.writeUInt32LE=function(n,t,i){s(this,n,t,!0,i)};u.prototype.writeUInt32BE=function(n,t,i){s(this,n,t,!1,i)};u.prototype.writeInt8=function(n,t,i){(i||(r(n!==undefined&&n!==null,"missing value"),r(t!==undefined&&t!==null,"missing offset"),r(t<this.length,"Trying to write beyond buffer length"),y(n,127,-128)),t>=this.length)||(n>=0?this.writeUInt8(n,t,i):this.writeUInt8(255+n+1,t,i))};u.prototype.writeInt16LE=function(n,t,i){nt(this,n,t,!0,i)};u.prototype.writeInt16BE=function(n,t,i){nt(this,n,t,!1,i)};u.prototype.writeInt32LE=function(n,t,i){tt(this,n,t,!0,i)};u.prototype.writeInt32BE=function(n,t,i){tt(this,n,t,!1,i)};u.prototype.writeFloatLE=function(n,t,i){it(this,n,t,!0,i)};u.prototype.writeFloatBE=function(n,t,i){it(this,n,t,!1,i)};u.prototype.writeDoubleLE=function(n,t,i){rt(this,n,t,!0,i)};u.prototype.writeDoubleBE=function(n,t,i){rt(this,n,t,!1,i)};u.prototype.fill=function(n,t,i){if((n||(n=0),t||(t=0),i||(i=this.length),typeof n=="string"&&(n=n.charCodeAt(0)),r(typeof n=="number"&&!isNaN(n),"value is not a number"),r(i>=t,"end < start"),i!==t)&&this.length!==0){r(t>=0&&t<this.length,"start out of bounds");r(i>=0&&i<=this.length,"end out of bounds");for(var u=t;u<i;u++)this[u]=n}};u.prototype.inspect=function(){for(var t=[],r=this.length,n=0;n<r;n++)if(t[n]=st(this[n]),n===i.INSPECT_MAX_BYTES){t[n+1]="...";break}return"<Buffer "+t.join(" ")+">"};u.prototype.toArrayBuffer=function(){var t,n,i;if(typeof Uint8Array=="function"){if(u._useTypedArrays)return new u(this).buffer;for(t=new Uint8Array(this.length),n=0,i=t.length;n<i;n+=1)t[n]=this[n];return t.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser");};f=u.prototype},{"base64-js":32,ieee754:33}],32:[function(n,t){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";(function(){"use strict";function n(n){var t=n.charCodeAt(0);return t===o?62:t===s?63:t<r?-1:t<r+10?t-r+26+26:t<f+26?t-f:t<u+26?t-u+26:void 0}function h(t){function u(n){o[l++]=n}var i,h,c,r,f,o,s,l;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");for(s=t.length,f="="===t.charAt(s-2)?2:"="===t.charAt(s-1)?1:0,o=new e(t.length*3/4-f),c=f>0?t.length-4:t.length,l=0,i=0,h=0;i<c;i+=4,h+=3)r=n(t.charAt(i))<<18|n(t.charAt(i+1))<<12|n(t.charAt(i+2))<<6|n(t.charAt(i+3)),u((r&16711680)>>16),u((r&65280)>>8),u(r&255);return f===2?(r=n(t.charAt(i))<<2|n(t.charAt(i+1))>>4,u(r&255)):f===1&&(r=n(t.charAt(i))<<10|n(t.charAt(i+1))<<4|n(t.charAt(i+2))>>2,u(r>>8&255),u(r&255)),o}function c(n){function u(n){return i.charAt(n)}function s(n){return u(n>>18&63)+u(n>>12&63)+u(n>>6&63)+u(n&63)}for(var e=n.length%3,t="",r,f=0,o=n.length-e;f<o;f+=3)r=(n[f]<<16)+(n[f+1]<<8)+n[f+2],t+=s(r);switch(e){case 1:r=n[n.length-1];t+=u(r>>2);t+=u(r<<4&63);t+="==";break;case 2:r=(n[n.length-2]<<8)+n[n.length-1];t+=u(r>>10);t+=u(r>>4&63);t+=u(r<<2&63);t+="="}return t}var e=typeof Uint8Array!="undefined"?Uint8Array:Array,l="0".charCodeAt(0),o="+".charCodeAt(0),s="/".charCodeAt(0),r="0".charCodeAt(0),u="a".charCodeAt(0),f="A".charCodeAt(0);t.exports.toByteArray=h;t.exports.fromByteArray=c})()},{}],33:[function(n,t,i){i.read=function(n,t,i,r,u){var f,o,l=u*8-r-1,a=(1<<l)-1,v=a>>1,e=-7,s=i?u-1:0,c=i?-1:1,h=n[t+s];for(s+=c,f=h&(1<<-e)-1,h>>=-e,e+=l;e>0;f=f*256+n[t+s],s+=c,e-=8);for(o=f&(1<<-e)-1,f>>=-e,e+=r;e>0;o=o*256+n[t+s],s+=c,e-=8);if(f===0)f=1-v;else{if(f===a)return o?NaN:(h?-1:1)*Infinity;o=o+Math.pow(2,r);f=f-v}return(h?-1:1)*o*Math.pow(2,f-r)};i.write=function(n,t,i,r,u,f){var e,o,s,l=f*8-u-1,a=(1<<l)-1,h=a>>1,y=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=r?0:f-1,v=r?1:-1,p=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===Infinity?(o=isNaN(t)?1:0,e=a):(e=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-e))<1&&(e--,s*=2),t+=e+h>=1?y/s:y*Math.pow(2,1-h),t*s>=2&&(e++,s/=2),e+h>=a?(o=0,e=a):e+h>=1?(o=(t*s-1)*Math.pow(2,u),e=e+h):(o=t*Math.pow(2,h-1)*Math.pow(2,u),e=0));u>=8;n[i+c]=o&255,c+=v,o/=256,u-=8);for(e=e<<u|o,l+=u;l>0;n[i+c]=e&255,c+=v,e/=256,l-=8);n[i+c-v]|=p*128}},{}],34:[function(t,i,r){(function(t){
/*! http://mths.be/punycode v1.2.4 by @mathias */
(function(u){function s(n){throw RangeError(vt[n]);}function nt(n,t){for(var i=n.length;i--;)n[i]=t(n[i]);return n}function tt(n,t){return nt(n.split(at),t).join(".")}function it(n){for(var r=[],i=0,f=n.length,t,u;i<f;)t=n.charCodeAt(i++),t>=55296&&t<=56319&&i<f?(u=n.charCodeAt(i++),(u&64512)==56320?r.push(((t&1023)<<10)+(u&1023)+65536):(r.push(t),i--)):r.push(t);return r}function rt(n){return nt(n,function(n){var t="";return n>65535&&(n-=65536,t+=a(n>>>10&1023|55296),n=56320|n&1023),t+a(n)}).join("")}function yt(n){return n-48<10?n-22:n-65<26?n-65:n-97<26?n-97:f}function ut(n,t){return n+22+75*(n<26)-((t!=0)<<5)}function ft(n,t,i){var r=0;for(n=i?e(n/ht):n>>1,n+=e(n/t);n>w*l>>1;r+=f)n=e(n/w);return e(r+(w+1)*n/(n+st))}function et(n){var v=[],ut=n.length,r,t=0,b=d,y=k,i,u,w,nt,o,c,a,tt,it;for(i=n.lastIndexOf(g),i<0&&(i=0),u=0;u<i;++u)n.charCodeAt(u)>=128&&s("not-basic"),v.push(n.charCodeAt(u));for(w=i>0?i+1:0;w<ut;){for(nt=t,o=1,c=f;;c+=f){if(w>=ut&&s("invalid-input"),a=yt(n.charCodeAt(w++)),(a>=f||a>e((h-t)/o))&&s("overflow"),t+=a*o,tt=c<=y?p:c>=y+l?l:c-y,a<tt)break;it=f-tt;o>e(h/it)&&s("overflow");o*=it}r=v.length+1;y=ft(t-nt,r,nt==0);e(t/r)>h-b&&s("overflow");b+=e(t/r);t%=r;v.splice(t++,0,b)}return rt(v)}function ot(n){var r,u,v,et,y,t,o,w,b,nt,i,c=[],tt,rt,ot,st;for(n=it(n),tt=n.length,r=d,u=0,y=k,t=0;t<tt;++t)i=n[t],i<128&&c.push(a(i));for(v=et=c.length,et&&c.push(g);v<tt;){for(o=h,t=0;t<tt;++t)i=n[t],i>=r&&i<o&&(o=i);for(rt=v+1,o-r>e((h-u)/rt)&&s("overflow"),u+=(o-r)*rt,r=o,t=0;t<tt;++t)if(i=n[t],i<r&&++u>h&&s("overflow"),i==r){for(w=u,b=f;;b+=f){if(nt=b<=y?p:b>=y+l?l:b-y,w<nt)break;st=w-nt;ot=f-nt;c.push(a(ut(nt+st%ot,0)));w=e(st/ot)}c.push(a(ut(w,0)));y=ft(u,rt,v==et);u=0;++v}++u;++r}return c.join("")}function pt(n){return tt(n,function(n){return ct.test(n)?et(n.slice(4).toLowerCase()):n})}function wt(n){return tt(n,function(n){return lt.test(n)?"xn--"+ot(n):n})}var v=typeof r=="object"&&r,b=typeof i=="object"&&i&&i.exports==v&&i,c=typeof t=="object"&&t;(c.global===c||c.window===c)&&(u=c);var o,h=2147483647,f=36,p=1,l=26,st=38,ht=700,k=72,d=128,g="-",ct=/^xn--/,lt=/[^ -~]/,at=/\x2E|\u3002|\uFF0E|\uFF61/g,vt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=f-p,e=Math.floor,a=String.fromCharCode,y;if(o={version:"1.2.4",ucs2:{decode:it,encode:rt},decode:et,encode:ot,toASCII:wt,toUnicode:pt},typeof n=="function"&&typeof n.amd=="object"&&n.amd)n("punycode",function(){return o});else if(v&&!v.nodeType)if(b)b.exports=o;else for(y in o)o.hasOwnProperty(y)&&(v[y]=o[y]);else u.punycode=o})(this)}).call(this,typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],35:[function(n,t){"use strict";function i(n,t){return Object.prototype.hasOwnProperty.call(n,t)}t.exports=function(n,t,u,f){var e,w,s,c,l,h,a,y,p,o,v;if(t=t||"&",u=u||"=",e={},typeof n!="string"||n.length===0)return e;for(w=/\+/g,n=n.split(t),s=1e3,f&&typeof f.maxKeys=="number"&&(s=f.maxKeys),c=n.length,s>0&&c>s&&(c=s),l=0;l<c;++l)h=n[l].replace(w,"%20"),a=h.indexOf(u),a>=0?(y=h.substr(0,a),p=h.substr(a+1)):(y=h,p=""),o=decodeURIComponent(y),v=decodeURIComponent(p),i(e,o)?r(e[o])?e[o].push(v):e[o]=[e[o],v]:e[o]=v;return e};var r=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"}},{}],36:[function(n,t){"use strict";function f(n,t){var r,i;if(n.map)return n.map(t);for(r=[],i=0;i<n.length;i++)r.push(t(n[i],i));return r}var i=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}},r,u;t.exports=function(n,t,e,o){return(t=t||"&",e=e||"=",n===null&&(n=undefined),typeof n=="object")?f(u(n),function(u){var f=encodeURIComponent(i(u))+e;return r(n[u])?n[u].map(function(n){return f+encodeURIComponent(i(n))}).join(t):f+encodeURIComponent(i(n[u]))}).join(t):o?encodeURIComponent(i(o))+e+encodeURIComponent(i(n)):""};r=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};u=Object.keys||function(n){var t=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(i);return t}},{}],37:[function(n,t,i){"use strict";i.decode=i.parse=n("./decode");i.encode=i.stringify=n("./encode")},{"./decode":35,"./encode":36}],38:[function(n,t){function i(n){if(!(this instanceof i))return new i(n);u.call(this,n);r.call(this,n);n&&n.readable===!1&&(this.readable=!1);n&&n.writable===!1&&(this.writable=!1);this.allowHalfOpen=!0;n&&n.allowHalfOpen===!1&&(this.allowHalfOpen=!1);this.once("end",o)}function o(){if(!this.allowHalfOpen&&!this._writableState.ended){var n=this;e(function(){n.end()})}}t.exports=i;var f=n("inherits"),e=n("process/browser.js").nextTick,u=n("./readable.js"),r=n("./writable.js");f(i,u);i.prototype.write=r.prototype.write;i.prototype.end=r.prototype.end;i.prototype._write=r.prototype._write},{"./readable.js":42,"./writable.js":44,inherits:29,"process/browser.js":40}],39:[function(n,t){function i(){r.call(this)}t.exports=i;var r=n("events").EventEmitter,u=n("inherits");u(i,r);i.Readable=n("./readable.js");i.Writable=n("./writable.js");i.Duplex=n("./duplex.js");i.Transform=n("./transform.js");i.PassThrough=n("./passthrough.js");i.Stream=i;i.prototype.pipe=function(n,t){function o(t){n.writable&&!1===n.write(t)&&i.pause&&i.pause()}function s(){i.readable&&i.resume&&i.resume()}function h(){f||(f=!0,n.end())}function c(){f||(f=!0,typeof n.destroy=="function"&&n.destroy())}function e(n){if(u(),r.listenerCount(this,"error")===0)throw n;}function u(){i.removeListener("data",o);n.removeListener("drain",s);i.removeListener("end",h);i.removeListener("close",c);i.removeListener("error",e);n.removeListener("error",e);i.removeListener("end",u);i.removeListener("close",u);n.removeListener("close",u)}var i=this,f;i.on("data",o);n.on("drain",s);if(!n._isStdio&&(!t||t.end!==!1)){i.on("end",h);i.on("close",c)}f=!1;i.on("error",e);n.on("error",e);i.on("end",u);i.on("close",u);n.on("close",u);return n.emit("pipe",i),n}},{"./duplex.js":38,"./passthrough.js":41,"./readable.js":42,"./transform.js":43,"./writable.js":44,events:23,inherits:29}],40:[function(n,t){t.exports=n(30)},{}],41:[function(n,t){function i(n){if(!(this instanceof i))return new i(n);r.call(this,n)}t.exports=i;var r=n("./transform.js"),u=n("inherits");u(i,r);i.prototype._transform=function(n,t,i){i(null,n)}},{"./transform.js":43,inherits:29}],42:[function(n,t){(function(i){function p(t){t=t||{};var i=t.highWaterMark;this.highWaterMark=i||i===0?i:16384;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=!1;this.ended=!1;this.endEmitted=!1;this.reading=!1;this.calledRead=!1;this.sync=!0;this.needReadable=!1;this.emittedReadable=!1;this.readableListening=!1;this.objectMode=!!t.objectMode;this.defaultEncoding=t.defaultEncoding||"utf8";this.ranOut=!1;this.awaitDrain=0;this.readingMore=!1;this.decoder=null;this.encoding=null;t.encoding&&(f||(f=n("string_decoder").StringDecoder),this.decoder=new f(t.encoding),this.encoding=t.encoding)}function r(n){if(!(this instanceof r))return new r(n);this._readableState=new p(n,this);this.readable=!0;e.call(this)}function w(n,t,i,r,u){var e=rt(t,i),f;return e?n.emit("error",e):i===null||i===undefined?(t.reading=!1,t.ended||ut(n,t)):t.objectMode||i&&i.length>0?t.ended&&!u?(f=new Error("stream.push() after EOF"),n.emit("error",f)):t.endEmitted&&u?(f=new Error("stream.unshift() after end event"),n.emit("error",f)):(!t.decoder||u||r||(i=t.decoder.write(i)),t.length+=t.objectMode?1:i.length,u?t.buffer.unshift(i):(t.reading=!1,t.buffer.push(i)),t.needReadable&&s(n),ft(n,t)):u||(t.reading=!1),tt(t)}function tt(n){return!n.ended&&(n.needReadable||n.length<n.highWaterMark||n.length===0)}function it(n){if(n>=l)n=l;else{n--;for(var t=1;t<32;t<<=1)n|=n>>t;n++}return n}function b(n,t){return t.length===0&&t.ended?0:t.objectMode?n===0?0:1:isNaN(n)||n===null?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:n<=0?0:(n>t.highWaterMark&&(t.highWaterMark=it(n)),n>t.length)?t.ended?t.length:(t.needReadable=!0,0):n}function rt(n,t){var i=null;return o.isBuffer(t)||"string"==typeof t||t===null||t===undefined||n.objectMode||i||(i=new TypeError("Invalid non-string/buffer chunk")),i}function ut(n,t){if(t.decoder&&!t.ended){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0;t.length>0?s(n):y(n)}function s(n){var t=n._readableState;(t.needReadable=!1,t.emittedReadable)||(t.emittedReadable=!0,t.sync?u(function(){k(n)}):k(n))}function k(n){n.emit("readable")}function ft(n,t){t.readingMore||(t.readingMore=!0,u(function(){et(n,t)}))}function et(n,t){for(var i=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark;)if(n.read(0),i===t.length)break;else i=t.length;t.readingMore=!1}function ot(n){return function(){var i=this,t=n._readableState;t.awaitDrain--;t.awaitDrain===0&&a(n)}}function a(n){function r(n){var r=n.write(i);!1===r&&t.awaitDrain++}var t=n._readableState,i;for(t.awaitDrain=0;t.pipesCount&&null!==(i=n.read());)if(t.pipesCount===1?r(t.pipes,0,null):g(t.pipes,r),n.emit("data",i),t.awaitDrain>0)return;if(t.pipesCount===0){t.flowing=!1;c.listenerCount(n,"data")>0&&h(n);return}t.ranOut=!0}function v(){this._readableState.ranOut&&(this._readableState.ranOut=!1,a(this))}function h(n,t){var f=n._readableState,i,r;if(f.flowing)throw new Error("Cannot switch to old mode now.");i=t||!1;r=!1;n.readable=!0;n.pipe=e.prototype.pipe;n.on=n.addListener=e.prototype.on;n.on("readable",function(){r=!0;for(var t;!i&&null!==(t=n.read());)n.emit("data",t);t===null&&(r=!1,n._readableState.needReadable=!0)});n.pause=function(){i=!0;this.emit("pause")};n.resume=function(){i=!1;r?u(function(){n.emit("readable")}):this.read(0);this.emit("resume")};n.emit("readable")}function d(n,t){var i=t.buffer,s=t.length,h=!!t.decoder,a=!!t.objectMode,r,e,c,l,u,f;if(i.length===0)return null;if(s===0)r=null;else if(a)r=i.shift();else if(!n||n>=s)r=h?i.join(""):o.concat(i,s),i.length=0;else if(n<i[0].length)u=i[0],r=u.slice(0,n),i[0]=u.slice(n);else if(n===i[0].length)r=i.shift();else for(r=h?"":new o(n),e=0,c=0,l=i.length;c<l&&e<n;c++)u=i[0],f=Math.min(n-e,u.length),h?r+=u.slice(0,f):u.copy(r,e,0,f),f<u.length?i[0]=u.slice(f):i.shift(),e+=f;return r}function y(n){var t=n._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,u(function(){t.endEmitted||t.length!==0||(t.endEmitted=!0,n.readable=!1,n.emit("end"))}))}function g(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i)}function st(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1}var l;t.exports=r;r.ReadableState=p;var c=n("events").EventEmitter,e=n("./index.js"),o=n("buffer").Buffer,u=n("process/browser.js").nextTick,f,nt=n("inherits");nt(r,e);r.prototype.push=function(n,t){var i=this._readableState;return typeof n!="string"||i.objectMode||(t=t||i.defaultEncoding,t!==i.encoding&&(n=new o(n,t),t="")),w(this,i,n,t,!1)};r.prototype.unshift=function(n){var t=this._readableState;return w(this,t,n,"",!0)};r.prototype.setEncoding=function(t){f||(f=n("string_decoder").StringDecoder);this._readableState.decoder=new f(t);this._readableState.encoding=t};l=8388608;r.prototype.read=function(n){var t=this._readableState,u,i,r;return(t.calledRead=!0,u=n,(typeof n!="number"||n>0)&&(t.emittedReadable=!1),n===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))?(s(this),null):(n=b(n,t),n===0&&t.ended)?(t.length===0&&y(this),null):(i=t.needReadable,t.length-n<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(n=b(u,t)),r=n>0?d(n,t):null,r===null&&(t.needReadable=!0,n=0),t.length-=n,t.length!==0||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&t.length===0&&y(this),r)};r.prototype._read=function(){this.emit("error",new Error("not implemented"))};r.prototype.pipe=function(n,t){function w(n){n===f&&s()}function b(){n.end()}function s(){n.removeListener("close",h);n.removeListener("finish",l);n.removeListener("drain",e);n.removeListener("error",d);n.removeListener("unpipe",w);f.removeListener("end",b);f.removeListener("end",s);(!n._writableState||n._writableState.needDrain)&&e()}function d(t){y();k===0&&c.listenerCount(n,"error")===0&&n.emit("error",t)}function h(){n.removeListener("finish",l);y()}function l(){n.removeListener("close",h);y()}function y(){f.unpipe(n)}var f=this,r=this._readableState,p,o,e,k;switch(r.pipesCount){case 0:r.pipes=n;break;case 1:r.pipes=[r.pipes,n];break;default:r.pipes.push(n)}if(r.pipesCount+=1,p=(!t||t.end!==!1)&&n!==i.stdout&&n!==i.stderr,o=p?b:s,r.endEmitted)u(o);else f.once("end",o);n.on("unpipe",w);e=ot(f);n.on("drain",e);k=c.listenerCount(n,"error");n.once("error",d);n.once("close",h);n.once("finish",l);if(n.emit("pipe",f),!r.flowing){this.on("readable",v);r.flowing=!0;u(function(){a(f)})}return n};r.prototype.unpipe=function(n){var t=this._readableState,r,u,i;if(t.pipesCount===0)return this;if(t.pipesCount===1)return n&&n!==t.pipes?this:(n||(n=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1,n&&n.emit("unpipe",this),this);if(!n){for(r=t.pipes,u=t.pipesCount,t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1,i=0;i<u;i++)r[i].emit("unpipe",this);return this}return(i=st(t.pipes,n),i===-1)?this:(t.pipes.splice(i,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),n.emit("unpipe",this),this)};r.prototype.on=function(n,t){var r=e.prototype.on.call(this,n,t),i;return n!=="data"||this._readableState.flowing||h(this),n==="readable"&&this.readable&&(i=this._readableState,i.readableListening||(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading?i.length&&s(this,i):this.read(0))),r};r.prototype.addListener=r.prototype.on;r.prototype.resume=function(){h(this);this.read(0);this.emit("resume")};r.prototype.pause=function(){h(this,!0);this.emit("pause")};r.prototype.wrap=function(n){var i=this._readableState,u=!1,t=this,r,f;n.on("end",function(){if(i.decoder&&!i.ended){var n=i.decoder.end();n&&n.length&&t.push(n)}t.push(null)});n.on("data",function(r){if(i.decoder&&(r=i.decoder.write(r)),r&&(i.objectMode||r.length)){var f=t.push(r);f||(u=!0,n.pause())}});for(r in n)typeof n[r]=="function"&&typeof this[r]=="undefined"&&(this[r]=function(t){return function(){return n[t].apply(n,arguments)}}(r));return f=["error","close","destroy","pause","resume"],g(f,function(i){n.on(i,function(n){return t.emit.apply(t,i,n)})}),t._read=function(){u&&(u=!1,n.resume())},t};r._fromList=d}).call(this,n("/Users/damian/projects/raml-js-parser/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./index.js":39,"/Users/damian/projects/raml-js-parser/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":30,buffer:31,events:23,inherits:29,"process/browser.js":40,string_decoder:45}],43:[function(n,t){function e(n,t){this.afterTransform=function(n,i){return o(t,n,i)};this.needTransform=!1;this.transforming=!1;this.writecb=null;this.writechunk=null}function o(n,t,i){var u=n._transformState,f,r;if(u.transforming=!1,f=u.writecb,!f)return n.emit("error",new Error("no writecb in Transform class"));u.writechunk=null;u.writecb=null;i!==null&&i!==undefined&&n.push(i);f&&f(t);r=n._readableState;r.reading=!1;(r.needReadable||r.length<r.highWaterMark)&&n._read(r.highWaterMark)}function i(n){if(!(this instanceof i))return new i(n);r.call(this,n);var f=this._transformState=new e(n,this),t=this;this._readableState.needReadable=!0;this._readableState.sync=!1;this.once("finish",function(){"function"==typeof this._flush?this._flush(function(n){u(t,n)}):u(t)})}function u(n,t){if(t)return n.emit("error",t);var i=n._writableState,u=n._readableState,r=n._transformState;if(i.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return n.push(null)}t.exports=i;var r=n("./duplex.js"),f=n("inherits");f(i,r);i.prototype.push=function(n,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,n,t)};i.prototype._transform=function(){throw new Error("not implemented");};i.prototype._write=function(n,t,i){var r=this._transformState,u;r.writecb=i;r.writechunk=n;r.writeencoding=t;r.transforming||(u=this._readableState,(r.needTransform||u.needReadable||u.length<u.highWaterMark)&&this._read(u.highWaterMark))};i.prototype._read=function(){var n=this._transformState;n.writechunk&&n.writecb&&!n.transforming?(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform)):n.needTransform=!0}},{"./duplex.js":38,inherits:29}],44:[function(n,t){function y(n,t,i){this.chunk=n;this.encoding=t;this.callback=i}function e(n,t){var i,r;n=n||{};i=n.highWaterMark;this.highWaterMark=i||i===0?i:16384;this.objectMode=!!n.objectMode;this.highWaterMark=~~this.highWaterMark;this.needDrain=!1;this.ending=!1;this.ended=!1;this.finished=!1;r=n.decodeStrings===!1;this.decodeStrings=!r;this.defaultEncoding=n.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(n){nt(t,n)};this.writecb=null;this.writelen=0;this.buffer=[]}function i(n){if(!(this instanceof i)&&!(this instanceof f.Duplex))return new i(n);this._writableState=new e(n,this);this.writable=!0;f.call(this)}function p(n,t,i){var r=new Error("write after end");n.emit("error",r);u(function(){i(r)})}function w(n,t,i,f){var o=!0,e;return r.isBuffer(i)||"string"==typeof i||i===null||i===undefined||t.objectMode||(e=new TypeError("Invalid non-string/buffer chunk"),n.emit("error",e),u(function(){f(e)}),o=!1),o}function b(n,t,i){return n.objectMode||n.decodeStrings===!1||typeof t!="string"||(t=new r(t,i)),t}function k(n,t,i,r,u){var f,e;return i=b(t,i,r),f=t.objectMode?1:i.length,t.length+=f,e=t.length<t.highWaterMark,t.needDrain=!e,t.writing?t.buffer.push(new y(i,r,u)):o(n,t,f,i,r,u),e}function o(n,t,i,r,u,f){t.writelen=i;t.writecb=f;t.writing=!0;t.sync=!0;n._write(r,u,t.onwrite);t.sync=!1}function d(n,t,i,r,f){i?u(function(){f(r)}):f(r);n.emit("error",r)}function g(n){n.writing=!1;n.writecb=null;n.length-=n.writelen;n.writelen=0}function nt(n,t){var i=n._writableState,e=i.sync,f=i.writecb,r;g(i);t?d(n,i,e,t,f):(r=h(n,i),r||i.bufferProcessing||!i.buffer.length||it(n,i),e?u(function(){s(n,i,r,f)}):s(n,i,r,f))}function s(n,t,i,r){i||tt(n,t);r();i&&c(n,t)}function tt(n,t){t.length===0&&t.needDrain&&(t.needDrain=!1,n.emit("drain"))}function it(n,t){var i;for(t.bufferProcessing=!0,i=0;i<t.buffer.length;i++){var r=t.buffer[i],u=r.chunk,f=r.encoding,e=r.callback,s=t.objectMode?1:u.length;if(o(n,t,s,u,f,e),t.writing){i++;break}}t.bufferProcessing=!1;i<t.buffer.length?t.buffer=t.buffer.slice(i):t.buffer.length=0}function h(n,t){return t.ending&&t.length===0&&!t.finished&&!t.writing}function c(n,t){var i=h(n,t);return i&&(t.finished=!0,n.emit("finish")),i}function rt(n,t,i){if(t.ending=!0,c(n,t),i)if(t.finished)u(i);else n.once("finish",i);t.ended=!0}t.exports=i;i.WritableState=e;var l=typeof Uint8Array!="undefined"?function(n){return n instanceof Uint8Array}:function(n){return n&&n.constructor&&n.constructor.name==="Uint8Array"},a=typeof ArrayBuffer!="undefined"?function(n){return n instanceof ArrayBuffer}:function(n){return n&&n.constructor&&n.constructor.name==="ArrayBuffer"},v=n("inherits"),f=n("./index.js"),u=n("process/browser.js").nextTick,r=n("buffer").Buffer;v(i,f);i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};i.prototype.write=function(n,t,i){var u=this._writableState,f=!1;return typeof t=="function"&&(i=t,t=null),!r.isBuffer(n)&&l(n)&&(n=new r(n)),a(n)&&typeof Uint8Array!="undefined"&&(n=new r(new Uint8Array(n))),r.isBuffer(n)?t="buffer":t||(t=u.defaultEncoding),typeof i!="function"&&(i=function(){}),u.ended?p(this,u,i):w(this,u,n,i)&&(f=k(this,u,n,t,i)),f};i.prototype._write=function(n,t,i){i(new Error("not implemented"))};i.prototype.end=function(n,t,i){var r=this._writableState;typeof n=="function"?(i=n,n=null,t=null):typeof t=="function"&&(i=t,t=null);typeof n!="undefined"&&n!==null&&this.write(n,t);r.ending||r.finished||rt(this,r,i)}},{"./index.js":39,buffer:31,inherits:29,"process/browser.js":40}],45:[function(n,t,i){function f(n){if(n&&!u.isEncoding(n))throw new Error("Unknown encoding: "+n);}function e(n){return n.toString(this.encoding)}function o(n){var t=this.charReceived=n.length%2;return this.charLength=t?2:0,t}function s(n){var t=this.charReceived=n.length%3;return this.charLength=t?3:0,t}var u=n("buffer").Buffer,r=i.StringDecoder=function(n){this.encoding=(n||"utf8").toLowerCase().replace(/[-_]/,"");f(n);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=s;break;default:this.write=e;return}this.charBuffer=new u(6);this.charReceived=0;this.charLength=0};r.prototype.write=function(n){for(var t="",o=0,r,e,i,u,f;this.charLength;){if(r=n.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:n.length,n.copy(this.charBuffer,this.charReceived,o,r),this.charReceived+=r-o,o=r,this.charReceived<this.charLength)return"";if(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding),u=t.charCodeAt(t.length-1),u>=55296&&u<=56319){this.charLength+=this.surrogateSize;t="";continue}if(this.charReceived=this.charLength=0,r==n.length)return t;n=n.slice(r,n.length);break}return(e=this.detectIncompleteChar(n),i=n.length,this.charLength&&(n.copy(this.charBuffer,0,n.length-e,i),this.charReceived=e,i-=e),t+=n.toString(this.encoding,0,i),i=t.length-1,u=t.charCodeAt(i),u>=55296&&u<=56319)?(f=this.surrogateSize,this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),this.charBuffer.write(t.charAt(t.length-1),this.encoding),t.substring(0,i)):t};r.prototype.detectIncompleteChar=function(n){for(var t=n.length>=3?3:n.length,i;t>0;t--){if(i=n[n.length-t],t==1&&i>>5==6){this.charLength=2;break}if(t<=2&&i>>4==14){this.charLength=3;break}if(t<=3&&i>>3==30){this.charLength=4;break}}return t};r.prototype.end=function(n){var t="";if(n&&n.length&&(t=this.write(n)),this.charReceived){var i=this.charReceived,r=this.charBuffer,u=this.encoding;t+=r.slice(0,i).toString(u)}return t}},{buffer:31}],46:[function(n,t,i){(function(){"use strict";function u(n,i,u){var f,a,w,vt,yt,ot,pt,wt,tt,st,bt,kt,dt,ht,rt,it,gt,ut,ui,ii,ri,ct,p,g,ft,lt,at,et;if(n&&typeof n=="object"&&n.href)return n;if(typeof n!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof n);if(f={},a=n,a=a.trim(),w=y.exec(a),w&&(w=w[0],vt=w.toLowerCase(),f.protocol=vt,a=a.substr(w.length)),(u||w||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(yt=a.substr(0,2)==="//",!yt||w&&o[w]||(a=a.substr(2),f.slashes=!0)),!o[w]&&(yt||w&&!r[w])){if(ot=a.indexOf("@"),ot!==-1){for(pt=a.slice(0,ot),wt=!0,p=0,g=h.length;p<g;p++)if(pt.indexOf(h[p])!==-1){wt=!1;break}wt&&(f.auth=decodeURIComponent(pt),a=a.substr(ot+1))}for(tt=-1,p=0,g=s.length;p<g;p++)st=a.indexOf(s[p]),st!==-1&&(tt<0||st<tt)&&(tt=st);for(tt!==-1?(f.host=a.substr(0,tt),a=a.substr(tt)):(f.host=a,a=""),bt=nt(f.host),kt=Object.keys(bt),p=0,g=kt.length;p<g;p++)dt=kt[p],f[dt]=bt[dt];if(f.hostname=f.hostname||"",ht=f.hostname[0]==="["&&f.hostname[f.hostname.length-1]==="]",f.hostname.length>b)f.hostname="";else if(!ht)for(rt=f.hostname.split(/\./),p=0,g=rt.length;p<g;p++)if((it=rt[p],it)&&!it.match(c)){for(gt="",ut=0,ui=it.length;ut<ui;ut++)gt+=it.charCodeAt(ut)>127?"x":it[ut];if(!gt.match(c)){var fi=rt.slice(0,p),ni=rt.slice(p+1),ti=it.match(k);ti&&(fi.push(ti[1]),ni.unshift(ti[2]));ni.length&&(a="/"+ni.join(".")+a);f.hostname=fi.join(".");break}}if(f.hostname=f.hostname.toLowerCase(),!ht){for(ii=f.hostname.split("."),ri=[],p=0;p<ii.length;++p)ct=ii[p],ri.push(ct.match(/[^A-Za-z0-9_-]/)?"xn--"+v.encode(ct):ct);f.hostname=ri.join(".")}f.host=(f.hostname||"")+(f.port?":"+f.port:"");f.href+=f.host;ht&&(f.hostname=f.hostname.substr(1,f.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!d[vt])for(p=0,g=e.length;p<g;p++)ft=e[p],lt=encodeURIComponent(ft),lt===ft&&(lt=escape(ft)),a=a.split(ft).join(lt);return at=a.indexOf("#"),at!==-1&&(f.hash=a.substr(at),a=a.slice(0,at)),et=a.indexOf("?"),et!==-1?(f.search=a.substr(et),f.query=a.substr(et+1),i&&(f.query=l.parse(f.query)),a=a.slice(0,et)):i&&(f.search="",f.query={}),a&&(f.pathname=a),r[w]&&f.hostname&&!f.pathname&&(f.pathname="/"),(f.pathname||f.search)&&(f.path=(f.pathname?f.pathname:"")+(f.search?f.search:"")),f.href=t(f),f}function t(n){var i,e;typeof n=="string"&&(n=u(n));i=n.auth||"";i&&(i=encodeURIComponent(i),i=i.replace(/%3A/i,":")+"@");var f=n.protocol||"",o=n.pathname||"",s=n.hash||"",t=!1,h="";return n.host!==undefined?t=i+n.host:n.hostname!==undefined&&(t=i+(n.hostname.indexOf(":")===-1?n.hostname:"["+n.hostname+"]"),n.port&&(t+=":"+n.port)),n.query&&typeof n.query=="object"&&Object.keys(n.query).length&&(h=l.stringify(n.query)),e=n.search||h&&"?"+h||"",f&&f.substr(-1)!==":"&&(f+=":"),n.slashes||(!f||r[f])&&t!==!1?(t="//"+(t||""),o&&o.charAt(0)!=="/"&&(o="/"+o)):t||(t=""),s&&s.charAt(0)!=="#"&&(s="#"+s),e&&e.charAt(0)!=="?"&&(e="?"+e),f+t+o+e+s}function g(n,i){return t(a(n,i))}function a(n,i){var e,c,y,h;if(!n)return i;if(n=u(t(n),!1,!0),i=u(t(i),!1,!0),n.hash=i.hash,i.href==="")return n.href=t(n),n;if(i.slashes&&!i.protocol)return i.protocol=n.protocol,r[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=t(i),i;if(i.protocol&&i.protocol!==n.protocol){if(!r[i.protocol])return i.href=t(i),i;if(n.protocol=i.protocol,!i.host&&!o[i.protocol]){for(e=(i.pathname||"").split("/");e.length&&!(i.host=e.shift()););i.host||(i.host="");i.hostname||(i.hostname="");e[0]!==""&&e.unshift("");e.length<2&&e.unshift("");i.pathname=e.join("/")}return n.pathname=i.pathname,n.search=i.search,n.query=i.query,n.host=i.host||"",n.auth=i.auth,n.hostname=i.hostname||i.host,n.port=i.port,(n.pathname!==undefined||n.search!==undefined)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.slashes=n.slashes||i.slashes,n.href=t(n),n}var w=n.pathname&&n.pathname.charAt(0)==="/",p=i.host!==undefined||i.pathname&&i.pathname.charAt(0)==="/",s=p||w||n.host&&i.pathname,b=s,f=n.pathname&&n.pathname.split("/")||[],e=i.pathname&&i.pathname.split("/")||[],v=n.protocol&&!r[n.protocol];if(v&&(delete n.hostname,delete n.port,n.host&&(f[0]===""?f[0]=n.host:f.unshift(n.host)),delete n.host,i.protocol&&(delete i.hostname,delete i.port,i.host&&(e[0]===""?e[0]=i.host:e.unshift(i.host)),delete i.host),s=s&&(e[0]===""||f[0]==="")),p)n.host=i.host||i.host===""?i.host:n.host,n.hostname=i.hostname||i.hostname===""?i.hostname:n.hostname,n.search=i.search,n.query=i.query,f=e;else if(e.length)f||(f=[]),f.pop(),f=f.concat(e),n.search=i.search,n.query=i.query;else if("search"in i)return v&&(n.hostname=n.host=f.shift(),h=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1,h&&(n.auth=h.shift(),n.host=n.hostname=h.shift())),n.search=i.search,n.query=i.query,(n.pathname!==undefined||n.search!==undefined)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=t(n),n;if(!f.length)return delete n.pathname,n.search?delete n.path:n.path="/"+n.search,n.href=t(n),n;var l=f.slice(-1)[0],k=(n.host||i.host)&&(l==="."||l==="..")||l==="",a=0;for(c=f.length;c>=0;c--)l=f[c],l=="."?f.splice(c,1):l===".."?(f.splice(c,1),a++):a&&(f.splice(c,1),a--);if(!s&&!b)for(;a--;a)f.unshift("..");return s&&f[0]!==""&&(!f[0]||f[0].charAt(0)!=="/")&&f.unshift(""),k&&f.join("/").substr(-1)!=="/"&&f.push(""),y=f[0]===""||f[0]&&f[0].charAt(0)==="/",v&&(n.hostname=n.host=y?"":f.length?f.shift():"",h=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1,h&&(n.auth=h.shift(),n.host=n.hostname=h.shift())),s=s||n.host&&f.length,s&&!y&&f.unshift(""),n.pathname=f.join("/"),(n.pathname!==undefined||n.search!==undefined)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=i.auth||n.auth,n.slashes=n.slashes||i.slashes,n.href=t(n),n}function nt(n){var i={},t=p.exec(n);return t&&(t=t[0],t!==":"&&(i.port=t.substr(1)),n=n.substr(0,n.length-t.length)),n&&(i.hostname=n),i}var v=n("punycode");i.parse=u;i.resolve=g;i.resolveObject=a;i.format=t;var y=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,f=["<",">",'"',"`"," ","\r","\n","\t"],w=["{","}","|","\\","^","~","`"].concat(f),e=["'"].concat(f),s=["%","/","?",";","#"].concat(w).concat(e),h=["/","@","?","#"].concat(f),b=255,c=/^[a-zA-Z0-9][a-z0-9A-Z_-]{0,62}$/,k=/^([a-zA-Z0-9][a-z0-9A-Z_-]{0,62})(.*)$/,d={javascript:!0,"javascript:":!0},o={javascript:!0,"javascript:":!0},r={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},l=n("querystring")})()},{punycode:34,querystring:37}],47:[function(n,t){t.exports=function(n){return n&&typeof n=="object"&&typeof n.copy=="function"&&typeof n.fill=="function"&&typeof n.readUInt8=="function"}},{}],48:[function(n,t,i){(function(t,r){function f(n,t){var r={seen:[],stylize:et};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(t)?r.showHidden=t:t&&i._extend(r,t),u(r.showHidden)&&(r.showHidden=!1),u(r.depth)&&(r.depth=2),u(r.colors)&&(r.colors=!1),u(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=ft),s(r,n,r.depth)}function ft(n,t){var i=f.styles[t];return i?"\x1b["+f.colors[i][0]+"m"+n+"\x1b["+f.colors[i][1]+"m":n}function et(n){return n}function ot(n){var t={};return n.forEach(function(n){t[n]=!0}),t}function s(n,t,r){var e,y,u,b,d,g,tt;if(n.customInspect&&t&&v(t.inspect)&&t.inspect!==i.inspect&&!(t.constructor&&t.constructor.prototype===t))return e=t.inspect(r,n),c(e)||(e=s(n,e,r)),e;if(y=st(n,t),y)return y;if(u=Object.keys(t),b=ot(u),n.showHidden&&(u=Object.getOwnPropertyNames(t)),a(t)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return p(t);if(u.length===0){if(v(t))return d=t.name?": "+t.name:"",n.stylize("[Function"+d+"]","special");if(l(t))return n.stylize(RegExp.prototype.toString.call(t),"regexp");if(k(t))return n.stylize(Date.prototype.toString.call(t),"date");if(a(t))return p(t)}var f="",o=!1,h=["{","}"];return(nt(t)&&(o=!0,h=["[","]"]),v(t)&&(g=t.name?": "+t.name:"",f=" [Function"+g+"]"),l(t)&&(f=" "+RegExp.prototype.toString.call(t)),k(t)&&(f=" "+Date.prototype.toUTCString.call(t)),a(t)&&(f=" "+p(t)),u.length===0&&(!o||t.length==0))?h[0]+f+h[1]:r<0?l(t)?n.stylize(RegExp.prototype.toString.call(t),"regexp"):n.stylize("[Object]","special"):(n.seen.push(t),tt=o?ht(n,t,r,b,u):u.map(function(i){return w(n,t,r,b,i,o)}),n.seen.pop(),ct(tt,f,h))}function st(n,t){if(u(t))return n.stylize("undefined","undefined");if(c(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return n.stylize(i,"string")}return tt(t)?n.stylize(""+t,"number"):b(t)?n.stylize(""+t,"boolean"):h(t)?n.stylize("null","null"):void 0}function p(n){return"["+Error.prototype.toString.call(n)+"]"}function ht(n,t,i,r,u){for(var f=[],e=0,o=t.length;e<o;++e)rt(t,String(e))?f.push(w(n,t,i,r,String(e),!0)):f.push("");return u.forEach(function(u){u.match(/^\d+$/)||f.push(w(n,t,i,r,u,!0))}),f}function w(n,t,i,r,f,e){var o,c,l;if(l=Object.getOwnPropertyDescriptor(t,f)||{value:t[f]},l.get?c=l.set?n.stylize("[Getter/Setter]","special"):n.stylize("[Getter]","special"):l.set&&(c=n.stylize("[Setter]","special")),rt(r,f)||(o="["+f+"]"),c||(n.seen.indexOf(l.value)<0?(c=h(i)?s(n,l.value,null):s(n,l.value,i-1),c.indexOf("\n")>-1&&(c=e?c.split("\n").map(function(n){return"  "+n}).join("\n").substr(2):"\n"+c.split("\n").map(function(n){return"   "+n}).join("\n"))):c=n.stylize("[Circular]","special")),u(o)){if(e&&f.match(/^\d+$/))return c;o=JSON.stringify(""+f);o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=n.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=n.stylize(o,"string"))}return o+": "+c}function ct(n,t,i){var r=0,u=n.reduce(function(n,t){return r++,t.indexOf("\n")>=0&&r++,n+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return u>60?i[0]+(t===""?"":t+"\n ")+" "+n.join(",\n  ")+" "+i[1]:i[0]+t+" "+n.join(", ")+" "+i[1]}function nt(n){return Array.isArray(n)}function b(n){return typeof n=="boolean"}function h(n){return n===null}function lt(n){return n==null}function tt(n){return typeof n=="number"}function c(n){return typeof n=="string"}function at(n){return typeof n=="symbol"}function u(n){return n===void 0}function l(n){return e(n)&&d(n)==="[object RegExp]"}function e(n){return typeof n=="object"&&n!==null}function k(n){return e(n)&&d(n)==="[object Date]"}function a(n){return e(n)&&(d(n)==="[object Error]"||n instanceof Error)}function v(n){return typeof n=="function"}function vt(n){return n===null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||typeof n=="symbol"||typeof n=="undefined"}function d(n){return Object.prototype.toString.call(n)}function g(n){return n<10?"0"+n.toString(10):n.toString(10)}function yt(){var n=new Date,t=[g(n.getHours()),g(n.getMinutes()),g(n.getSeconds())].join(":");return[n.getDate(),it[n.getMonth()],t].join(" ")}function rt(n,t){return Object.prototype.hasOwnProperty.call(n,t)}var ut=/%[sdj%]/g,o,y,it;i.format=function(n){var u,t,r;if(!c(n)){for(u=[],t=0;t<arguments.length;t++)u.push(f(arguments[t]));return u.join(" ")}var t=1,i=arguments,o=i.length,s=String(n).replace(ut,function(n){if(n==="%%")return"%";if(t>=o)return n;switch(n){case"%s":return String(i[t++]);case"%d":return Number(i[t++]);case"%j":try{return JSON.stringify(i[t++])}catch(r){return"[Circular]"}default:return n}});for(r=i[t];t<o;r=i[++t])s+=h(r)||!e(r)?" "+r:" "+f(r);return s};i.deprecate=function(n,f){function o(){if(!e){if(t.throwDeprecation)throw new Error(f);else t.traceDeprecation?console.trace(f):console.error(f);e=!0}return n.apply(this,arguments)}if(u(r.process))return function(){return i.deprecate(n,f).apply(this,arguments)};if(t.noDeprecation===!0)return n;var e=!1;return o};o={};i.debuglog=function(n){if(u(y)&&(y=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!o[n])if(new RegExp("\\b"+n+"\\b","i").test(y)){var r=t.pid;o[n]=function(){var t=i.format.apply(i,arguments);console.error("%s %d: %s",n,r,t)}}else o[n]=function(){};return o[n]};i.inspect=f;f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};i.isArray=nt;i.isBoolean=b;i.isNull=h;i.isNullOrUndefined=lt;i.isNumber=tt;i.isString=c;i.isSymbol=at;i.isUndefined=u;i.isRegExp=l;i.isObject=e;i.isDate=k;i.isError=a;i.isFunction=v;i.isPrimitive=vt;i.isBuffer=n("./support/isBuffer");it=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];i.log=function(){console.log("%s - %s",yt(),i.format.apply(i,arguments))};i.inherits=n("inherits");i._extend=function(n,t){if(!t||!e(t))return n;for(var i=Object.keys(t),r=i.length;r--;)n[i[r]]=t[i[r]];return n}}).call(this,n("/Users/damian/projects/raml-js-parser/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./support/isBuffer":47,"/Users/damian/projects/raml-js-parser/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":30,inherits:29}],49:[function(n,t,i){
/*!
 * inflection
 * Copyright(c) 2011 Ben Lin <ben@dreamerslab.com>
 * MIT Licensed
 *
 * @fileoverview
 * A port of inflection-js to node.js module.
 */
(function(n){var u=["equipment","information","rice","money","species","series","fish","sheep","moose","deer","news"],e=[[new RegExp("(m)en$","gi")],[new RegExp("(pe)ople$","gi")],[new RegExp("(child)ren$","gi")],[new RegExp("([ti])a$","gi")],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi")],[new RegExp("(hive)s$","gi")],[new RegExp("(tive)s$","gi")],[new RegExp("(curve)s$","gi")],[new RegExp("([lr])ves$","gi")],[new RegExp("([^fo])ves$","gi")],[new RegExp("([^aeiouy]|qu)ies$","gi")],[new RegExp("(s)eries$","gi")],[new RegExp("(m)ovies$","gi")],[new RegExp("(x|ch|ss|sh)es$","gi")],[new RegExp("([m|l])ice$","gi")],[new RegExp("(bus)es$","gi")],[new RegExp("(o)es$","gi")],[new RegExp("(shoe)s$","gi")],[new RegExp("(cris|ax|test)es$","gi")],[new RegExp("(octop|vir)i$","gi")],[new RegExp("(alias|status)es$","gi")],[new RegExp("^(ox)en","gi")],[new RegExp("(vert|ind)ices$","gi")],[new RegExp("(matr)ices$","gi")],[new RegExp("(quiz)zes$","gi")],[new RegExp("(m)an$","gi"),"$1en"],[new RegExp("(pe)rson$","gi"),"$1ople"],[new RegExp("(child)$","gi"),"$1ren"],[new RegExp("^(ox)$","gi"),"$1en"],[new RegExp("(ax|test)is$","gi"),"$1es"],[new RegExp("(octop|vir)us$","gi"),"$1i"],[new RegExp("(alias|status)$","gi"),"$1es"],[new RegExp("(bu)s$","gi"),"$1ses"],[new RegExp("(buffal|tomat|potat)o$","gi"),"$1oes"],[new RegExp("([ti])um$","gi"),"$1a"],[new RegExp("sis$","gi"),"ses"],[new RegExp("(?:([^f])fe|([lr])f)$","gi"),"$1$2ves"],[new RegExp("(hive)$","gi"),"$1s"],[new RegExp("([^aeiouy]|qu)y$","gi"),"$1ies"],[new RegExp("(x|ch|ss|sh)$","gi"),"$1es"],[new RegExp("(matr|vert|ind)ix|ex$","gi"),"$1ices"],[new RegExp("([m|l])ouse$","gi"),"$1ice"],[new RegExp("(quiz)$","gi"),"$1zes"],[new RegExp("s$","gi"),"s"],[new RegExp("$","gi"),"s"]],o=[[new RegExp("(m)an$","gi")],[new RegExp("(pe)rson$","gi")],[new RegExp("(child)$","gi")],[new RegExp("^(ox)$","gi")],[new RegExp("(ax|test)is$","gi")],[new RegExp("(octop|vir)us$","gi")],[new RegExp("(alias|status)$","gi")],[new RegExp("(bu)s$","gi")],[new RegExp("(buffal|tomat|potat)o$","gi")],[new RegExp("([ti])um$","gi")],[new RegExp("sis$","gi")],[new RegExp("(?:([^f])fe|([lr])f)$","gi")],[new RegExp("(hive)$","gi")],[new RegExp("([^aeiouy]|qu)y$","gi")],[new RegExp("(x|ch|ss|sh)$","gi")],[new RegExp("(matr|vert|ind)ix|ex$","gi")],[new RegExp("([m|l])ouse$","gi")],[new RegExp("(quiz)$","gi")],[new RegExp("(m)en$","gi"),"$1an"],[new RegExp("(pe)ople$","gi"),"$1rson"],[new RegExp("(child)ren$","gi"),"$1"],[new RegExp("([ti])a$","gi"),"$1um"],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),"$1$2sis"],[new RegExp("(hive)s$","gi"),"$1"],[new RegExp("(tive)s$","gi"),"$1"],[new RegExp("(curve)s$","gi"),"$1"],[new RegExp("([lr])ves$","gi"),"$1f"],[new RegExp("([^fo])ves$","gi"),"$1fe"],[new RegExp("([^aeiouy]|qu)ies$","gi"),"$1y"],[new RegExp("(s)eries$","gi"),"$1eries"],[new RegExp("(m)ovies$","gi"),"$1ovie"],[new RegExp("(x|ch|ss|sh)es$","gi"),"$1"],[new RegExp("([m|l])ice$","gi"),"$1ouse"],[new RegExp("(bus)es$","gi"),"$1"],[new RegExp("(o)es$","gi"),"$1"],[new RegExp("(shoe)s$","gi"),"$1"],[new RegExp("(cris|ax|test)es$","gi"),"$1is"],[new RegExp("(octop|vir)i$","gi"),"$1us"],[new RegExp("(alias|status)es$","gi"),"$1"],[new RegExp("^(ox)en","gi"),"$1"],[new RegExp("(vert|ind)ices$","gi"),"$1ex"],[new RegExp("(matr)ices$","gi"),"$1ix"],[new RegExp("(quiz)zes$","gi"),"$1"],[new RegExp("ss$","gi"),"ss"],[new RegExp("s$","gi"),""]],s=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],h=new RegExp("(_ids|_id)$","g"),f=new RegExp("_","g"),c=new RegExp("[ _]","g"),l=new RegExp("([A-Z])","g"),a=new RegExp("^_"),r={_apply_rules:function(n,t,i,u){var e,f,o;if(u)n=u;else if(e=r.indexOf(i,n.toLowerCase())>-1,!e)for(f=0,o=t.length;f<o;f++)if(n.match(t[f][0])){t[f][1]!==undefined&&(n=n.replace(t[f][0],t[f][1]));break}return n},indexOf:function(n,t,i,r){i||(i=-1);for(var f=-1,u=i,e=n.length;u<e;u++)if(n[u]===t||r&&r(n[u],t)){f=u;break}return f},pluralize:function(n,t){return r._apply_rules(n,e,u,t)},singularize:function(n,t){return r._apply_rules(n,o,u,t)},camelize:function(n,t){for(var f=n.toLowerCase().split("/"),i=0,e=f.length;i<e;i++){for(var r=f[i].split("_"),o=t&&i+1===e?1:0,u=o,s=r.length;u<s;u++)r[u]=r[u].charAt(0).toUpperCase()+r[u].substring(1);f[i]=r.join("")}return f.join("::")},underscore:function(n,t){if(t&&n===n.toUpperCase())return n;for(var i=n.split("::"),r=0,u=i.length;r<u;r++)i[r]=i[r].replace(l,"_$1"),i[r]=i[r].replace(a,"");return i.join("/").toLowerCase()},humanize:function(n,t){return n=n.toLowerCase(),n=n.replace(h,""),n=n.replace(f," "),t||(n=r.capitalize(n)),n},capitalize:function(n){return n=n.toLowerCase(),n.substring(0,1).toUpperCase()+n.substring(1)},dasherize:function(n){return n.replace(c,"-")},titleize:function(n){n=n.toLowerCase().replace(f," ");for(var u=n.split(" "),e=0,o=u.length;e<o;e++){for(var t=u[e].split("-"),i=0,h=t.length;i<h;i++)r.indexOf(s,t[i].toLowerCase())<0&&(t[i]=r.capitalize(t[i]));u[e]=t.join("-")}return n=u.join(" "),n.substring(0,1).toUpperCase()+n.substring(1)},demodulize:function(n){var t=n.split("::");return t[t.length-1]},tableize:function(n){return n=r.underscore(n),r.pluralize(n)},classify:function(n){return n=r.camelize(n),r.singularize(n)},foreign_key:function(n,t){return n=r.demodulize(n),r.underscore(n)+(t?"":"_")+"id"},ordinalize:function(n){for(var t=n.split(" "),i=0,o=t.length,e;i<o;i++)if(e=parseInt(t[i],10),!isNaN(e)){var u=t[i].substring(t[i].length-2),f=t[i].substring(t[i].length-1),r="th";u!="11"&&u!="12"&&u!="13"&&(f==="1"?r="st":f==="2"?r="nd":f==="3"&&(r="rd"));t[i]+=r}return t.join(" ")}};if(typeof i=="undefined")return n.inflection=r;r.version="1.2.5";t.exports=r})(this)},{}],50:[function(n,t,i){(function(n){function u(n,t){var i=this;if(!(i instanceof u))return new u(n,t);i.json=n||"";i.options=t||{};i.lower=i.json.toLowerCase();i.options.hasOwnProperty("comments")||(i.options.comments=!0);i.c="";i.i=-1;i.length=i.json.length;i.line=1;i.character=0;i._evidence=i.json.split(o);i.endblock="";i.commabreak=!1;try{i.render()}catch(r){if(typeof r!="string")throw r;i.error=r;i.setEvidence()}}var e=/[0-9]/,r=/(\r\n|\r|\n)/,o=/\r\n|\r|\n/,f=/(\s|\t)/,s=/\\("|\\|\/|b|f|n|r|t|u[0-9]{4})/,h=/^(\-|\+)?[0-9]/;u.contact="Corey Hart (corey@codenothing.com)";u.version="[VERSION]";u.date="[DATE]";u.prototype={render:function(){for(var n=this,i="",t=!1;++n.i<n.length;)if(n.c=n.json[n.i],n.character++,n.options.comments&&n.c=="/")if(i=n.json[n.i+1],i=="*")n.multicomment();else if(i=="/")n.comment();else throw"Unknown character '/', maybe a comment?";else if(r.exec(n.c))n.line++,n.character=0;else if(f.exec(n.c))continue;else if(t)throw"Unknown character '"+n.c+"', expecting end of file.";else if(n.c=="[")t=!0,n.array();else if(n.c=="{")t=!0,n.object();else throw"Unknown character '"+n.c+"', expecting opening block '{' or '[', or maybe a comment";if(!t)throw"Invalid JSON, no content.";},multicomment:function(){for(var n=this;++n.i<n.length;)if(n.c=n.json[n.i],n.character++,n.c=="*"&&n.json[n.i+1]=="/"){n.i++;n.character++;break}else r.exec(n.c)&&(n.line++,n.character=0)},comment:function(){for(var n=this;++n.i<n.length;)if(n.c=n.json[n.i],n.character++,r.exec(n.c)){n.line++;n.character=0;break}},array:function(){var n=this,i=n.endblock,r=n.commabreak,t=!1;for(n.endblock="]",n.commabreak=!1;(t=n.value())!==!0&&n.i<n.length;);if(!t)throw"EOF Error. Expecting closing ']'";n.endblock=i;n.commabreak=r},object:function(){var n=this,u=n.endblock,e=n.commabreak,t=!1,i="",o=!0;for(n.endblock="}",n.commabreak=!1;++n.i<n.length;)if(n.c=n.json[n.i],n.character++,n.options.comments&&n.c=="/")if(i=n.json[n.i+1],i=="*")n.multicomment();else if(i=="/")n.comment();else throw"Unknown character '/', maybe a comment?";else if(r.exec(n.c))n.line++,n.character=0;else if(f.exec(n.c))continue;else if(n.c=='"'){if(o=!1,n.key()===!0){n.endblock=u;n.commabreak=e;t=!0;break}}else if(o&&n.c=="}"){n.endblock=u;n.commabreak=e;t=!0;break}else throw"Unknown Character '"+n.c+"', expecting a string for key statement.";if(!t)throw"EOF Error, expecting closing '}'.";},key:function(){var n=this,t;for(n.string(),t="";++n.i<n.length;)if(n.c=n.json[n.i],n.character++,n.options.comments&&n.c=="/")if(t=n.json[n.i+1],t=="*")n.multicomment();else if(t=="/")n.comment();else throw"Unknown character '/', maybe a comment?";else if(r.exec(n.c))n.line++,n.character=0;else if(f.exec(n.c))continue;else{if(n.c==":")return n.value();throw"Unknown Character '"+n.c+"', expecting a semicolon.";}},value:function(){for(var n=this,t="";++n.i<n.length;)if(n.c=n.json[n.i],n.character++,n.options.comments&&n.c=="/")if(t=n.json[n.i+1],t=="*")n.multicomment();else if(t=="/")n.comment();else throw"Unknown character '/', maybe a comment?";else if(r.exec(n.c))n.line++,n.character=0;else if(f.exec(n.c))continue;else{if(n.c=="{")return n.object(),n.endval();if(n.c=="[")return n.array(),n.endval();if(n.c=='"')return n.string(),n.endval();if(n.json.indexOf("true",n.i)===n.i)return n.i+=3,n.character+=3,n.endval();if(n.json.indexOf("false",n.i)===n.i)return n.i+=4,n.character+=4,n.endval();if(n.json.indexOf("null",n.i)===n.i)return n.i+=3,n.character+=3,n.endval();if(n.c=="-"||e.exec(n.c))return n.numeric();if(n.c=="]"&&n.endblock=="]"){if(n.commabreak)throw"Unexpected End Of Array Error. Expecting a value statement.";return!0}throw"Unknown Character '"+n.c+"', expecting a value.";}},string:function(){for(var n=this,i=!1,t;++n.i<n.length;)if(n.c=n.json[n.i],n.character++,n.c=="\\")if((t=s.exec(n.json.substr(n.i)))&&t.index===0)n.i+=t[1].length,n.character+=t[1].length;else throw"Invalid Reverse Solidus '\\' declaration.";else if(r.exec(n.c))n.line++,n.character=0;else if(n.c=='"'){i=!0;break}if(!i)throw"EOF: No close string '\"' found.";},numeric:function(){var n=this,i=!0,t=null,r=null;for(n.i--,n.character--;++n.i<n.length;){if(n.c=n.json[n.i],n.character++,i&&(i=!1,n.c=="-")){if(!e.exec(n.json[n.i+1]))throw"Unknown Character '"+n.c+"' following a negative, expecting a numeric value.";continue}if(t&&n.c=="."){t=!1;r=!0;continue}else if(r&&n.c.toLowerCase()=="e")if(r=!1,i=!0,h.exec(n.json.substr(n.i+1,2)))n.character++,n.i++;else{n.character++;throw"Unknown Character '"+n.json[n.i+1]+"' following e notation, expecting a numeric value.";}else if(e.exec(n.c))t===null&&(t=!0);else return n.i--,n.character--,n.endval()}},endval:function(){var n=this,t="";for(n.commabreak=!1;++n.i<n.length;)if(n.c=n.json[n.i],n.character++,n.options.comments&&n.c=="/")if(t=n.json[n.i+1],t=="*")n.multicomment();else if(t=="/")n.comment();else throw"Unknown character '/', maybe a comment?";else if(r.exec(n.c))n.line++,n.character=0;else if(f.exec(n.c))continue;else if(n.c==","){n.commabreak=!0;break}else{if(n.c==n.endblock)return!0;throw"Unknown Character '"+n.c+"', expecting a comma or a closing '"+n.endblock+"'";}},setEvidence:function(){var t=this,n=t.line-5,i=n+8,r="";for(n<0&&(n=0,i=8),i>=t._evidence.length&&(i=t._evidence.length);n<i;n++)r+=(n===t.line-1?"-> ":"   ")+(n+1)+"| "+t._evidence[n]+"\n";t.evidence=r}};typeof i=="object"&&typeof t=="object"?t.exports=u:n.JSONLint=u})(this)},{}],51:[function(t,i,r){
/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
(function(t){if(typeof bootstrap=="function")bootstrap("promise",t);else if(typeof r=="object")i.exports=t();else if(typeof n=="function"&&n.amd)n(t);else if(typeof ses!="undefined")if(ses.ok())ses.makeQ=t;else return;else Q=t()})(function(){"use strict";function h(n){return function(){return dt.apply(n,arguments)}}function ft(n){return n===Object(n)}function ri(n){return ii(n)==="[object StopIteration]"||n instanceof b}function et(n,t){var r,i,u;if(a&&t.stack&&typeof n=="object"&&n!==null&&n.stack&&n.stack.indexOf(d)===-1){for(r=[],i=t;!!i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(n.stack);u=r.join("\n"+d+"\n");n.stack=ui(u)}}function ui(n){for(var t,r=n.split("\n"),u=[],i=0;i<r.length;++i)t=r[i],ei(t)||fi(t)||!t||u.push(t);return u.join("\n")}function fi(n){return n.indexOf("(module.js:")!==-1||n.indexOf("(node.js:")!==-1}function ot(n){var r=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(n),t,i;return r?[r[1],Number(r[2])]:(t=/at ([^ ]+):(\d+):(?:\d+)$/.exec(n),t)?[t[1],Number(t[2])]:(i=/.*@(.+):(\d+)$/.exec(n),i?[i[1],Number(i[2])]:void 0)}function ei(n){var t=ot(n),r,i;return t?(r=t[0],i=t[1],r===rt&&i>=kt&&i<=wt):!1}function st(){if(a)try{throw new Error;}catch(i){var n=i.stack.split("\n"),r=n[0].indexOf("@")>0?n[1]:n[2],t=ot(r);return t?(rt=t[0],t[1]):void 0}}function g(n,t,i){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(t+" is deprecated, use "+i+" instead.",new Error("").stack),n.apply(n,arguments)}}function n(n){return o(n)?n:lt(n)?yi(n):it(n)}function r(){function y(n){e=n;s.source=n;v(c,function(t,i){u(function(){n.promiseDispatch.apply(n,i)})},void 0);c=void 0;l=void 0}var c=[],l=[],e,h=w(r.prototype),s=w(t.prototype);if(s.promiseDispatch=function(n,t,r){var f=i(arguments);c?(c.push(f),t==="when"&&r[1]&&l.push(r[1])):u(function(){e.promiseDispatch.apply(e,f)})},s.valueOf=g(function(){if(c)return s;var n=ct(e);return o(n)&&(e=n),n},"valueOf","inspect"),s.inspect=function(){return e?e.inspect():{state:"pending"}},n.longStackSupport&&a)try{throw new Error;}catch(p){s.stack=p.stack.substring(p.stack.indexOf("\n")+1)}return h.promise=s,h.resolve=function(t){e||y(n(t))},h.fulfill=function(n){e||y(it(n))},h.reject=function(n){e||y(f(n))},h.notify=function(n){e||v(l,function(t,i){u(function(){i(n)})},void 0)},h}function ht(n){if(typeof n!="function")throw new TypeError("resolver must be a function.");var t=r();try{n(t.resolve,t.reject,t.notify)}catch(i){t.reject(i)}return t.promise}function oi(t){return ht(function(i,r){for(var u=0,f=t.length;u<f;u++)n(t[u]).then(i,r)})}function t(n,i,r){var u,e;return i===void 0&&(i=function(n){return f(new Error("Promise does not support operation: "+n))}),r===void 0&&(r=function(){return{state:"unknown"}}),u=w(t.prototype),u.promiseDispatch=function(t,r,e){var o;try{o=n[r]?n[r].apply(u,e):i.call(u,r,e)}catch(s){o=f(s)}t&&t(o)},u.inspect=r,r&&(e=r(),e.state==="rejected"&&(u.exception=e.reason),u.valueOf=g(function(){var n=r();return n.state==="pending"||n.state==="rejected"?u:n.value})),u}function e(t,i,r,u){return n(t).then(i,r,u)}function ct(n){if(o(n)){var t=n.inspect();if(t.state==="fulfilled")return t.value}return n}function o(n){return ft(n)&&typeof n.promiseDispatch=="function"&&typeof n.inspect=="function"}function lt(n){return ft(n)&&typeof n.then=="function"}function si(n){return o(n)&&n.inspect().state==="pending"}function hi(n){return!o(n)||n.inspect().state==="fulfilled"}function ci(n){return o(n)&&n.inspect().state==="rejected"}function li(){nt||typeof window=="undefined"||window.Touch||!window.console||console.warn("[Q] Unhandled rejection reasons (should be empty):",s);nt=!0}function at(){for(var t,n=0;n<s.length;n++)t=s[n],console.warn("Unhandled rejection reason:",t)}function tt(){if(s.length=0,y.length=0,nt=!1,!c&&(c=!0,typeof process!="undefined"&&process.on))process.on("exit",at)}function ai(n,t){c&&(y.push(n),t&&typeof t.stack!="undefined"?s.push(t.stack):s.push("(no stack) "+t),li())}function vi(n){if(c){var t=gt(y,n);t!==-1&&(y.splice(t,1),s.splice(t,1))}}function f(n){var i=t({when:function(t){return t&&vi(this),t?t(n):this}},function(){return this},function(){return{state:"rejected",reason:n}});return ai(i,n),i}function it(n){return t({when:function(){return n},get:function(t){return n[t]},set:function(t,i){n[t]=i},"delete":function(t){delete n[t]},post:function(t,i){return t===null||t===void 0?n.apply(void 0,i):n[t].apply(n,i)},apply:function(t,i){return n.apply(t,i)},keys:function(){return ti(n)}},void 0,function(){return{state:"fulfilled",value:n}})}function yi(n){var t=r();return u(function(){try{n.then(t.resolve,t.reject,t.notify)}catch(i){t.reject(i)}}),t.promise}function pi(i){return t({isDef:function(){}},function(n,t){return yt(i,n,t)},function(){return n(i).inspect()})}function vt(t,i,r){return n(t).spread(i,r)}function wi(n){return function(){function t(n,t){var o;if(k){try{o=r[n](t)}catch(s){return f(s)}return o.done?o.value:e(o.value,i,u)}try{o=r[n](t)}catch(s){return ri(s)?s.value:f(s)}return e(o,i,u)}var r=n.apply(this,arguments),i=t.bind(t,"next"),u=t.bind(t,"throw");return i()}}function bi(t){n.done(n.async(t)())}function ki(n){throw new b(n);}function di(n){return function(){return vt([this,l(arguments)],function(t,i){return n.apply(t,i)})}}function yt(t,i,r){return n(t).dispatch(i,r)}function l(n){return e(n,function(n){var i=0,t=r();return v(n,function(r,u,f){var s;o(u)&&(s=u.inspect()).state==="fulfilled"?n[f]=s.value:(++i,e(u,function(r){n[f]=r;--i==0&&t.resolve(n)},t.reject,function(n){t.notify({index:f,value:n})}))},void 0),i===0&&t.resolve(n),t.promise})}function pt(t){return e(t,function(t){return t=p(t,n),e(l(p(t,function(n){return e(n,ut,ut)})),function(){return t})})}function gi(t){return n(t).allSettled()}function nr(t,i){return n(t).then(void 0,void 0,i)}function tr(t,i){return n(t).nodeify(i)}var a=!1,b,k,d,wt;try{throw new Error;}catch(bt){a=!!bt.stack}var kt=st(),rt,ut=function(){},u=function(){function t(){for(var r,i;n.next;){n=n.next;r=n.task;n.task=void 0;i=n.domain;i&&(n.domain=void 0,i.enter());try{r()}catch(u){if(e){i&&i.exit();setTimeout(t,0);i&&i.enter();throw u;}else setTimeout(function(){throw u;},0)}i&&i.exit()}f=!1}var n={task:void 0,next:null},s=n,f=!1,i=void 0,e=!1,r,o;return u=function(n){s=s.next={task:n,domain:e&&process.domain,next:null};f||(f=!0,i())},typeof process!="undefined"&&process.nextTick?(e=!0,i=function(){process.nextTick(t)}):typeof setImmediate=="function"?i=typeof window!="undefined"?setImmediate.bind(window,t):function(){setImmediate(t)}:typeof MessageChannel!="undefined"?(r=new MessageChannel,r.port1.onmessage=function(){i=o;r.port1.onmessage=t;t()},o=function(){r.port2.postMessage(0)},i=function(){setTimeout(t,0);o()}):i=function(){setTimeout(t,0)},u}(),dt=Function.call;var i=h(Array.prototype.slice),v=h(Array.prototype.reduce||function(n,t){var i=0,r=this.length;if(arguments.length===1)do{if(i in this){t=this[i++];break}if(++i>=r)throw new TypeError;}while(1);for(;i<r;i++)i in this&&(t=n(t,this[i],i));return t}),gt=h(Array.prototype.indexOf||function(n){for(var t=0;t<this.length;t++)if(this[t]===n)return t;return-1}),p=h(Array.prototype.map||function(n,t){var i=this,r=[];return v(i,function(u,f,e){r.push(n.call(t,f,e,i))},void 0),r}),w=Object.create||function(n){function t(){}return t.prototype=n,new t},ni=h(Object.prototype.hasOwnProperty),ti=Object.keys||function(n){var t=[];for(var i in n)ni(n,i)&&t.push(i);return t},ii=h(Object.prototype.toString);b=typeof ReturnValue!="undefined"?ReturnValue:function(n){this.value=n};try{new Function("(function* (){ yield 1; })");k=!0}catch(bt){k=!1}d="From previous event:";n.resolve=n;n.nextTick=u;n.longStackSupport=!1;n.defer=r;r.prototype.makeNodeResolver=function(){var n=this;return function(t,r){t?n.reject(t):arguments.length>2?n.resolve(i(arguments,1)):n.resolve(r)}};n.promise=ht;n.passByCopy=function(n){return n};t.prototype.passByCopy=function(){return this};n.join=function(t,i){return n(t).join(i)};t.prototype.join=function(t){return n([this,t]).spread(function(n,t){if(n===t)return n;throw new Error("Can't join: not the same: "+n+" "+t);})};n.race=oi;t.prototype.race=function(){return this.then(n.race)};n.makePromise=t;t.prototype.toString=function(){return"[object Promise]"};t.prototype.then=function(t,i,e){function c(n){try{return typeof t=="function"?t(n):n}catch(i){return f(i)}}function l(n){if(typeof i=="function"){et(n,h);try{return i(n)}catch(t){return f(t)}}return f(n)}function a(n){return typeof e=="function"?e(n):n}var h=this,o=r(),s=!1;return u(function(){h.promiseDispatch(function(n){s||(s=!0,o.resolve(c(n)))},"when",[function(n){s||(s=!0,o.resolve(l(n)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(t){var i,r=!1;try{i=a(t)}catch(u){if(r=!0,n.onerror)n.onerror(u);else throw u;}r||o.notify(i)}]),o.promise};n.when=e;t.prototype.thenResolve=function(n){return this.then(function(){return n})};n.thenResolve=function(t,i){return n(t).thenResolve(i)};t.prototype.thenReject=function(n){return this.then(function(){throw n;})};n.thenReject=function(t,i){return n(t).thenReject(i)};n.nearer=ct;n.isPromise=o;n.isPromiseAlike=lt;n.isPending=si;t.prototype.isPending=function(){return this.inspect().state==="pending"};n.isFulfilled=hi;t.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"};n.isRejected=ci;t.prototype.isRejected=function(){return this.inspect().state==="rejected"};var s=[],y=[],nt=!1,c=!0;return n.resetUnhandledRejections=tt,n.getUnhandledReasons=function(){return s.slice()},n.stopUnhandledRejectionTracking=function(){tt();typeof process!="undefined"&&process.on&&process.removeListener("exit",at);c=!1},tt(),n.reject=f,n.fulfill=it,n.master=pi,n.spread=vt,t.prototype.spread=function(n,t){return this.all().then(function(t){return n.apply(void 0,t)},t)},n.async=wi,n.spawn=bi,n["return"]=ki,n.promised=di,n.dispatch=yt,t.prototype.dispatch=function(n,t){var f=this,i=r();return u(function(){f.promiseDispatch(i.resolve,n,t)}),i.promise},n.get=function(t,i){return n(t).dispatch("get",[i])},t.prototype.get=function(n){return this.dispatch("get",[n])},n.set=function(t,i,r){return n(t).dispatch("set",[i,r])},t.prototype.set=function(n,t){return this.dispatch("set",[n,t])},n.del=n["delete"]=function(t,i){return n(t).dispatch("delete",[i])},t.prototype.del=t.prototype["delete"]=function(n){return this.dispatch("delete",[n])},n.mapply=n.post=function(t,i,r){return n(t).dispatch("post",[i,r])},t.prototype.mapply=t.prototype.post=function(n,t){return this.dispatch("post",[n,t])},n.send=n.mcall=n.invoke=function(t,r){return n(t).dispatch("post",[r,i(arguments,2)])},t.prototype.send=t.prototype.mcall=t.prototype.invoke=function(n){return this.dispatch("post",[n,i(arguments,1)])},n.fapply=function(t,i){return n(t).dispatch("apply",[void 0,i])},t.prototype.fapply=function(n){return this.dispatch("apply",[void 0,n])},n["try"]=n.fcall=function(t){return n(t).dispatch("apply",[void 0,i(arguments,1)])},t.prototype.fcall=function(){return this.dispatch("apply",[void 0,i(arguments)])},n.fbind=function(t){var r=n(t),u=i(arguments,1);return function(){return r.dispatch("apply",[this,u.concat(i(arguments))])}},t.prototype.fbind=function(){var n=this,t=i(arguments);return function(){return n.dispatch("apply",[this,t.concat(i(arguments))])}},n.keys=function(t){return n(t).dispatch("keys",[])},t.prototype.keys=function(){return this.dispatch("keys",[])},n.all=l,t.prototype.all=function(){return l(this)},n.allResolved=g(pt,"allResolved","allSettled"),t.prototype.allResolved=function(){return pt(this)},n.allSettled=gi,t.prototype.allSettled=function(){return this.then(function(t){return l(p(t,function(t){function i(){return t.inspect()}return t=n(t),t.then(i,i)}))})},n.fail=n["catch"]=function(t,i){return n(t).then(void 0,i)},t.prototype.fail=t.prototype["catch"]=function(n){return this.then(void 0,n)},n.progress=nr,t.prototype.progress=function(n){return this.then(void 0,void 0,n)},n.fin=n["finally"]=function(t,i){return n(t)["finally"](i)},t.prototype.fin=t.prototype["finally"]=function(t){return t=n(t),this.then(function(n){return t.fcall().then(function(){return n})},function(n){return t.fcall().then(function(){throw n;})})},n.done=function(t,i,r,u){return n(t).done(i,r,u)},t.prototype.done=function(t,i,r){var f=function(t){u(function(){if(et(t,e),n.onerror)n.onerror(t);else throw t;})},e=t||i||r?this.then(t,i,r):this;typeof process=="object"&&process&&process.domain&&(f=process.domain.bind(f));e.then(void 0,f)},n.timeout=function(t,i,r){return n(t).timeout(i,r)},t.prototype.timeout=function(n,t){var i=r(),u=setTimeout(function(){i.reject(new Error(t||"Timed out after "+n+" ms"))},n);return this.then(function(n){clearTimeout(u);i.resolve(n)},function(n){clearTimeout(u);i.reject(n)},i.notify),i.promise},n.delay=function(t,i){return i===void 0&&(i=t,t=void 0),n(t).delay(i)},t.prototype.delay=function(n){return this.then(function(t){var i=r();return setTimeout(function(){i.resolve(t)},n),i.promise})},n.nfapply=function(t,i){return n(t).nfapply(i)},t.prototype.nfapply=function(n){var t=r(),u=i(n);return u.push(t.makeNodeResolver()),this.fapply(u).fail(t.reject),t.promise},n.nfcall=function(t){var r=i(arguments,1);return n(t).nfapply(r)},t.prototype.nfcall=function(){var t=i(arguments),n=r();return t.push(n.makeNodeResolver()),this.fapply(t).fail(n.reject),n.promise},n.nfbind=n.denodeify=function(t){var u=i(arguments,1);return function(){var e=u.concat(i(arguments)),f=r();return e.push(f.makeNodeResolver()),n(t).fapply(e).fail(f.reject),f.promise}},t.prototype.nfbind=t.prototype.denodeify=function(){var t=i(arguments);return t.unshift(this),n.denodeify.apply(void 0,t)},n.nbind=function(t,u){var f=i(arguments,2);return function(){function s(){return t.apply(u,arguments)}var o=f.concat(i(arguments)),e=r();return o.push(e.makeNodeResolver()),n(s).fapply(o).fail(e.reject),e.promise}},t.prototype.nbind=function(){var t=i(arguments,0);return t.unshift(this),n.nbind.apply(void 0,t)},n.nmapply=n.npost=function(t,i,r){return n(t).npost(i,r)},t.prototype.nmapply=t.prototype.npost=function(n,t){var f=i(t||[]),u=r();return f.push(u.makeNodeResolver()),this.dispatch("post",[n,f]).fail(u.reject),u.promise},n.nsend=n.nmcall=n.ninvoke=function(t,u){var e=i(arguments,2),f=r();return e.push(f.makeNodeResolver()),n(t).dispatch("post",[u,e]).fail(f.reject),f.promise},t.prototype.nsend=t.prototype.nmcall=t.prototype.ninvoke=function(n){var u=i(arguments,1),t=r();return u.push(t.makeNodeResolver()),this.dispatch("post",[n,u]).fail(t.reject),t.promise},n.nodeify=tr,t.prototype.nodeify=function(n){if(n)this.then(function(t){u(function(){n(null,t)})},function(t){u(function(){n(t)})});else return this},wt=st(),n})},{}],52:[function(t,i){(function(t){(function(n){"use strict";function r(n){var i;if(n===null||n===undefined)return!1;if(t.isArray(n))return n.length>0;if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return!0;for(i in n)if(n.hasOwnProperty(i)&&r(n[i]))return!0;return!1}var i=function(){function n(n){this.options=n}return n.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options},n}(),t=function(){function t(n){return Object.prototype.toString.apply(n)==="[object Array]"}function i(n){return Object.prototype.toString.apply(n)==="[object String]"}function r(n){return Object.prototype.toString.apply(n)==="[object Number]"}function u(n){return Object.prototype.toString.apply(n)==="[object Boolean]"}function f(n,t){for(var r="",u=!0,i=0;i<n.length;i+=1)u?u=!1:r+=t,r+=n[i];return r}function e(n,t){for(var r=[],i=0;i<n.length;i+=1)r.push(t(n[i]));return r}function o(n,t){for(var r=[],i=0;i<n.length;i+=1)t(n[i])&&r.push(n[i]);return r}function s(t){if(typeof t!="object"||t===null)return t;Object.freeze(t);var i;for(var r in t)t.hasOwnProperty(r)&&(i=t[r],typeof i=="object"&&n(i));return t}function n(n){return typeof Object.freeze=="function"?s(n):n}return{isArray:t,isString:i,isNumber:r,isBoolean:u,join:f,map:e,filter:o,deepFreeze:n}}(),u=function(){function t(n){return n>="a"&&n<="z"||n>="A"&&n<="Z"}function n(n){return n>="0"&&n<="9"}function i(t){return n(t)||t>="a"&&t<="f"||t>="A"&&t<="F"}return{isAlpha:t,isDigit:n,isHexDigit:i}}(),f=function(){function r(t){for(var u="",f=n.encode(t),r,i=0;i<f.length;i+=1)r=f.charCodeAt(i),u+="%"+(r<16?"0":"")+r.toString(16).toUpperCase();return u}function t(n,t){return n.charAt(t)==="%"&&u.isHexDigit(n.charAt(t+1))&&u.isHexDigit(n.charAt(t+2))}function i(n,t){return parseInt(n.substr(t,2),16)}function f(r){var e,f,u;if(!t(r,0)||(e=i(r,1),f=n.numBytes(e),f===0))return!1;for(u=1;u<f;u+=1)if(!t(r,3*u)||!n.isValidFollowingCharCode(i(r,3*u+1)))return!1;return!0}function e(r,u){var o=r.charAt(u),s,e,f;if(!t(r,u)||(s=i(r,u+1),e=n.numBytes(s),e===0))return o;for(f=1;f<e;f+=1)if(!t(r,u+3*f)||!n.isValidFollowingCharCode(i(r,u+3*f+1)))return o;return r.substr(u,3*e)}var n={encode:function(n){return unescape(encodeURIComponent(n))},numBytes:function(n){return n<=127?1:194<=n&&n<=223?2:224<=n&&n<=239?3:240<=n&&n<=244?4:0},isValidFollowingCharCode:function(n){return 128<=n&&n<=191}};return{encodeCharacter:r,isPctEncoded:f,pctCharAt:e}}(),e=function(){function n(n){return u.isAlpha(n)||u.isDigit(n)||n==="_"||f.isPctEncoded(n)}function t(n){return u.isAlpha(n)||u.isDigit(n)||n==="-"||n==="."||n==="_"||n==="~"}function i(n){return n===":"||n==="/"||n==="?"||n==="#"||n==="["||n==="]"||n==="@"||n==="!"||n==="$"||n==="&"||n==="("||n===")"||n==="*"||n==="+"||n===","||n===";"||n==="="||n==="'"}return{isVarchar:n,isUnreserved:t,isReserved:i}}(),o=function(){function n(n,t){var u="",r,i="";for((typeof n=="number"||typeof n=="boolean")&&(n=n.toString()),r=0;r<n.length;r+=i.length)i=n.charAt(r),u+=e.isUnreserved(i)||t&&e.isReserved(i)?i:f.encodeCharacter(i);return u}function t(t){return n(t,!0)}function i(n,t){var i=f.pctCharAt(n,t);return i.length>1?i:e.isReserved(i)||e.isUnreserved(i)?i:f.encodeCharacter(i)}function r(n){for(var r="",t="",i=0;i<n.length;i+=t.length)t=f.pctCharAt(n,i),r+=t.length>1?t:e.isReserved(t)||e.isUnreserved(t)?t:f.encodeCharacter(t);return r}return{encode:n,encodePassReserved:t,encodeLiteral:r,encodeLiteralCharacter:i}}(),c=function(){function n(n){t[n]={symbol:n,separator:n==="?"?"&":n===""||n==="+"||n==="#"?",":n,named:n===";"||n==="&"||n==="?",ifEmpty:n==="&"||n==="?"?"=":"",first:n==="+"?"":n,encode:n==="+"||n==="#"?o.encodePassReserved:o.encode,toString:function(){return this.symbol}}}var t={};return n(""),n("+"),n("#"),n("."),n("/"),n(";"),n("?"),n("&"),{valueOf:function(n){return t[n]?t[n]:"=,!@|".indexOf(n)>=0?null:t[""]}}}(),s=function(){function n(n){this.literal=o.encodeLiteral(n)}return n.prototype.expand=function(){return this.literal},n.prototype.toString=n.prototype.expand,n}(),l=function(){function n(n){function y(){var u=n.substring(h,t);if(u.length===0)throw new i({expressionText:n,message:"a varname must be specified",position:t});r={varname:u,exploded:!1,maxLength:null};h=null}function p(){if(s===t)throw new i({expressionText:n,message:"after a ':' you have to specify the length",position:t});r.maxLength=parseInt(n.substring(s,t),10);s=null}var l,v=[],r=null,h=null,s=null,t,o="";for(l=function(r){var u=c.valueOf(r);if(u===null)throw new i({expressionText:n,message:"illegal use of reserved operator",position:t,operator:r});return u}(n.charAt(0)),t=l.symbol.length,h=t;t<n.length;t+=o.length){if(o=f.pctCharAt(n,t),h!==null){if(o==="."){if(h===t)throw new i({expressionText:n,message:"a varname MUST NOT start with a dot",position:t});continue}if(e.isVarchar(o))continue;y()}if(s!==null){if(t===s&&o==="0")throw new i({expressionText:n,message:"A :prefix must not start with digit 0",position:t});if(u.isDigit(o)){if(t-s>=4)throw new i({expressionText:n,message:"A :prefix must have max 4 digits",position:t});continue}p()}if(o===":"){if(r.maxLength!==null)throw new i({expressionText:n,message:"only one :maxLength is allowed per varspec",position:t});if(r.exploded)throw new i({expressionText:n,message:"an exploeded varspec MUST NOT be varspeced",position:t});s=t+1;continue}if(o==="*"){if(r===null)throw new i({expressionText:n,message:"exploded without varspec",position:t});if(r.exploded)throw new i({expressionText:n,message:"exploded twice",position:t});if(r.maxLength)throw new i({expressionText:n,message:"an explode (*) MUST NOT follow to a prefix",position:t});r.exploded=!0;continue}if(o===","){v.push(r);r=null;h=t+1;continue}throw new i({expressionText:n,message:"illegal character",character:o,position:t});}return h!==null&&y(),s!==null&&p(),v.push(r),new a(n,l,v)}function t(t){for(var e,c=[],u=null,f=0,r=0;r<t.length;r+=1){if(e=t.charAt(r),f!==null){if(e==="}")throw new i({templateText:t,message:"unopened brace closed",position:r});e==="{"&&(f<r&&c.push(new s(t.substring(f,r))),f=null,u=r);continue}if(u!==null){if(e==="{")throw new i({templateText:t,message:"brace already opened",position:r});if(e==="}"){if(u+1===r)throw new i({templateText:t,message:"empty braces",position:u});try{c.push(n(t.substring(u+1,r)))}catch(o){if(o.prototype===i.prototype)throw new i({templateText:t,message:o.options.message,position:u+o.options.position,details:o.options});throw o;}u=null;f=r+1}continue}throw new Error("reached unreachable code");}if(u!==null)throw new i({templateText:t,message:"unclosed brace",position:u});return f<t.length&&c.push(new s(t.substr(f))),new h(t,c)}return t}(),a=function(){function e(n){return JSON&&JSON.stringify?JSON.stringify(n):n}function n(n){if(!r(n))return!0;if(t.isString(n))return n==="";if(t.isNumber(n)||t.isBoolean(n))return!1;if(t.isArray(n))return n.length===0;for(var i in n)if(n.hasOwnProperty(i))return!1;return!0}function i(n){var i=[];for(var t in n)n.hasOwnProperty(t)&&i.push({name:t,value:n[t]});return i}function u(n,t,i){this.templateText=n;this.operator=t;this.varspecs=i}function s(n,t,i){var r="";if(i=i.toString(),t.named){if(r+=o.encodeLiteral(n.varname),i==="")return r+t.ifEmpty;r+="="}return n.maxLength!==null&&(i=i.substr(0,n.maxLength)),r+t.encode(i)}function f(n){return r(n.value)}function h(u,e,s){var h=[],c="";if(e.named){if(c+=o.encodeLiteral(u.varname),n(s))return c+e.ifEmpty;c+="="}return t.isArray(s)?(h=s,h=t.filter(h,r),h=t.map(h,e.encode),c+=t.join(h,",")):(h=i(s),h=t.filter(h,f),h=t.map(h,function(n){return e.encode(n.name)+","+e.encode(n.value)}),c+=t.join(h,",")),c}function c(u,e,s){var c=t.isArray(s),h=[];return c?(h=s,h=t.filter(h,r),h=t.map(h,function(t){var i=o.encodeLiteral(u.varname);return i+(n(t)?e.ifEmpty:"="+e.encode(t))})):(h=i(s),h=t.filter(h,f),h=t.map(h,function(t){var i=o.encodeLiteral(t.name);return i+(n(t.value)?e.ifEmpty:"="+e.encode(t.value))})),t.join(h,e.separator)}function l(n,u){var f=[],e="";return t.isArray(u)?(f=u,f=t.filter(f,r),f=t.map(f,n.encode),e+=t.join(f,n.separator)):(f=i(u),f=t.filter(f,function(n){return r(n.value)}),f=t.map(f,function(t){return n.encode(t.name)+"="+n.encode(t.value)}),e+=t.join(f,n.separator)),e}return u.prototype.toString=function(){return this.templateText},u.prototype.expand=function(i){for(var a=[],f,u,y,p=!1,o=this.operator,v=0;v<this.varspecs.length;v+=1)if(f=this.varspecs[v],u=i[f.varname],u!==null&&u!==undefined)if(f.exploded&&(p=!0),y=t.isArray(u),typeof u=="string"||typeof u=="number"||typeof u=="boolean")a.push(s(f,o,u));else if(f.maxLength&&r(u))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+e(u));else f.exploded?r(u)&&(o.named?a.push(c(f,o,u)):a.push(l(o,u))):(o.named||!n(u))&&a.push(h(f,o,u));return a.length===0?"":o.first+t.join(a,o.separator)},u}(),h=function(){function n(n,i){this.templateText=n;this.expressions=i;t.deepFreeze(this)}return n.prototype.toString=function(){return this.templateText},n.prototype.expand=function(n){for(var i="",t=0;t<this.expressions.length;t+=1)i+=this.expressions[t].expand(n);return i},n.parse=l,n.UriTemplateError=i,n}();n(h)})(function(r){"use strict";typeof i!="undefined"?i.exports=r:typeof n=="function"?n([],function(){return r}):typeof window!="undefined"?window.UriTemplate=r:t.UriTemplate=r})}).call(this,typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],53:[function(n,t,i){(function(t,r){
/**
 * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
 *
 * This can be used with JS designed for browsers to improve reuse of code and
 * allow the use of existing libraries.
 *
 * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
 *
 * @author Dan DeFelippi <dan@driverdan.com>
 * @contributor David Ellis <d.f.ellis@ieee.org>
 * @license MIT
 */
var f=n("url"),e=n("child_process").spawn,u=n("fs");i.XMLHttpRequest=function(){var i=this,d=n("http"),g=n("https"),a,s,o={},p=!1,w={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},h=w,nt=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],tt=["TRACE","TRACK","CONNECT"],v=!1,y=!1,l={},b,k,c;this.UNSENT=0;this.OPENED=1;this.HEADERS_RECEIVED=2;this.LOADING=3;this.DONE=4;this.readyState=this.UNSENT;this.onreadystatechange=null;this.responseText="";this.responseXML="";this.status=null;this.statusText=null;b=function(n){return p||n&&nt.indexOf(n.toLowerCase())===-1};k=function(n){return n&&tt.indexOf(n)===-1};this.open=function(n,t,i,r,u){if(this.abort(),y=!1,!k(n))throw"SecurityError: Request method not allowed";o={method:n,url:t.toString(),async:typeof i!="boolean"?!0:i,user:r||null,password:u||null};c(this.OPENED)};this.setDisableHeaderCheck=function(n){p=n};this.setRequestHeader=function(n,t){if(this.readyState!=this.OPENED)throw"INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN";if(!b(n)){console.warn('Refused to set unsafe header "'+n+'"');return}if(v)throw"INVALID_STATE_ERR: send flag is true";h[n]=t};this.getResponseHeader=function(n){return typeof n=="string"&&this.readyState>this.OPENED&&s.headers[n.toLowerCase()]&&!y?s.headers[n.toLowerCase()]:null};this.getAllResponseHeaders=function(){var t,n;if(this.readyState<this.HEADERS_RECEIVED||y)return"";t="";for(n in s.headers)n!=="set-cookie"&&n!=="set-cookie2"&&(t+=n+": "+s.headers[n]+"\r\n");return t.substr(0,t.length-2)};this.getRequestHeader=function(n){return typeof n=="string"&&h[n]?h[n]:""};this.send=function(n){var nt,ut,ft,tt,it,p,w,st,ht,ct;if(this.readyState!=this.OPENED)throw"INVALID_STATE_ERR: connection must be opened before send() is called";if(v)throw"INVALID_STATE_ERR: send has already been called";var b=!1,rt=!1,l=f.parse(o.url),k;switch(l.protocol){case"https:":b=!0;case"http:":k=l.hostname;break;case"file:":rt=!0;break;case undefined:case"":k="localhost";break;default:throw"Protocol not supported.";}if(rt){if(o.method!=="GET")throw"XMLHttpRequest: Only GET method is supported";if(o.async)u.readFile(l.pathname,"utf8",function(n,t){n?i.handleError(n):(i.status=200,i.responseText=t,c(i.DONE))});else try{this.responseText=u.readFileSync(l.pathname,"utf8");this.status=200;c(i.DONE)}catch(lt){this.handleError(lt)}return}if(nt=l.port||(b?443:80),ut=l.pathname+(l.search?l.search:""),h.Host=k,b&&nt===443||nt===80||(h.Host+=":"+l.port),o.user&&(typeof o.password=="undefined"&&(o.password=""),ft=new r(o.user+":"+o.password),h.Authorization="Basic "+ft.toString("base64")),o.method==="GET"||o.method==="HEAD"?n=null:n?(h["Content-Length"]=r.isBuffer(n)?n.length:r.byteLength(n),h["Content-Type"]||(h["Content-Type"]="text/plain;charset=UTF-8")):o.method==="POST"&&(h["Content-Length"]=0),tt={host:k,port:nt,path:ut,method:o.method,headers:h,agent:!1},y=!1,o.async){it=b?g.request:d.request;v=!0;i.dispatchEvent("readystatechange");function et(n){var t,r;if(s=n,s.statusCode===302||s.statusCode===303||s.statusCode===307){o.url=s.headers.location;t=f.parse(o.url);k=t.hostname;r={hostname:t.hostname,port:t.port,path:t.path,method:s.statusCode===303?"GET":o.method,headers:h};a=it(r,et).on("error",ot);a.end();return}s.setEncoding("utf8");c(i.HEADERS_RECEIVED);i.status=s.statusCode;s.on("data",function(n){n&&(i.responseText+=n);v&&c(i.LOADING)});s.on("end",function(){v&&(c(i.DONE),v=!1)});s.on("error",function(n){i.handleError(n)})}function ot(n){i.handleError(n)}a=it(tt,et).on("error",ot);n&&a.write(n);a.end();i.dispatchEvent("loadstart")}else{for(p=".node-xmlhttprequest-content-"+t.pid,w=".node-xmlhttprequest-sync-"+t.pid,u.writeFileSync(w,"","utf8"),st="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(b?"s":"")+".request;var options = "+JSON.stringify(tt)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+p+"', 'NODE-XMLHTTPREQUEST-STATUS:' + response.statusCode + ',' + responseText, 'utf8');fs.unlinkSync('"+w+"');});response.on('error', function(error) {fs.writeFileSync('"+p+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+w+"');});}).on('error', function(error) {fs.writeFileSync('"+p+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+w+"');});"+(n?"req.write('"+n.replace(/'/g,"\\'")+"');":"")+"req.end();",ht=e(t.argv[0],["-e",st]);u.existsSync(w););i.responseText=u.readFileSync(p,"utf8");ht.stdin.end();u.unlinkSync(p);i.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)?(ct=i.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""),i.handleError(ct)):(i.status=i.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1"),i.responseText=i.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"),c(i.DONE))}};this.handleError=function(n){this.status=503;this.statusText=n;this.responseText=n.stack;y=!0;c(this.DONE)};this.abort=function(){a&&(a.abort(),a=null);h=w;this.responseText="";this.responseXML="";y=!0;this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||v)&&this.readyState!==this.DONE&&(v=!1,c(this.DONE));this.readyState=this.UNSENT};this.addEventListener=function(n,t){n in l||(l[n]=[]);l[n].push(t)};this.removeEventListener=function(n,t){n in l&&(l[n]=l[n].filter(function(n){return n!==t}))};this.dispatchEvent=function(n){if(typeof i["on"+n]=="function"&&i["on"+n](),n in l)for(var t=0,r=l[n].length;t<r;t++)l[n][t].call(i)};c=function(n){i.readyState!==n&&(i.readyState=n,(o.async||i.readyState<i.OPENED||i.readyState===i.DONE)&&i.dispatchEvent("readystatechange"),i.readyState!==i.DONE||y||(i.dispatchEvent("load"),i.dispatchEvent("loadend")))}}}).call(this,n("/Users/damian/projects/raml-js-parser/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),n("buffer").Buffer)},{child_process:22,fs:22,http:24,https:28,url:46}]},{},[10])(10)});
/*
//# sourceMappingURL=raml-parser.min.js.map
*/